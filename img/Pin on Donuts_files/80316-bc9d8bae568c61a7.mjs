(self.modernJsonp=self.modernJsonp||[]).push([["80316"],{536217(e,t,n){n.d(t,{A:()=>i});function i(e,t){e.classList?e.classList.add(t):(e.classList?t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" "))||("string"==typeof e.className?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))}},81342(e,t,n){function i(e,t){return e.replace(RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function r(e,t){e.classList?e.classList.remove(t):"string"==typeof e.className?e.className=i(e.className,t):e.setAttribute("class",i(e.className&&e.className.baseVal||"",t))}n.d(t,{A:()=>r})},610355(e,t,n){n.d(t,{A:()=>b});var i=n(109346),r=n(408789),s=n(203632),o=n(536217),a=n(81342),l=n(859471),c=n(658289);let d=l.createContext(null);var p="unmounted",u="exited",h="entering",m="entered",x="exiting",f=function(e){function t(t,n){var i,r=e.call(this,t,n)||this,s=n&&!n.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?s?(i=u,r.appearStatus=h):i=m:i=t.unmountOnExit||t.mountOnEnter?p:u,r.state={status:i},r.nextCallback=null,r}(0,s.A)(t,e),t.getDerivedStateFromProps=function(e,t){return e.in&&t.status===p?{status:u}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==h&&n!==m&&(t=h):(n===h||n===m)&&(t=x)}this.updateStatus(!1,t)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var e,t,n,i=this.props.timeout;return e=t=n=i,null!=i&&"number"!=typeof i&&(e=i.exit,t=i.enter,n=void 0!==i.appear?i.appear:t),{exit:e,enter:t,appear:n}},n.updateStatus=function(e,t){void 0===e&&(e=!1),null!==t?(this.cancelNextCallback(),t===h?this.performEnter(e):this.performExit()):this.props.unmountOnExit&&this.state.status===u&&this.setState({status:p})},n.performEnter=function(e){var t=this,n=this.props.enter,i=this.context?this.context.isMounting:e,r=this.props.nodeRef?[i]:[c.findDOMNode(this),i],s=r[0],o=r[1],a=this.getTimeouts(),l=i?a.appear:a.enter;(e||n)&&1?(this.props.onEnter(s,o),this.safeSetState({status:h},function(){t.props.onEntering(s,o),t.onTransitionEnd(l,function(){t.safeSetState({status:m},function(){t.props.onEntered(s,o)})})})):this.safeSetState({status:m},function(){t.props.onEntered(s)})},n.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),i=this.props.nodeRef?void 0:c.findDOMNode(this);t?(this.props.onExit(i),this.safeSetState({status:x},function(){e.props.onExiting(i),e.onTransitionEnd(n.exit,function(){e.safeSetState({status:u},function(){e.props.onExited(i)})})})):this.safeSetState({status:u},function(){e.props.onExited(i)})},n.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},n.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(i){n&&(n=!1,t.nextCallback=null,e(i))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},n.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:c.findDOMNode(this),i=null==e&&!this.props.addEndListener;if(!n||i)return void setTimeout(this.nextCallback,0);if(this.props.addEndListener){var r=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],s=r[0],o=r[1];this.props.addEndListener(s,o)}null!=e&&setTimeout(this.nextCallback,e)},n.render=function(){var e=this.state.status;if(e===p)return null;var t=this.props,n=t.children,i=(t.in,t.mountOnEnter,t.unmountOnExit,t.appear,t.enter,t.exit,t.timeout,t.addEndListener,t.onEnter,t.onEntering,t.onEntered,t.onExit,t.onExiting,t.onExited,t.nodeRef,(0,r.A)(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return l.createElement(d.Provider,{value:null},"function"==typeof n?n(e,i):l.cloneElement(l.Children.only(n),i))},t}(l.Component);function g(){}f.contextType=d,f.propTypes={},f.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:g,onEntering:g,onEntered:g,onExit:g,onExiting:g,onExited:g},f.UNMOUNTED=p,f.EXITED=u,f.ENTERING=h,f.ENTERED=m,f.EXITING=x;var _=function(e,t){return e&&t&&t.split(" ").forEach(function(t){return(0,a.A)(e,t)})},y=function(e){function t(){for(var t,n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))||this).appliedClasses={appear:{},enter:{},exit:{}},t.onEnter=function(e,n){var i=t.resolveArguments(e,n),r=i[0],s=i[1];t.removeClasses(r,"exit"),t.addClass(r,s?"appear":"enter","base"),t.props.onEnter&&t.props.onEnter(e,n)},t.onEntering=function(e,n){var i=t.resolveArguments(e,n),r=i[0],s=i[1];t.addClass(r,s?"appear":"enter","active"),t.props.onEntering&&t.props.onEntering(e,n)},t.onEntered=function(e,n){var i=t.resolveArguments(e,n),r=i[0],s=i[1]?"appear":"enter";t.removeClasses(r,s),t.addClass(r,s,"done"),t.props.onEntered&&t.props.onEntered(e,n)},t.onExit=function(e){var n=t.resolveArguments(e)[0];t.removeClasses(n,"appear"),t.removeClasses(n,"enter"),t.addClass(n,"exit","base"),t.props.onExit&&t.props.onExit(e)},t.onExiting=function(e){var n=t.resolveArguments(e)[0];t.addClass(n,"exit","active"),t.props.onExiting&&t.props.onExiting(e)},t.onExited=function(e){var n=t.resolveArguments(e)[0];t.removeClasses(n,"exit"),t.addClass(n,"exit","done"),t.props.onExited&&t.props.onExited(e)},t.resolveArguments=function(e,n){return t.props.nodeRef?[t.props.nodeRef.current,e]:[e,n]},t.getClassNames=function(e){var n=t.props.classNames,i="string"==typeof n,r=i&&n?n+"-":"",s=i?""+r+e:n[e],o=i?s+"-active":n[e+"Active"],a=i?s+"-done":n[e+"Done"];return{baseClassName:s,activeClassName:o,doneClassName:a}},t}(0,s.A)(t,e);var n=t.prototype;return n.addClass=function(e,t,n){var i,r=this.getClassNames(t)[n+"ClassName"],s=this.getClassNames("enter").doneClassName;"appear"===t&&"done"===n&&s&&(r+=" "+s),"active"===n&&e&&e.scrollTop,r&&(this.appliedClasses[t][n]=r,i=r,e&&i&&i.split(" ").forEach(function(t){return(0,o.A)(e,t)}))},n.removeClasses=function(e,t){var n=this.appliedClasses[t],i=n.base,r=n.active,s=n.done;this.appliedClasses[t]={},i&&_(e,i),r&&_(e,r),s&&_(e,s)},n.render=function(){var e=this.props,t=(e.classNames,(0,r.A)(e,["classNames"]));return l.createElement(f,(0,i.A)({},t,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},t}(l.Component);y.defaultProps={classNames:""},y.propTypes={};let b=y},59311(e,t,n){n.r(t),n.d(t,{default:()=>P});var i=n(335831),r=n(859471),s=n(836737),o=n(321571),a=n(221718),l=n(129625),c=n(640459),d=n(731634),p=n(54905),u=n(388364),h=n(47998),m=n(396901),x=n(410899),f=n(376195),g=n(508765),_=n(220527),y=n(4914),b=n(424120),v=n(449153),E=n(906494),A=n(491149),w=n(87213),j=n(892804),C=n(562615);let k=(0,r.lazy)(()=>n.e("56692").then(n.bind(n,780383))),S=new s.K5([w.f]);function P({handleComplete:e,isNag:t}){(0,r.useEffect)(()=>{(0,i.A)("Banner","/app/packages/CookieConsent/Banner.tsx")},[]);let n=(0,A.Ay)(),w=(0,h.A)(),{logContextEvent:P}=(0,l.o)(),T=(0,r.use)(p.l),I=T?.setObserverRef||(()=>{}),z=(0,m.A)(),M=(0,r.useCallback)(()=>w.isAuth?13716:15456,[w.isAuth]),D=(0,r.useCallback)(()=>w.isAuth?474:747,[w.isAuth]),[O,L]=(0,r.useState)(!0),[B,R]=(0,r.useState)(!1),{showOneToast:N}=(0,E.CG)(),$=(0,g.A)({name:"UserResource",options:{user_id:w.isAuth&&w.id||""}}),U=(0,f._8)(),W="desktop"===n;(0,r.useEffect)(()=>{P({event_type:13,component:M(),view_type:D()})},[P,M,D]);let F=e=>{(0,c.xP)(U),(0,b.y1)().setItem(a.lD,{[U.unauthId]:{allow_analytic_cookies:e.allow_analytic_cookies??!1,allow_marketing_cookies:e.allow_marketing_cookies??!1,allow_personalization_cookies:e.allow_personalization_cookies??!1}})},H=(0,C.jsxs)(s.KJ,{align:W?"start":"center",children:[z._('We use cookies to deliver personalized ads and experiences, and to analyze traffic on our site.', 'homeFeed.cookiesConsentBanner.bannerText', 'Banner description about why we use cookies')," ",(0,x.vQ)(z._('Read our {{ cookiePolicyLink }} for more information.', 'homeFeed.cookiesConsentBanner.readCookiePolicyText', 'Banner description about why we use cookies. "cookiePolicyLink" equals to "Cookie Policy" for english'),{cookiePolicyLink:(0,C.jsx)(s.KJ,{inline:!0,weight:"bold",children:(0,C.jsx)(s.N_,{display:"inlineBlock",href:v.Q$y,target:"blank",underline:"hover",children:z._('cookie policy', 'homeFeed.cookiesConsentBanner.cookiePolicyLink', 'Cookie policy link')},"cookie-policy-link")})})]}),J=(0,C.jsxs)(s.so,{direction:W?"row":"column",gap:W?{row:2,column:0}:{column:4,row:0},children:[(0,C.jsx)(s.$n,{fullWidth:!0,onClick:()=>{P({event_type:101,component:M(),view_type:D(),element:11984}),(0,j.GV)("webapp.updateCookiePreferences",{sampleRate:.1,tags:{allow_analytic_cookies:"true",allow_marketing_cookies:"true",allow_personalization_cookies:"true",location:"app_packages_CookieConsent_Banner_handleAcceptAll"}}),w.isAuth?o.A.create("UserSettingsResource",{allow_analytic_cookies:!0,allow_marketing_cookies:!0,allow_personalization_cookies:!0,surface_tag:y.r.HOLISTIC_PROFILE_PROMPT}).callUpdate().then(()=>{$.refresh(),N(({hideToast:e})=>(0,C.jsx)(u.A,{duration:3e3,onHide:e,text:z._('We saved your cookie preferences. You can change them in the settings section of your profile at any time.', 'homeFeed.cookiesConsentBanner.acceptedAllToastText', 'Success message after accepting all optional cookies')})),e()}):(F({allow_analytic_cookies:!0,allow_marketing_cookies:!0,allow_personalization_cookies:!0}),N(({hideToast:e})=>(0,C.jsx)(u.A,{duration:3e3,onHide:e,text:z._('We saved your cookie preferences. You can change them in the settings section of your profile at any time.', 'homeFeed.cookiesConsentBanner.acceptedAllToastText', 'Success message after accepting all optional cookies')})),e())},size:W?"lg":"md",text:z._('Accept all', 'navFooter.cookieConsentBanner.acceptAllButton', 'Accept all cookies button')}),(0,C.jsx)(s.$n,{fullWidth:!0,onClick:()=>{P({event_type:101,component:M(),view_type:D(),element:11985}),(0,j.GV)("webapp.updateCookiePreferences",{sampleRate:.1,tags:{allow_analytic_cookies:"false",allow_marketing_cookies:"false",allow_personalization_cookies:"false",location:"app_common_react_components_CookieConsent_Banner_handleRejectAll"}}),w.isAuth?o.A.create("UserSettingsResource",{allow_analytic_cookies:!1,allow_marketing_cookies:!1,allow_personalization_cookies:!1,surface_tag:y.r.HOLISTIC_PROFILE_PROMPT}).callUpdate().then(()=>{$.refresh(),N(({hideToast:e})=>(0,C.jsx)(u.A,{duration:3e3,onHide:e,text:z._('We saved your cookie preferences. You can change them in the settings section of your profile at any time.', 'homeFeed.cookiesConsentBanner.acceptedAllToastText', 'Success message after accepting all optional cookies')})),e()}):(F({allow_analytic_cookies:!1,allow_marketing_cookies:!1,allow_personalization_cookies:!1}),N(({hideToast:e})=>(0,C.jsx)(u.A,{duration:3e3,onHide:e,text:z._('We saved your cookie preferences. You can change them in the settings section of your profile at any time.', 'homeFeed.cookiesConsentBanner.acceptedAllToastText', 'Success message after accepting all optional cookies')})),e())},size:W?"lg":"md",text:z._('Reject all', 'navFooter.cookieConsentBanner.rejectAllButton', 'Manage cookie settings button')}),(0,C.jsx)(s.$n,{fullWidth:!0,onClick:()=>{P({event_type:101,component:M(),view_type:D(),element:11986}),R(!0),W||L(!1)},size:W?"lg":"md",text:z._('Let me choose', 'navFooter.cookieConsentBanner.manageCookiesButton', 'Manage cookie settings button')})]});return(0,C.jsxs)(r.Fragment,{children:[O&&(W?(0,C.jsx)(s.az,{ref:I,paddingX:2,paddingY:2,smPaddingX:6,smPaddingY:2*!!t,children:(0,C.jsxs)(s.az,{alignItems:"center",borderColor:"decorative",borderWidth:"sm",color:w.isAuth?"transparent":void 0,dangerouslySetInlineStyle:w.isAuth?void 0:{__style:{backgroundColor:"var(--base-color-grayscale-50)"}},"data-test-id":"cookie-consent-banner",direction:"column",display:"flex",justifyContent:"between",marginBottom:6*!t,overflow:"hidden",padding:t?3:6,position:"relative",rounding:400,smDirection:"row",children:[(0,C.jsx)(s.az,{display:"flex",marginEnd:0,smMarginEnd:7,children:H}),(0,C.jsx)(s.az,{alignItems:"center",display:"flex",flex:"none",justifyContent:"center",marginTop:4,smMarginTop:0,children:J})]})}):(0,C.jsx)(s.Wd,{zIndex:S,children:(0,C.jsx)(s.az,{ref:I,bottom:!0,marginBottom:2,position:"fixed",width:"100%",children:(0,C.jsxs)(s.az,{alignItems:"center",color:"default",direction:"column",display:"flex",elevation:"shadowFloating",marginEnd:"auto",marginStart:"auto",padding:6,rounding:600,width:"95%",children:[H,(0,C.jsx)(s.az,{marginTop:4,minWidth:240,children:J})]})})})),B&&(0,C.jsx)(d.A,{name:"SafeSuspense_CookieConsentBanner_SettingsModal",children:(0,C.jsx)(_.A,{children:(0,C.jsx)(s.az,{"data-test-id":"settings-modal",children:(0,C.jsx)(k,{dismissIcon:"close",handleComplete:e,onClose:()=>R(!1)})})})})]})}},640459(e,t,n){n.d(t,{N2:()=>c,On:()=>d,jU:()=>l,mK:()=>p,xP:()=>u});var i=n(221718),r=n(761603),s=n(528989),o=n(424120);let a=new Set(r.A);function l(e){let{countryFromIp:t,countryFromHostName:n,regionFromIp:i}=e;return!!t&&a.has(t)||!!n&&a.has(n)||"CA-QC"===i}function c(e){return l(e)&&!(0,o.y1)().getItem(i.lD)?.[e.unauthId]}function d(e){let{checkExperiment:t}=(0,s.A)();return l(e)&&(t("dweb_unauth_cookie_consent_modal",{dangerouslySkipActivation:!0}).anyEnabled||t("dweb_unauth_cookie_consent_banner",{dangerouslySkipActivation:!0}).anyEnabled)}function p(e){let{checkExperiment:t}=(0,s.A)();return l(e)&&(t("mweb_unauth_cookie_consent_modal",{dangerouslySkipActivation:!0}).anyEnabled||t("mweb_unauth_cookie_consent_banner",{dangerouslySkipActivation:!0}).anyEnabled)}function u(e){(0,o.gE)({countryFromHostName:e.countryFromHostName||"",countryFromIp:e.countryFromIp||"",regionFromIp:e.regionFromIp,isAuthenticated:e.isAuthenticated,unauthId:e.unauthId,unauthConsent:!0})}},921831(e,t,n){n.d(t,{A:()=>i});function i(e){return("u"<typeof window||!Object.prototype.hasOwnProperty.call(window,"requestAnimationFrame"))&&e&&e(),window.requestAnimationFrame(()=>{window.requestAnimationFrame(()=>{e&&e()})})}},94024(e,t,n){n.d(t,{Lc:()=>s,Mc:()=>r,gJ:()=>o});var i=n(836737);let r=new i.rk(3),s=new i.K5([r]),o=new i.K5([s])},625277(e,t,n){n.d(t,{D2:()=>b,be:()=>x,ee:()=>h,fO:()=>g,xq:()=>m,zC:()=>f});var i=n(859471),r=n(528989),s=n(376195),o=n(424120),a=n(503023),l=n(798923),c=n(491149);let d="dark",p="light",u="auto",h="rgba(17, 17, 17, 1)",m="rgba(17, 17, 17, 0)",x="rgb(43, 43, 43)",f="#767676",g="rgba(0,0,0, 0.8)",_=()=>"u">typeof window&&null!=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,y=(e,t)=>`${t?"dweb":"mweb"}.dark_mode.${e}`;function b(){let{theme:e,isAuthenticated:t}=(0,s._8)(),n=(0,c.qJ)(),h=(0,c.M)(),m=(0,c.wI)(),{checkExperiment:x}=(0,r.A)(),f=t&&(0,a.A)("theme")&&(h||m||n&&x("dweb_dark_mode").anyEnabled),g=f&&e===d,[b,v]=(0,i.useState)(()=>g?d:p),[E,A]=(0,i.useState)(!1),w=f&&(g||b===d||b===u&&E);return(0,i.useEffect)(()=>{let e,t=(e=(0,o.y1)().getItem("theme"))===d||e===p||e===u?e:p;v(t),t===u&&A(_())},[t]),(0,i.useEffect)(()=>{f&&w&&(document.body.style.backgroundColor="var(--sema-color-background-default)")},[f,w]),(0,i.useEffect)(()=>{if(b!==u||"u"<typeof window||null==window.matchMedia)return;let e=window.matchMedia("(prefers-color-scheme: dark)"),t=e=>{A(e.matches)};return e.addEventListener("change",t),()=>e.removeEventListener("change",t)},[b]),{isDarkMode:w,isDarkModeSupported:f,enableMode:e=>{if(e===u){let e=_();A(e),(0,o.y1)().setItem("theme",u),(0,l.PM)(y(e?"enable":"disable",n))}else e===d?((0,o.y1)().setItem("theme",d),(0,l.PM)(y("enable",n))):((0,o.y1)().setItem("theme",p),(0,l.PM)(y("disable",n)));v(e),window.location.reload()},followsSystemSetting:b===u}}},135455(e,t,n){n.d(t,{A:()=>_});var i=n(335831),r=n(859471),s=n(836737),o=n(92035),a=n(303683),l=n(389598),c=n(606815),d=n(866804),p=n(428743),u=n(491149),h=n(169250),m=n(562615);let x=new s.rk(h.d1),f=new s.K5([x]),g=({complete:e,dismiss:t,experience:{display_data:n},isMobile:i})=>{let{titleText:r,detailedText:o,completeButton:u,dismissButton:h}=(0,c.A)(d.A)(n),{setObserverRef:x}=(0,a.NM)(),g=i?"center":"start",_=!!u&&(0,p.A)({url:u.uri});return(0,m.jsx)(s.Wd,{zIndex:f,children:(0,m.jsx)(l.Ay,{accessibilityModalLabel:r,footer:(0,m.jsxs)(s.az,{dangerouslySetInlineStyle:{__style:{flexWrap:"wrap-reverse"}},display:"flex",justifyContent:i?"center":"end",children:[h&&(0,m.jsx)(s.az,{fit:!0,flex:i?"grow":"none",minWidth:i?130:void 0,padding:1,children:(0,m.jsx)(s.$n,{color:"secondary",fullWidth:i,onClick:t,size:"lg",text:h.text})}),u&&(0,m.jsx)(s.az,{fit:!0,flex:i?"grow":"none",minWidth:i?130:void 0,padding:1,children:(0,m.jsx)(s.vx,{color:"primary",fullWidth:i,href:u.uri,onClick:()=>e(),rel:_?"nofollow":"none",size:"lg",text:u.text})})]}),heading:(0,m.jsx)(s.az,{marginTop:2*!!i,children:(0,m.jsxs)(s.so,{justifyContent:"between",children:[(0,m.jsx)(s._Y,{accessibilityLevel:1,size:"600",children:r}),!i&&(0,m.jsx)(s.K0,{accessibilityLabel:"Dismiss modal",bgColor:"default",icon:"close",iconColor:"default",onClick:t,size:"sm"})]})}),onDismiss:t,size:"sm",children:(0,m.jsx)(s.az,{ref:x,padding:6,children:(0,m.jsx)(s.KJ,{align:g,children:o})})})})};function _({experience:e,placementId:t}){(0,r.useEffect)(()=>{(0,i.A)("ExperienceActionPrompt","/app/packages/experiences/Experiences/ExperienceActionPrompt/ExperienceActionPrompt.tsx")},[]);let n=(0,u.M)(),{enableExperienceSession:s,endOnSurfaceChange:l}=(0,a.wQ)(t);return(0,m.jsx)(o.Ay,{eligibleTypes:[14],enableExperienceSession:s,experience:e,placementId:t,sessionEndOnSurfaceChange:l,children:({complete:e,dismiss:t,experience:i})=>(0,m.jsx)(g,{complete:e,dismiss:t,experience:i,isMobile:n})})}},38316(e,t,n){n.d(t,{A:()=>u});var i=n(335831),r=n(859471),s=n(836737),o=n(562615);class a extends r.Component{renderFlyout(){let{anchor:e,tooltip:t,handleDismiss:n,handleComplete:i}=this.props;if(!t)return null;let{cancelButtonText:r,confirmButtonText:a,mainText:l,idealDirection:c="down"}=t,d=r&&!!n&&a&&i;return(0,o.jsx)(s.fT,{anchor:e,idealDirection:c,message:l,onDismiss:n,primaryAction:{onClick:d?n:i,text:d?String(r):String(a),role:"button"},size:"flexible"})}render(){let{anchor:e}=this.props;return e?this.renderFlyout():null}componentDidMount(){(0,i.A)("LegacyToolTipPulsar","/app/packages/experiences/Experiences/ExperienceAnchor/LegacyToolTipPulsar.tsx")}}var l=n(642769),c=n(917651),d=n(606815),p=n(866804);function u({anchor:e,anchorElementRef:t,children:n,containerBoxConfig:u,experience:h,isHidden:m,onCompleteClick:x,zIndex:f}){(0,r.useEffect)(()=>{(0,i.A)("ExperienceAnchor","/app/packages/experiences/Experiences/ExperienceAnchor/ExperienceAnchor.tsx")},[]);let{completeExperience:g,dismissExperience:_,experiences:y,viewExperience:b}=(0,l.WJ)(),v=(({anchor:e,anchorExperiences:t,passedExperience:n})=>n||(t?t[e]:null))({anchor:e,anchorExperiences:Object.values(y).reduce((e,t)=>{let n=(0,c.al)(t);return 8===t.type&&n&&(e[n]=t),e},{}),passedExperience:h}),E=v?.display_data?.delay||0,[A,w]=(0,r.useState)(!!E);if((0,r.useEffect)(()=>{if(E>0&&A){let e=setTimeout(()=>{w(!1)});return()=>clearTimeout(e)}return()=>{}},[E,A]),(0,r.useEffect)(()=>{!A&&v&&b(v.placement_id,v.experience_id)},[A,v]),!v||A||m)return r.Children.only(n);let j=(e=>{let{display_data:t}=e;return t.tooltip&&(t.tooltip={...t.tooltip.options,...t.tooltip},delete t.tooltip.options),(0,d.A)(p.A,!0)(t)})(v),C=()=>{v.display_data?.complete_on_hover&&g(v.placement_id,v.experience_id)};return(0,o.jsxs)(s.az,{display:u?.display,height:u?.height,position:"relative",children:[(0,o.jsx)(s.Rp,{onMouseEnter:C,onTap:()=>{x&&x(),j.skipComplete||g(v.placement_id,v.experience_id)},children:r.Children.only(n)}),(0,o.jsx)(a,{anchor:t||null,handleComplete:()=>{t instanceof HTMLElement&&t.click()},handleDismiss:e=>{e?.event&&e.event.stopPropagation(),_(v.placement_id,v.experience_id)},handlePulsarCompleteOnHover:C,pulserOnly:!!j.pulserOnly,tooltip:j.tooltip,zIndex:f})]})}},312952(e,t,n){n.r(t),n.d(t,{default:()=>k});var i=n(335831),r=n(859471),s=n(610355),o=n(836737),a=n(59311),l=n(92035),c=n(303683),d=n(538346),p=n(606815),u=n(376195),h=n(866804),m=n(396901),x=n(901787),f=n(562615);let g=()=>{};function _({color:e,completeButtonText:t,completeButtonUrl:n,completeButtonUrlInNewTab:s,dismissButtonText:o,handleComplete:a=g,handleDismiss:l=g,header:c="",headerSubtitle:d=""}){(0,r.useEffect)(()=>{(0,i.A)("Hero","/app/packages/ui/Hero.tsx")},[]);let p=(0,m.A)();return(0,f.jsx)(x.A,{color:e,completeButtonText:t||p._('Go', 'Completing the Hero banner', 'Completing the Hero banner'),completeUrl:n,dismissButtonText:o||p._('Close', 'Closing a Hero banner', 'Closing a Hero banner'),external:s,message:(c+" "+d).trim(),onComplete:a,onDismiss:l})}var y=n(119795);let b=function({handleDismiss:e=()=>{},header:t="",headerSubtitle:n="",dismissButtonText:i=""}){let r=(0,m.A)();return(0,f.jsx)(x.A,{dismissButtonText:i||r._('Got it', 'dismissButton.hero.dismissText', 'Dismissing the Hero banner'),message:`${t} ${n}`,onDismiss:e})},v=function({color:e="default",completeButtonText:t,completeButtonUrl:n,completeButtonUrlInNewTab:i,handleComplete:r=()=>{},header:s="",headerSubtitle:o=""}){let a=(0,m.A)();return(0,f.jsx)(x.A,{color:e,completeButtonText:t||a._('Go', 'Completing the Hero banner', 'Completing the Hero banner'),completeUrl:n,external:i,message:(s+" "+o).trim(),onComplete:r})};var E=n(923957),A=n(47998),w=n(410899);function j({completeButtonText:e,headerSubtitle:t,handleComplete:n,handleDismiss:s}){(0,r.useEffect)(()=>{(0,i.A)("WelcomeHero","/app/www/nux/WelcomeHero.tsx")},[]);let a=(0,m.A)(),l=(0,A.A)(),c=l.isAuth?l?.avatar_color_index:void 0,{firstName:d="",imageLargeUrl:p=""}=l.isAuth?l:{};return(0,f.jsx)(o.az,{display:"flex",justifyContent:"center",position:"relative",children:(0,f.jsxs)(o.az,{alignItems:"center",dangerouslySetInlineStyle:{__style:{backgroundColor:"#EBF4FE"}},display:"flex",elevation:"shadowFloating",justifyContent:"between",marginBottom:2,marginEnd:8,marginStart:8,marginTop:4,padding:8,position:"relative",rounding:400,width:1016,children:[(0,f.jsxs)(o.so,{alignItems:"center",justifyContent:"start",children:[(0,f.jsx)(o.az,{marginBottom:-2,marginEnd:6,marginTop:-2,children:(0,f.jsx)(E.eu,{color:c,name:d,outline:!0,size:"lg",src:p})}),(0,f.jsxs)(o.so,{alignItems:"stretch",direction:"column",justifyContent:"center",children:[(0,f.jsx)(o.az,{marginBottom:2,children:(0,f.jsx)(o._Y,{size:"400",children:(0,w.vQ)(a._('Welcome back, {{ name }}', 'shown on a banner, "welcome back, first_name"', 'shown on a banner, "welcome back, first_name"'),{name:d})})}),(0,f.jsx)(o.KJ,{children:t})]})]}),(0,f.jsx)(o.az,{marginEnd:4,children:(0,f.jsx)(o.$n,{color:"tertiary",onClick:n,size:"lg",text:e})}),(0,f.jsx)(o.az,{padding:2,position:"absolute",right:!0,top:!0,children:(0,f.jsx)(o.K0,{accessibilityLabel:a._('Close', 'accessible label for close button', 'accessible label for close button'),icon:"close",iconColor:"default",onClick:s,size:"sm"})})]})})}let C=({complete:e,dismiss:t,experience:{display_data:n,experience_id:i},completeButtonUrl:l,onDismiss:d})=>{let[m,x]=(0,r.useState)(!1),g=(0,u._8)(),E=(0,r.useRef)(null);l&&(n.complete_button_url=l);let{setObserverRef:A}=(0,c.NM)(),w=(e=>{switch(e){case 502597:return a.default;case 500863:return j;case 501153:case 501487:return v;default:return _}})(i),C={requestContext:g,experienceId:i,handleComplete:e,handleDismiss:()=>{d&&d(),t()},color:w===b?"dark":"infoBase",...(0,p.A)(h.A)(n)};(0,y.A)(()=>{m||x(!0)});let k=(0,r.useCallback)((e=null)=>{A(e),E.current=e},[A]);return(0,f.jsx)(s.A,{classNames:"ExperienceHero",in:m,nodeRef:E,timeout:400,unmountOnExit:!0,children:(0,f.jsx)(o.az,{ref:k,marginBottom:4,children:(0,f.jsx)(w,{...C})})})};function k({completeButtonUrl:e,onDismiss:t,placementId:n}){(0,r.useEffect)(()=>{(0,i.A)("ExperienceHero","/app/packages/experiences/Experiences/ExperienceHero/ExperienceHero.tsx")},[]);let{enableExperienceSession:s,endOnSurfaceChange:o}=(0,c.wQ)(n),a=`
.ExperienceHero-enter {
  opacity: 0;
  transform: translateY(-50px);
}

.ExperienceHero-enter-active {
  opacity: 1;
  transform: none;
  transition: all 400ms ease-out;
}

.ExperienceHero-exit {
  opacity: 1;
}

.ExperienceHero-exit-active {
  opacity: 0;
  transition: opacity 400ms ease-out;
}
`;return(0,f.jsxs)(r.Fragment,{children:[(0,f.jsx)(d.A,{unsafeCSS:a}),(0,f.jsx)(l.Ay,{eligibleTypes:[13],enableExperienceSession:s,placementId:n,sessionEndOnSurfaceChange:o,children:({complete:n,dismiss:i,experience:r})=>(0,f.jsx)(C,{complete:n,completeButtonUrl:e,dismiss:i,experience:r,onDismiss:t})})]})}},78e4(e,t,n){n.d(t,{En:()=>p,am:()=>_,xe:()=>g});var i=n(335831),r=n(859471),s=n(836737),o=n(562615);function a(e,t,n){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class l extends r.PureComponent{constructor(...e){super(...e),a(this,"onScroll",()=>{let{dismiss:e}=this.props;this.dismissed||this.timer||(this.timer=setTimeout(()=>{e(),this.dismissed=!0,this.timer=void 0},3e3))}),a(this,"dismissed",!1)}componentDidMount(){window.addEventListener("scroll",this.onScroll)}componentWillUnmount(){this.timer&&clearTimeout(this.timer)}render(){let{anchor:e,text:t,thumbnails:n,idealDirection:i,forceDirection:r}=this.props,a=n.slice(-3);return(0,o.jsx)(s.AM,{anchor:e,color:"white",forceDirection:r,idealDirection:i,onDismiss:this.onScroll,shouldFocus:!1,size:"md",children:(0,o.jsxs)(s.az,{alignContent:"center",display:"flex",justifyContent:"between",padding:3,width:"100%",children:[(0,o.jsx)(s.az,{alignItems:"center",display:"flex",flex:"grow",justifyContent:"center",marginStart:-3,paddingX:3,children:(0,o.jsx)(s.KJ,{color:"default",weight:"bold",children:t})}),(0,o.jsx)(s.az,{display:"flex",marginEnd:-2,paddingX:2,children:a.map(e=>(0,o.jsx)(s.az,{height:60,paddingX:1,width:50,children:(0,o.jsx)(s.n1,{height:60,rounding:200,children:(0,o.jsx)(s._V,{alt:"More Ideas Thumbnail",color:"rgb(86, 152, 239)",fit:"cover",naturalHeight:60,naturalWidth:60,src:e})})},e))})]})})}}var c=n(783637);function d(e,t,n){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class p extends r.Component{constructor(...e){super(...e),d(this,"dismissRef",(0,r.createRef)()),d(this,"state",{paused:!1}),d(this,"dismissCb",()=>{this.dismissRef.current?.()})}componentWillUnmount(){let{anchor:e}=this.props;this.timer&&clearTimeout(this.timer),e?.removeEventListener("click",this.dismissCb)}setDefaultTooltip(e){e.has_tooltip=null==e.has_tooltip||e.has_tooltip}getText(e,t,n){return(t&&e.text.replace("{boardName}",t),n)?n(e):e.text}render(){let{anchor:e,customWrapper:t,experienceIds:n,boardTextOverride:i,fontSize:a,forceDirection:d,hasFullWidthButton:p=!0,idealDirection:u,useMasonryFlyout:h,noClickToDismiss:m,onClickComplete:x,onClickDismiss:f,placementId:g,shouldTimeoutDismiss:_,textAlign:y,textOverflow:b,textOverrideFn:v,textWeight:E,customizedComplete:A,advertiserId:w,dismissButtonLocation:j,dismissButtonMarginTop:C,zIndex:k}=this.props,S=t||(({children:e})=>h?(0,o.jsx)(s.Wd,{children:e}):e);return(0,o.jsx)(c.J,{eligibleIds:n,eligibleTypes:[8],placementId:g,targeting:w?{advertiserId:parseInt(w,10)}:null,children:({complete:t,dismiss:n,experience:c})=>{let{display_data:{scroll_to_dismiss:h,scroll_to_dismiss_delay_in_seconds:g=0,...w}}=c,P=h&&e,T=()=>{I(),this.timer||(this.timer=setTimeout(n,1e3*g))},I=()=>{P&&(window.removeEventListener("scroll",T),window.removeEventListener("touchmove",T))},z=()=>{I(),t()};return(P&&(window.addEventListener("scroll",T),window.addEventListener("touchmove",T)),this.setDefaultTooltip(w),w.has_tooltip)?(_&&w.disappearTime&&w.disappearTime>0&&(this.timer=setTimeout(()=>(T(),null),w.disappearTime)),w.has_tooltip&&(this.dismissRef.current=T,e?.addEventListener("click",this.dismissCb)),(0,o.jsx)(r.Fragment,{children:w.has_tooltip&&!this.state.paused&&(w.thumbnail_urls?(0,o.jsx)(l,{anchor:e,dismiss:T,forceDirection:d,idealDirection:u||"down",text:w.text,thumbnails:w.thumbnail_urls}):(0,o.jsx)(S,{children:(0,o.jsx)(s.fT,{anchor:e,forceDirection:d,idealDirection:u||"down",onDismiss:m?()=>{}:T,shouldFocus:!1,size:"sm",zIndex:k,children:(0,o.jsxs)(s.az,{column:12,padding:3,children:[(0,o.jsxs)(s.KJ,{align:"right"===y?"end":y,color:"light",overflow:b,size:a,weight:E||"bold",children:[this.getText(w,i,v),w.secondary_cta_link&&(0,o.jsx)(s.az,{display:"inlineBlock",marginStart:1,children:(0,o.jsx)(s.KJ,{color:"light",size:a,weight:"bold",children:(0,o.jsx)(s.N_,{display:"inlineBlock",href:w.secondary_cta_link.url,target:"blank",underline:"hover",children:w.secondary_cta_link.text})})})]}),w.sub_text&&(0,o.jsx)(s.az,{paddingY:2,children:(0,o.jsx)(s.KJ,{color:"light",size:a,children:w.sub_text})}),(w.dismiss_button_text||w.complete_button_text)&&(0,o.jsxs)(s.az,{alignItems:"center",display:"flex",justifyContent:j||"start",marginTop:C||2,children:[w.dismiss_button_text&&(0,o.jsx)(s.az,{column:6,marginEnd:1,children:(0,o.jsx)(s.$n,{color:"tertiary",fullWidth:p,onClick:()=>{f&&f(),T()},size:"md",text:w.dismiss_button_text})}),w.complete_button_text&&(0,o.jsx)(s.az,{column:w.dismiss_button_text?6:12,children:A?(0,o.jsx)(s.Rp,{fullHeight:!0,onTap:()=>{z(),x&&x()},rounding:200,children:(0,o.jsx)(s.az,{color:"default",dangerouslySetInlineStyle:{__style:{padding:"10px"}},display:"flex",justifyContent:"center",padding:2,rounding:200,children:(0,o.jsx)(s.KJ,{color:"light",weight:"bold",children:w.complete_button_text})})}):(0,o.jsxs)(s.so,{justifyContent:"center",children:[w.complete_button_cta_url&&(0,o.jsx)(s.vx,{color:"tertiary",fullWidth:p,href:w.complete_button_cta_url,onClick:({event:e})=>{e.preventDefault(),e.stopPropagation(),z(),x&&x()},size:"md",target:w.complete_button_cta_url?"blank":null,text:w.complete_button_text}),!w.complete_button_cta_url&&(0,o.jsx)(s.$n,{color:"tertiary",fullWidth:p,onClick:()=>{z(),x&&x()},size:"md",text:w.complete_button_text})]})})]})]})})}))})):(z(),null)}})}componentDidMount(){(0,i.A)("ExperienceTooltip","/app/packages/experiences/Experiences/ExperienceTooltip/ExperienceTooltip.tsx")}}d(p,"defaultProps",{fontSize:"300",positionRelativeToAnchor:!0});let u=new s.rk(669),h={1:"up",2:"right",3:"down",4:"left"},m=({anchors:e={},complete:t,dismiss:n,displayData:a,idealDirection:l,platform:c,touchToDismiss:d=!0,useMasonryFlyout:p=!1})=>{(0,r.useEffect)(()=>{(0,i.A)("Tooltip","/app/packages/experiences/Experiences/ExperienceTooltip/tooltip/Tooltip.tsx")},[]);let{anchors_by_platform:m,button_text:x,button_uri:f,display_type:g,flyout_direction:_,scroll_to_dismiss:y,scroll_to_dismiss_delay_in_seconds:b=0,text:v}=a||{},E=e[m[c]?.anchor],A=(0,r.useCallback)(()=>{y&&(window.removeEventListener("scroll",A),window.removeEventListener("touchmove",A)),d&&E&&E.removeEventListener("click",A),setTimeout(()=>n(),1e3*b)},[E]);if((0,r.useEffect)(()=>{E&&(y&&(window.addEventListener("scroll",A),window.addEventListener("touchmove",A)),d&&E.addEventListener("click",A))},[E]),!E)return null;let w=h[_],j=f&&(f.startsWith("https://")||f.startsWith("http://")),C=()=>{y&&(window.removeEventListener("scroll",A),window.removeEventListener("touchmove",A)),d&&E.removeEventListener("click",A),t()};return(0,o.jsx)(r.Fragment,{children:1===g&&(0,o.jsx)(({children:e})=>p?(0,o.jsx)(s.Wd,{zIndex:u,children:e}):(0,o.jsx)(s.az,{zIndex:u,children:e}),{children:(0,o.jsx)(s.fT,{anchor:E,idealDirection:w||l||"down",onDismiss:A,shouldFocus:!1,size:"sm",children:(0,o.jsxs)(s.az,{padding:4,width:"220px",children:[(0,o.jsx)(s.KJ,{align:"center",color:"light",weight:"bold",children:v}),x?(0,o.jsx)(s.az,{display:"flex",justifyContent:"center",marginTop:4,children:(0,o.jsx)(s.az,{column:8,children:f?(0,o.jsx)(s.vx,{color:"tertiary",fullWidth:!0,href:f,onClick:({dangerouslyDisableOnNavigation:e})=>{e(),C()},size:"md",target:j?"blank":null,text:x}):(0,o.jsx)(s.$n,{color:"tertiary",fullWidth:!0,onClick:C,size:"md",text:x})})}):null]})})})})};var x=n(92035),f=n(491149);let g=({anchors:e,idealDirection:t,onCompleteByAnchor:n,placementId:s,positionRelativeToAnchor:a,touchToDismiss:l,useMasonryFlyout:c})=>{(0,r.useEffect)(()=>{(0,i.A)("ExperienceTooltipAnchor","/app/packages/experiences/Experiences/ExperienceTooltip/ExperienceTooltipAnchor.tsx")},[]);let d=(0,f.M)();return(0,o.jsx)(x.Ay,{placementId:s,predicate:t=>{let{display_data:n}=t;if(n?.component_type===2){let{anchors_by_platform:t}=n;if(t?.web){let{anchor:n,placement:i}=t.web;return i===s&&n in e}}return!1},children:({complete:i,dismiss:r,experience:s})=>(0,o.jsx)(m,{anchors:e,complete:i,dismiss:r,displayData:s.display_data,idealDirection:t,onCompleteByAnchor:n,platform:d?"web_mobile":"web",positionRelativeToAnchor:a,touchToDismiss:l,useMasonryFlyout:c})})};class _ extends r.Component{constructor(...e){var t,n,i;super(...e),n={paused:!1},(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t="state","string"))?i:i+"")in this?Object.defineProperty(this,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):this[t]=n}componentDidMount(){(0,i.A)("ExperienceTooltipNoButtons","/app/packages/experiences/Experiences/ExperienceTooltip/ExperienceTooltipNoButtons.tsx"),this.props.onExperienceMount&&this.experience&&this.props.onExperienceMount(this.experience)}componentWillUnmount(){this.timer&&clearTimeout(this.timer)}renderFlyout(e){let{anchor:t,flyoutSize:n,idealDirection:i}=this.props;return(0,o.jsx)(s.fT,{anchor:t,idealDirection:i||"down",message:e,onDismiss:()=>{},size:n})}render(){let{experienceIds:e,placementId:t,shouldTimeoutDismiss:n}=this.props;return(0,o.jsx)(x.Ay,{eligibleIds:e,eligibleTypes:[8],placementId:t,children:({complete:e,dismiss:t,experience:i})=>{this.experience=i;let{display_data:r}=i;return r.has_tooltip?(n&&r.disappearTime&&r.disappearTime>0&&(this.timer=setTimeout(()=>(t(),null),r.disappearTime)),(0,o.jsx)(s.az,{"data-test-id":"experience-tooltip-no-buttons",zIndex:new s.rk(10),children:r.has_tooltip&&!this.state.paused&&this.renderFlyout(r.text)})):(e(),null)}})}}},92035(e,t,n){n.d(t,{Ay:()=>_});var i=n(335831),r=n(859471),s=n(106386),o=n(233944),a=n(731634),l=n(339589),c=n(303683),d=n(186151),p=n(686151),u=n(119795),h=n(562615);function m(e,t,n){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class x extends r.Component{constructor(...e){super(...e),m(this,"state",{hasCompleted:[],hasDismissed:[]}),m(this,"experienceEligibility",!1),m(this,"view",()=>{let{experience:e,isBackendExperience:t,targeting:n,viewExperience:i,viewExperienceObject:r,session:s}=this.props;e&&"viewed"!==e.status&&(s?.startSession(),t?(e.status="viewed",r(e)):n?i(e.placement_id,e.experience_id,n):i(e.placement_id,e.experience_id))}),m(this,"complete",e=>{let{completeExperience:t,completeExperienceObject:n,experience:i,isBackendExperience:r,preventRemoval:s,targeting:o}=this.props,a=e||1;if(i&&!this.state.hasCompleted.includes(i.experience_id)){let{placement_id:e,experience_id:l}=i||{},c=s||2===a;(1===a||c)&&e&&l&&(r?n(i,c):o?t(e,l,c,o):t(e,l,c),this.props.session?.endSession("complete"),this.setState(e=>({hasCompleted:[...e.hasCompleted,l]})))}}),m(this,"dismiss",()=>{let{dismissExperience:e,dismissExperienceObject:t,experience:n,isBackendExperience:i,preventRemoval:r,targeting:s}=this.props;if(!n)return;let{placement_id:o,experience_id:a}=n;n&&!this.state.hasDismissed.includes(a)&&(i?t(n):s?e(o,a,!!r,s):e(o,a,!!r),this.props.session?.endSession("dismiss"),this.setState(e=>({hasDismissed:[...e.hasDismissed,a]})))}),m(this,"isEligibleExperience",e=>{if(!e)return!1;let{eligibleIds:t,eligibleTypes:n,predicate:i,eligibleSchemas:r}=this.props,{experience_id:s,type:o,display_data:a}=e;return 1!==s&&(t&&t.length?t.includes(s):n&&n.length?!!n.includes(o)&&(!r||!r.length||r.includes(a?.sub_schema_type)):!i||i(e))})}setEligibility(){let{experience:e}=this.props,t=this.isEligibleExperience(e);this.experienceEligibility!==t&&(this.experienceEligibility=t)}componentDidMount(){if((0,i.A)("Experience","/app/packages/experiences/Framework/Experience.tsx"),this.props.disableAutoView)return;let{experience:e}=this.props;e&&this.isEligibleExperience(e)&&this.view(),this.setEligibility()}componentDidUpdate(e){if(this.props.disableAutoView)return;let t=e.experience,n=this.props.experience,i=this.isEligibleExperience(n);if(!n||!i)return void this.setEligibility();let r=t?.experience_id!==n.experience_id,s=i&&!this.experienceEligibility;(!t||r||s)&&(this.setEligibility(),this.view())}render(){let{children:e,experience:t,disableAutoView:n}=this.props;return t&&this.isEligibleExperience(t)?"function"==typeof e?e({experience:t,complete:this.complete,dismiss:this.dismiss,...n?{view:this.view}:Object.freeze({}),sessionSetObserverRef:this.props.session?.setObserverRef}):r.Children.only(e):null}}function f(e){(0,r.useEffect)(()=>{(0,i.A)("Experience","/app/packages/experiences/Framework/Experience.tsx")},[]);let t=(0,p.E3)(),n=(0,s.d4)(({experiences:t})=>e.experience||(e.placementId?t[e.placementId]:void 0));(0,u.A)(()=>{t?.checkUsePlacementCalls(e.placementId,n?.experience_id)});let a=(0,s.wA)(),d=(0,l.Hy)(),m=(0,l._4)(),f=(0,l.Dz)(),g=(0,o.A)(),_=(0,c.NM)();return(0,h.jsx)(x,{...e,completeExperience:(e,t,n,i)=>a(d(e,t,n,!1,{},i)),completeExperienceObject:(e,t)=>a((0,l.Pl)(g)(e,t)),dismissExperience:(e,t,n,i)=>a(m(e,t,n,!1,void 0,i)),dismissExperienceObject:e=>a((0,l.sj)(e)),experience:n,session:_,viewExperience:(e,t,n)=>a(f(e,t,!1,!1,void 0,n)),viewExperienceObject:e=>a((0,l.fE)(g)(e))})}function g({enableExperienceSession:e=!1,customExperienceSession:t=!1,...n}){let i=(0,s.d4)(({experiences:e})=>n.experience||(n.placementId?e[n.placementId]:void 0)),r=e;r&&t&&(r=!!i&&d.r.includes(i.experience_id));let o=i&&i.experience_id,a=i?i.placement_id:n.placementId,l=i&&i.id;return(0,h.jsx)(c.AU,{enable:r,endOnSurfaceChange:n.sessionEndOnSurfaceChange,experienceId:o,id:l,placementId:a,children:(0,h.jsx)(f,{...n,experience:i})})}function _(e){return(0,r.useEffect)(()=>{(0,i.A)("Experience","/app/packages/experiences/Framework/Experience.tsx")},[]),(0,h.jsx)(a.A,{name:"ExperienceComponent",children:(0,h.jsx)(g,{...e})})}m(x,"defaultProps",{eligibleIds:[],eligibleTypes:[],eligibleSchemas:[]})},186151(e,t,n){n.d(t,{K:()=>i,r:()=>r});let i=[{placementId:11,endOnSurfaceChange:!0},{placementId:40001,endOnSurfaceChange:!0},{placementId:29,endOnSurfaceChange:!0},{placementId:12,endOnSurfaceChange:!0},{placementId:1000088,endOnSurfaceChange:!0},{placementId:1000468,endOnSurfaceChange:!0},{placementId:1000168,endOnSurfaceChange:!0},{placementId:1000235,endOnSurfaceChange:!0},{placementId:1000264,endOnSurfaceChange:!0}],r=[506124,506436,504943,505226,505111,505801,507575,502535,500331,506046,506879,507502,505933,506791,502669,506234,505047,505471,506234,505974,505201,502407,505541,506473,506921,502157,502004,506469,506930,508312,508591]},440188(e,t,n){n.d(t,{IO:()=>y,Ip:()=>d,PJ:()=>m,QR:()=>p,WQ:()=>c,if:()=>f,j6:()=>g,lP:()=>v,nA:()=>u,oe:()=>h,uG:()=>_,wj:()=>x});var i=n(942650),r=n(328458),s=n(917651),o=n(892804);class a{constructor({name:e,placedExperienceId:t,message:n}){this.name=e,this.placedExperienceId=t,this.message=n}log(){s.$1.warn(`[ExperienceSessions] - Warning: ${this.name} for experience ${this.placedExperienceId} - ${this.message}`,{placedExperienceId:this.placedExperienceId})}}class l extends Error{constructor({name:e,placedExperienceId:t,customMessage:n}){super(n),this.name=e,this.placedExperienceId=t,Object.setPrototypeOf(this,l.prototype)}}class c extends l{constructor({placedExperienceId:e,customMessage:t}){let n=`Error occurred while creating an IntersectionObserver for experience with id ${e}.`;super({customMessage:t??n,name:"IntersectionObserver",placedExperienceId:e})}}class d extends l{constructor({placedExperienceId:e,customMessage:t}){let n=`Attempted to create a timestamp without an observer for experience with id ${e}.`;super({customMessage:t??n,name:"TimeStampNoObserver",placedExperienceId:e})}}class p extends l{constructor({placedExperienceId:e,customMessage:t,currentState:n,newState:i}){let s=`Invalid time stamp state transition: ${(0,r.H)(n,i)}.
Dropping time stamp.`;super({customMessage:t??s,name:"InvalidStateTransition",placedExperienceId:e}),(0,o.GV)("experience_sessions_invalid_state_transition",{sampleRate:1,tags:{placedExperienceId:e,transition:(0,r.H)(n,i)}})}}class u extends l{constructor({placedExperienceId:e,customMessage:t}){let n=`Attempted to remove an experience with id ${e} from an empty session map.`;super({customMessage:t??n,name:"RemoveOnEmptySessionMap",placedExperienceId:e})}}class h extends l{constructor({placedExperienceId:e,customMessage:t}){let n=`Attempted to remove a non-existent experience with id ${e}.`;super({customMessage:t??n,name:"RemoveOnMissingExperience",placedExperienceId:e})}}class m extends l{constructor(e,t,n,i){let r=[{value:e,name:"Placed Experience ID"},{value:t,name:"Experience ID"},{value:n,name:"Placement ID"}].filter(e=>!e.value).map(e=>e.name);super({customMessage:r.length>0?`${r.join(" and ")} ${r.length>1?"are":"is"} required for this operation.`:i??"",name:"InvalidIdError",placedExperienceId:e||""})}}class x extends l{constructor({placedExperienceId:e,customMessage:t}){let n=`No start state found in the timeline for experience with id ${e}.`;super({customMessage:t??n,name:"NoStart",placedExperienceId:e})}}class f extends l{constructor({placedExperienceId:e,customMessage:t}){let n=`Total duration calculated is negative for experience with id ${e}.`;super({customMessage:t??n,name:"NegativeTotal",placedExperienceId:e})}}class g extends l{constructor({placedExperienceId:e,customMessage:t}){let n=`Timeline ended without an end state for experience with id ${e}.`;super({customMessage:t??n,name:"NoEnd",placedExperienceId:e})}}class _ extends l{constructor({placedExperienceId:e,customMessage:t}){let n=`Total duration calculated is not a valid number for experience with id ${e}.`;super({customMessage:t??n,name:"InvalidTotal",placedExperienceId:e})}}class y extends a{constructor({placedExperienceId:e,customMessage:t}){let n=`Attempted to resume without a pause timestamp for experience with id ${e}. Was the session started before app focus?`;super({message:t??n,name:"TimeStampNoPause",placedExperienceId:e})}}let b=[u,h,m,x,f,g,_];function v(e,t,n,r,o){return(...a)=>{try{return e(...a)}catch(e){if(e instanceof Error){let n=(b.some(t=>e instanceof t)?e.placedExperienceId:r)||"0:unknown";s.$1.error(`[Experience Session] - ${t} - ${e.name}:${e.message}`);let[o,a]=n.split(":");(0,i.p)(t,e.name,a||"0",Number(o))}else{let n=String(e);s.$1.error(`[Experience Session] - ${t} - Error: ${n}`),(0,i.V)(e,t)}return o&&o(),n}}}},54905(e,t,n){n.d(t,{A:()=>s,l:()=>i});let{Provider:i,get:r}=(0,n(767216).A)("ExperienceSessionContext"),s=r},380961(e,t,n){n.d(t,{A:()=>r});var i=n(186151);function r(e){let t=e=>{let t=i.K.find(t=>t.placementId===e);return{enableExperienceSession:!!t,endOnSurfaceChange:!!t?.endOnSurfaceChange}};return e?{...t(e),isSessionEnabledPlacement:t}:{enableExperienceSession:void 0,endOnSurfaceChange:void 0,isSessionEnabledPlacement:t}}},303683(e,t,n){n.d(t,{AU:()=>E,wQ:()=>A.A,OP:()=>x,NM:()=>v.A});var i=n(859471),r=n(106386),s=n(979638),o=n(339589),a=n(440188);let{Provider:l,get:c,getMaybe:d}=(0,n(767216).A)("ExperienceSessionManagerContext");var p=n(812452),u=n(917651),h=n(119795),m=n(562615);function x({children:e}){let t=(0,i.useRef)({}),n=(0,s.zy)(),c=(0,r.wA)(),d=(0,o.My)(),x=()=>0===Object.values(t.current).length||0===Object.keys(t.current).length,f=e=>{if(e)return t.current[e]},g=(0,i.useCallback)(e=>{let n=e.getId();return t.current[n]=e,u.$1.log(`[Experience Sessions] - Added experience with id ${n} to experiences in session map.
View ExperienceInSession object added: `,t.current[n]),t.current[n]},[]),_=(0,i.useCallback)((e,n="unknown")=>{(0,a.lP)(()=>{if(0===Object.values(t.current).length)throw new a.nA({placedExperienceId:e});if(!t.current[e])throw new a.oe({placedExperienceId:e});t.current[e].addTimeStamp(n,!1,"end"),t.current[e].disconnect(),u.$1.log(`[Experience Session] - Ended experience with id ${e} to experiences in session map with reason '${n}'.
View time stamps for experience: `,t.current[e].getTimeline(),`
Full experience in session object: `,t.current[e]),(0,p.A)({placedExperienceId:e,experienceId:t.current[e].getExperienceId(),placementId:t.current[e].getPlacementId(),timeline:t.current[e].getTimelineDeepCopy(),endReason:n}),c(d(t.current[e].getPlacementId(),t.current[e].getExperienceId())),delete t.current[e]},"removeExperience",void 0,e)()},[d,c]),y=e=>{x()||Object.values(t.current).forEach(e=>{(0,a.lP)(()=>{e.hasInitiated()&&_(e.id,"page-unload")},"endOnPageLeave",void 0,e.id)()})},b=(0,i.useCallback)(()=>{x()||Object.values(t.current).forEach(e=>{(0,a.lP)(()=>{e.getLocation()!==n.pathname&&e.getEndOnSurfaceChange()&&e.hasInitiated()&&_(e.getId(),"surface-exit")},"endOnSurfaceChange",void 0,e.getId())()})},[n,_]),v=()=>{x()||document.activeElement&&"IFRAME"===document.activeElement.tagName&&(u.$1.warn("[Experience Session] - Ignoring pauseOnPageBlur event in iframe"),1)||Object.values(t.current).forEach(e=>{(0,a.lP)(()=>{e.hasInitiated()&&(e.addTimeStamp("blur",!1,"paused"),u.$1.log(`[Experience Session] - Pausing experience ${e.getId()} session.`))},"pauseOnPageBlur",void 0,e.getId())()})},E=()=>{x()||Object.values(t.current).forEach(e=>{(0,a.lP)(()=>{if(e.hasInitiated())if(e.getTimeline().length<2)new a.IO({placedExperienceId:e.id}).log(),e.restart();else{let t=e.getStateToResumeTo();e.addTimeStamp("focus",t,"resumed"),u.$1.log(`[Experience Session] - Resuming experience ${e.getId()} session from paused state with inView status: ${t}.`)}},"resumeOnPageFocus",void 0,e.getId())()})};(0,i.useEffect)(()=>{b()},[n,b]),(0,h.A)(()=>(u.$1.log("[Experience Sessions] - âœ¨ Debug enabled!"),window.addEventListener("beforeunload",y),window.addEventListener("blur",v),window.addEventListener("focus",E),()=>{window.removeEventListener("beforeunload",y),window.removeEventListener("blur",v),window.removeEventListener("focus",E)}));let A=(0,i.useMemo)(()=>({experiencesInSession:t.current,getExperience:f,addExperience:g,removeExperience:_}),[t,g,_]);return(0,m.jsx)(l,{value:A,children:e})}var f=n(335831),g=n(328458);function _(e,t,n){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let y={start:["active","paused","end"],active:["active","end","paused"],paused:["resumed","paused","end"],resumed:["active","end","paused"],end:[],unknown:["start"]};class b{constructor(e,t,n,i,r,s=null,o=[],l=null){_(this,"inView",!1),_(this,"state","unknown"),_(this,"lastInitiator",null),_(this,"endReason",null),_(this,"intersectionTrigger",([e])=>{let t=this.inView;(0,a.lP)(()=>{e?.isIntersecting?this.inView=!0:this.inView=!1,this.addTimeStamp("IntersectionObserver",this.inView,0===this.timeline.length?"start":"active"),u.$1.log(`[Experience Sessions] - ${this.inView?"ðŸ‘ï¸ In View":"âŒ Out of View"}`)},"IntersectionObserver",void 0,this.id,()=>{this.inView=t})()}),_(this,"handleTransitionEdgeCases",(e,t,n,i)=>{let r=(0,g.H)(e,t);return"paused->active"===r&&"IntersectionObserver"===n&&(this.addTimeStamp("IntersectionObserver",i,"paused",0),u.$1.warn(`[Experience Sessions] - âš ï¸ ${r} transition detected with initiator ${n}. Switching to 'paused' state instead.`),!0)}),this.id=e,this.experienceId=t,this.placementId=n,this.location=i,this.endOnSurfaceChange=r,this.observer=s,this.timeline=o,this.elementNode=l,l&&this.initiateObserver(l)}restart(){(0,a.lP)(()=>{this.timeline=[],u.$1.log("[Experience Sessions] - Restarting timeline for experience ",this.id)},"restart",void 0,this.id)}disconnect(){(0,a.lP)(()=>{if(!this.observer)throw new a.WQ({placedExperienceId:this.id,customMessage:"disconnect() - Attempted to disconnect observer, but it has not been initiated yet."});this.observer.disconnect(),this.observer=null},"ExperienceInSession.disconnect",void 0,this.id)()}initiateObserver(e){if(e&&!this.observer)this.observer=new IntersectionObserver(this.intersectionTrigger,{root:null,rootMargin:"0px",threshold:.1}),this.elementNode=e,this.observer.observe(e);else{if(e?.isEqualNode(this.elementNode)){this.observer?.observe(e),this.elementNode=e,u.$1.log(`[Experience Sessions] - Resuming experience ${this.id}.`,e);return}u.$1.warn("[Experience Sessions] - Attempted to initiate observer with a null node or an existing observer. Node:",e)}}hasInitiated(){return null!==this.observer&&null!==this.elementNode&&"unknown"!==this.state}addTimeStamp(e,t,n="unknown",i){if(!this.hasInitiated()&&"start"!==n)throw new a.Ip({placedExperienceId:this.id});let r=this.getLastTimeStamp()?.state||"unknown";if(!y[r].includes(n)){if(this.handleTransitionEdgeCases(r,n,e,t))return!0;throw new a.QR({placedExperienceId:this.id,currentState:r,newState:n})}return this.timeline.push({time:i||(0,u.JY)(),initiator:e,inView:t,state:n}),this.state=n,this.inView=t,this.lastInitiator=e,"end"===n&&"blur"!==e&&"focus"!==e&&"IntersectionObserver"!==e&&"restart"!==e&&(this.endReason=e),!0}setEndReason(e){this.endReason=e}isInView(){return this.inView}getSessionState(){return this.timeline?.[this.timeline.length-1]?.state??"unknown"}getLastTimeStamp(){return this.timeline.length>0?this.timeline[this.timeline.length-1]:void 0}getTimeStampBeforePause(){for(let e=this.timeline.length-1;e>=0;e-=1){let t=this.timeline[e];if(!t||"active"===t.state||"resumed"===t.state)break;if("paused"===t.state)if(e-1>=0)return this.timeline[e-1];else break}}getStateToResumeTo(){let e=this.getLastTimeStamp();if(e&&"paused"===e.state&&"IntersectionObserver"===e.initiator)return e.inView;let t=this.getTimeStampBeforePause();return void 0===t&&new a.IO({placedExperienceId:this.id}).log(),t?.inView??!1}getState(){return{inView:this.inView,state:this.state,lastInitiator:this.lastInitiator,endReason:this.endReason}}getTimelineDeepCopy(){return this.timeline.map(e=>({...e}))}getId(){return this.id}getExperienceId(){return this.experienceId}getPlacementId(){return this.placementId}getLocation(){return this.location}getEndOnSurfaceChange(){return this.endOnSurfaceChange}getElementNode(){return this.elementNode}getObserver(){return this.observer}getTimeline(){return this.timeline}getLength(){return this.timeline.length}}var v=n(54905);function E({children:e,id:t,experienceId:n,placementId:r,enable:o=!0,endOnSurfaceChange:l=!0}){(0,i.useEffect)(()=>{(0,f.A)("SessionWrapper","/app/packages/experiences/Framework/Sessions/Components/SessionWrapper.tsx")},[]);let c=d(),p=!o||!c,{getExperience:u,addExperience:h,removeExperience:x}=c||{getExperience:()=>void 0,addExperience:()=>void 0,removeExperience:()=>void 0},g=(0,i.useRef)(u(t)??null),_=(0,i.useRef)(null),y=(0,s.zy)(),E=(0,i.useCallback)(()=>{(0,a.lP)(()=>{if(!p){if(!t||!n||!r)throw new a.PJ(t,n,r);g.current||(g.current=new b(t,n,r,y.pathname,l,null,void 0,_.current),h(g.current))}},"startSession",void 0,t)()},[t,n,r,g,h,p,y,l]),A=(0,i.useCallback)(e=>{(0,a.lP)(()=>{if(!p){if(!t||!n||!r)throw new a.PJ(t,n,r);g.current?.hasInitiated()&&x(t,e)}},"endView",void 0,t)()},[t,n,r,g,x,p]),w=(0,i.useCallback)(e=>{(0,a.lP)(()=>{p||(g.current?g.current.initiateObserver(e):_.current=e)},"setObserverRef",void 0,t)()},[g,p,t]),j=(0,i.useMemo)(()=>({startSession:E,endSession:A,experienceInView:g.current,setObserverRef:w}),[E,A,g,w]);return(0,m.jsx)(v.l,{value:j,children:e})}var A=n(380961);n(942650)},942650(e,t,n){n.d(t,{V:()=>s,p:()=>r});var i=n(892804);let r=async(e,t,n,r)=>{(0,i.GV)("experience_framework.view_duration.error",{sampleRate:1,tags:{func:e,type:t,experience_id:n,placement_id:r}})},s=async(e,t)=>{let n=e instanceof Error?e.message:String(e);(0,i.GV)("experience_framework.view_duration.unknown_error",{sampleRate:1,tags:{function:t,error:n}})}},812452(e,t,n){n.d(t,{A:()=>o});var i=n(440188),r=n(917651),s=n(892804);let o=e=>{let{placedExperienceId:t,experienceId:n,placementId:o,endReason:a,timeline:l}=e;(0,i.lP)(()=>{let e=function(e,t){let n,r=t.findIndex(e=>"start"===e.state);if(-1===r)throw new i.wj({placedExperienceId:e});let s=e=>{if(void 0===n)return n=e.inView,!1;let t=n===e.inView;return n=e.inView,t},o=!0,a=0;for(let e of t.slice(r)){let t=e.inView?-e.time:e.time;if("end"===e.state){s(e)||(a+=t),o=!1;break}"resumed"===e.state&&(o=!0),o&&(s(e)||(a+=t),"paused"===e.state&&(o=!1))}if(o)throw new i.j6({placedExperienceId:e});if(a<0)throw new i.if({placedExperienceId:e});if("number"!=typeof a||Number.isNaN(a))throw new i.uG({placedExperienceId:e});return a}(t,l);r.$1.log(`[Experience Sessions] âœ¨ Total duration for experience ${t} is ${e}ms - Sending to statsboard with end reason: ${a}`),(0,s.N9)("experience_framework.view_duration",e,{sampleRate:.2,tags:{placement_id:o,experience_id:n,end_reason:a}})},"calculateTotalDuration",void 0,t,()=>{r.$1.error(`[Experience Sessions] âŒ Error calculating total duration for experience ${t} due to previous error`)})()}},328458(e,t,n){n.d(t,{H:()=>i});let i=(e,t)=>`${e}->${t}`},93048(e,t,n){n.d(t,{Hi:()=>o,al:()=>s,pv:()=>r});let i="experience_framework.frontend",r=i+"experience.not_rendered",s=i+".placement.remount",o=i+".placement.used_without_mount"},783637(e,t,n){n.d(t,{r:()=>_,J:()=>i.Ay});var i=n(92035),r=n(859471),s=n(106386),o=n(650083),a=n(339589),l=n(19873),c=n(93048),d=n(303683),p=n(686151),u=n(979638),h=n(917651),m=n(892804),x=n(815944),f=n(491149),g=n(562615);function _({children:e}){let t,n,{isSessionEnabledPlacement:i}=(0,d.wQ)(),_=(0,f.Ay)(),y=(0,r.useMemo)(()=>({device:_,platform:(0,f.bh)(_)?5:6}),[_]),b=(0,r.useRef)({}),v=(0,r.useCallback)((e,t)=>{e&&!b.current[e]&&(0,m.GV)(c.Hi,{sampleRate:.1,tags:{...y,placementId:e,experienceId:t||"none"}})},[b,y]),E=(0,r.useCallback)((e,t)=>{b.current[e]=t},[b]),[A,w]=(0,r.useReducer)((e,t)=>{let n=t.payload;if("MOUNT_PLACEMENT"===t.type)return e.mountedPlacements[n]&&(0,m.GV)(c.al,{sampleRate:.1,tags:{...y,placementId:n}}),{...e,mountedPlacements:{...e.mountedPlacements,[n]:!0}};if("UNMOUNT_PLACEMENT"===t.type){let t={...e};return delete t.mountedPlacements[n],delete t.registeredAfterActionPlacements[n],t}return"REGISTER_AFTER_ACTION_PLACEMENT"===t.type?{...e,registeredAfterActionPlacements:{...e.registeredAfterActionPlacements,[n]:!0}}:e},{mountedPlacements:{},registeredAfterActionPlacements:{}}),{mountedPlacements:j,registeredAfterActionPlacements:C}=A,k=(0,s.wA)(),S=(0,s.d4)(e=>e.experiences),P=(0,a.Hy)(),T=(0,a._4)(),I=(0,a.Dz)(),{checkSurfaceForRefresh:z}=(t=(0,u.zy)(),n=(0,s.d4)(e=>e.experiences),{checkSurfaceForRefresh:(e,i,r={})=>{let{dontRefreshSSRPlacements:s=!1,experimentType:o,checkIfMounted:a=!0}=r,l=(0,h.C3)(t);l&&l.placements.forEach(t=>{((e,t,i,r,s=!0,o,a)=>{let{shouldRefresh:l,refreshReasoning:c}=(0,h.Pf)(i,t,o,n[i],r,s);l||(e[i]=n[i]),a&&(0,m.GV)(`${a}.${l?"refreshed":"not_refreshed"}`,{tags:{placementId:i,refreshReasoning:c}})})(e,i,t,s,a,l,o)})}}),M=async(e,t,n=!1)=>{try{let{resource_response:i}=await (0,a.Y4)(e,t),{data:r}=i||{};r&&(z(r,A,{dontRefreshSSRPlacements:n,experimentType:"experience_framework_home_feed_init_fetch"}),k((0,x.vv)(r)))}catch(e){(0,m.GV)("experience_framework_home_feed_init_fetch.error",{tags:{...y,type:e instanceof Error?e.name:"unknown"}})}},D=(e,t,n)=>{let{isExperienceInitFetch:i,dontRefreshSSRPlacements:r}=n||{};i?M(e,t,r):k((0,l.$O)(e,t))},O=(0,r.useMemo)(()=>({...(0,o.bindActionCreators)({completeExperience:P,dismissExperience:T,fetchAllExperiencesMulti:a.EZ,fetchExperienceForPlacements:a.xL,mountPlacement:a.hG,triggerExperimentsForPlacement:a.vI,viewExperience:I},k),fetchAllExperiences:D,mountPlacement:(e,t,n,r)=>{let{enableExperienceSession:s}=i(e);k((0,a.hG)(e,t,n,r||s)),w({type:"MOUNT_PLACEMENT",payload:e})},unmountPlacement:e=>{w({type:"UNMOUNT_PLACEMENT",payload:e})},registerAfterActionPlacement:e=>{w({type:"REGISTER_AFTER_ACTION_PLACEMENT",payload:e})},checkUsePlacementCalls:v,setUsePlacementCalls:E}),[P,T,k,w,I]),L=(0,r.useMemo)(()=>({experiences:S,mountedPlacements:j,registeredAfterActionPlacements:C,...O}),[S,j,C,O]);return(0,g.jsx)(p._z,{value:L,children:e})}},19873(e,t,n){let i;n.d(t,{$O:()=>m,Dz:()=>y,EZ:()=>x,Hy:()=>v,My:()=>b,Y4:()=>h,_4:()=>E,hG:()=>j,sE:()=>w,vI:()=>f,xL:()=>g,xn:()=>A});var r=n(859471),s=n(321571),o=n(233944),a=n(815944),l=n(917651),c=n(653942),d=n(10562),p=n(892804);let u=(e,t,n={},i=1)=>(0,p.GV)(`${e}.${t}`,{sampleRate:i,tags:n}),h=(e,t)=>s.A.create("UserExperiencePlatformResource",t?{extra_context:e,targeting:t}:{extra_context:e}).callGet(),m=(e,t)=>n=>s.A.create("UserExperiencePlatformResource",t?{extra_context:e,targeting:t}:{extra_context:e}).callGet().then(e=>e.resource_response?n((0,a.vv)(e.resource_response.data)):void 0),x=e=>t=>s.A.create("UserExperiencePlatformResource",{extra_context:e,multiExperiencePlatform:!0}).callGet().then(e=>e.resource_response?t((0,a.iN)(e.resource_response.data)):void 0),f=(e,t)=>(n,i)=>{let{experiences:r}=i(),s=r[e];return s&&s.triggerable_placed_exps&&s.triggerable_placed_exps.length&&s.triggerable_placed_exps.forEach(n=>{let[,i]=n.split(":"),r=t,o=s?.metadata?.[i];o&&(r={...t,..."object"==typeof o?o:{}}),(0,c.A)({url:`/v3/experiences/${n.replace(":","%3A")}/trigger/`,method:"PUT",data:r?{extra_context:JSON.stringify(r,null,1)}:{}}).then(()=>{u("experienceservice","experimentTriggerCall.1",{placement_id:e,experience_id:i})})}),Promise.resolve()},g=(e,t,n,r,o)=>(c,h)=>{let m=(0,d.y)()?.experimentsClient;if(u("experience_framework.fetch_experiences_for_placements","called",{placement_ids:e.join(","),has_extra_context:!!n},.01),t)return Promise.resolve();if(r&&(i=r),1===e.length){let t=e[0],i=h().experiences[t];if(JSON.stringify(i?.extraContext||null)===JSON.stringify(n)||(0,l.lC)(i)&&!(n&&Object.keys(n).length>0))return Promise.resolve()}return s.A.create("UserExperienceResource",{placement_ids:e,extra_context:n||null,targeting:r}).callGet().then(t=>{if(!t.resource_response)return;let i=t.resource_response.data||{};if(o){let{experiences:t}=h();l.$1.log("[MVC] Post Checks - Checking existing experiences in store"),e.forEach(e=>{let n=t[e];if(n&&0!==n.experience_id){var r;r=i[e],(0,p.GV)("experience_framework.fetch.post_check.failures",{sampleRate:.01,tags:{placement_id:e,experience_in_store:n.experience_id,experience_from_server:r?.experience_id}}),i[e]=n}})}m?.checkExperiment("experience_framework_web_custom_fetch_trigger_experiments").anyEnabled&&e.forEach(e=>{c(f(e,n))}),c((0,a.YT)(i))})},_=(e,t,n,r)=>(o,l,c,d=!1,p,u)=>(h,x)=>{let{experiences:f,experiencesMulti:g}=x(),_=null,y=!0;if(d||(_=(y=!!f[o]&&f[o].experience_id===l)?f[o]:Array.isArray(g[o])&&g[o]?.find(e=>e.experience_id===l)),_&&_.experience_id===l||d&&o&&l){let d=s.A.create(e,{placed_experience_id:`${o}%3A${l}`,extra_context:p??{},targeting:u}),x=y?a.Uh:a.$d;switch(t){case"dismissed":return d.callDelete().then(()=>{h(x(o,l,t)),h(m(void 0,i)),n&&r&&n({event_type:r,object_id_str:l.toString()})});case"completed":return d.callUpdate().then(()=>{!c&&(h(x(o,l,t)),h(m(void 0,i)),n&&r&&n({event_type:r,object_id_str:l.toString()}))});case"viewed":return h(x(o,l,t)),d.callUpdate().then(()=>{1000162===o&&h(m()),n&&r&&n({event_type:r,object_id_str:l.toString()})});case"completedWithoutHomefeed":return d.callUpdate().then(()=>{c||h(x(o,l,t)),n&&r&&n({event_type:r,object_id_str:l.toString()})})}}return Promise.resolve()},y=()=>{let e=(0,o.A)();return(0,r.useCallback)(_("UserExperienceViewedResource","viewed",e,4503),[e])},b=()=>{let e=(0,o.A)();return(0,r.useCallback)((t,n,i,r=!1,s,o)=>(i,s)=>{let{experiences:o,experiencesMulti:c}=s(),d=null,u=!0;if(r||(d=(u=!!o[t]&&o[t].experience_id===n)?o[t]:Array.isArray(c[t])&&c[t]?.find(e=>e.experience_id===n)),d&&d.experience_id===n||r&&t&&n){let r=u?a.Uh:a.$d;l.$1.log(`[MVC] View-End - Removing experience ${t}:${n} from store.`),(0,p.GV)("experience_framework.view_end",{tags:{placement_id:t,experience_id:n}}),i(r(t,n,"view-end")),e&&e({event_type:4503,object_id_str:n.toString()})}return Promise.resolve()},[e])},v=()=>{let e=(0,o.A)();return(0,r.useCallback)(_("UserExperienceCompletedResource","completed",e,6567),[e])},E=()=>{let e=(0,o.A)();return(0,r.useCallback)(_("UserExperienceResource","dismissed",e,6568),[e])},A=()=>{let e=(0,o.A)();return(0,r.useCallback)(_("UserExperienceCompletedResource","completedWithoutHomefeed",e,6567),[e])},w=e=>(t,n)=>{t(f(e));let{experiences:i}=n();return i[e]},j=(e,t,n,r)=>s=>{n&&(i=n),s(f(e,t)),t&&Object.keys(t).length>0&&s(g([e],!1,t,n,r))}},339589(e,t,n){n.d(t,{vI:()=>i.vI,Pl:()=>o,hG:()=>i.hG,xn:()=>i.xn,My:()=>i.My,EZ:()=>i.EZ,Dz:()=>i.Dz,Hy:()=>i.Hy,fE:()=>l,Y4:()=>i.Y4,xL:()=>i.xL,_4:()=>i._4,sE:()=>i.sE,sj:()=>a});var i=n(19873),r=n(321571);let s=(e,t,n,s)=>(o,a)=>l=>{if(o&&o.id){let c=r.A.create(e,{placed_experience_id:o.id,extra_context:{}});switch(t){case"dismissed":c.callDelete().then(()=>{l((0,i.$O)()),n&&s&&n({event_type:s,object_id_str:o.id.toString()})});break;case"completed":c.callUpdate().then(()=>{a||l((0,i.$O)()),n&&s&&n({event_type:s,object_id_str:o.id.toString()})});break;case"viewed":c.callUpdate().then(()=>{n&&s&&n({event_type:s,object_id_str:o.id.toString()})})}}},o=e=>s("UserExperienceCompletedResource","completed",e,6567),a=s("UserExperienceResource","dismissed"),l=e=>s("UserExperienceViewedResource","viewed",e,4503);n(942650),n(812452)},757507(e,t,n){n.d(t,{A:()=>c});var i=n(335831),r=n(859471),s=n(836737),o=n(183994),a=n(491149),l=n(562615);let c=({data:e,buttonType:t,experienceType:n,experienceSchema:c})=>{(0,r.useEffect)(()=>{(0,i.A)("ActionButton","/app/packages/experiences/gestalt/ActionButton.tsx")},[]);let{accessibilityLabel:d,disabled:p,label:u}=e,h=(0,a.qJ)(),{size:m,color:x,fullWidth:f}=(0,o.l)({buttonType:t,isDesktop:h,experienceType:n,experienceSchema:c});return(0,l.jsx)(s.az,{paddingX:1,width:f?"100%":void 0,children:"link"===e.role?(0,l.jsx)(s.vx,{accessibilityLabel:d,color:x,disabled:p,fullWidth:f,href:e.href,onClick:e.onClick,rel:e.rel,size:m,target:e.target,text:u}):(0,l.jsx)(s.$n,{accessibilityLabel:d,color:x,disabled:p,fullWidth:f,onClick:e.onClick,size:m,text:u})})}},183994(e,t,n){n.d(t,{l:()=>o,q:()=>a});var i=n(428743);let r={27:{primary:{color:"secondary"},secondary:{color:"transparent"}},28:{primary:{color:"primary"},secondary:{color:"transparent"}}},s={2:{primary:{color:"primary",size:"lg",fullWidth:!0},secondary:{color:"secondary",size:"lg",fullWidth:!0}}},o=({buttonType:e,experienceType:t,experienceSchema:n,isDesktop:i=!0})=>{let o={};switch(t&&(o=r[t]?.[e]||{}),n&&(o=s[n]?.[e]||{}),t){case 27:o.size=i?"sm":"md";break;case 28:o.size=i?"md":"sm"}return o},a=(e,t,n)=>e&&e.url?{label:e.text,accessibilityLabel:n||e.text,href:e.url,role:"link",rel:(0,i.A)({url:e.url})?"nofollow":"none",onClick:t}:{label:e.text,accessibilityLabel:n||e.text,onClick:t}},295658(e,t,n){n.d(t,{A:()=>r});let i={1:"default",2:"subtle",3:"subtle",4:"inverse",5:"info",6:"success",7:"warning",8:"error",9:"recommendation",10:"primary",11:"light",12:"dark"},r=(e,t="default")=>i[e]||t},49041(e,t,n){n.d(t,{W:()=>r});let i={2:"pinterest",1:"sparkle",5:"plus",7:"pin-angled",4:"magnifying-glass-frame",3:"magnifying-glass",6:"speech-ellipsis",8:"instagram",9:"camera",10:"image",11:"board",12:"layout",13:"hand-pointing",14:"share",15:"download",16:"shopping-bag",17:"check",18:"circle-exclamation-point",19:"bell",20:"person",21:"flag",22:"lightbulb",23:"home",24:"speech-heart",25:"speech",26:"heart",27:"face-smiley-outline",28:"face-smiley-sparkle",29:"star",30:"ads-stats",31:"filter-horizontal",32:"heart-fill",33:"gift",34:"crystal-ball",35:"bookmark-fill",36:"magnifying-glass-sparkle",37:"performance-plus",38:"amazon",39:"tag",40:"tag-star",41:"scissors",43:"collage"},r=e=>i[e]},642769(e,t,n){n.d(t,{WJ:()=>s.Ay,Rf:()=>p.A,Yd:()=>b,Ts:()=>c,Du:()=>d.A});var i=n(859471),r=n(979638),s=n(686151),o=n(107639),a=n(218781),l=n(491149);let c=()=>{let{mountPlacement:e,registeredAfterActionPlacements:t}=(0,s.Ay)(),n=(0,l.qJ)(),c=(0,r.zy)();return(0,i.useCallback)((i,r,s)=>{let l;switch(i){case"Save":var d;l=r?.isRepinTakeover?1000578:(d=c,((0,o._u)(d)&&d.state&&"from"in d.state&&d.state.from&&(d=d.state.from),(0,o.rz)(d))?n?1000503:1000558:(0,o._p)(d)?n?1000506:1000559:(0,o.dM)(d)?n?1000141:1000494:(0,o.iK)(d)&&n?1000647:void 0);break;case"Download":(0,o.dM)(c)&&(l=n?1000499:1000500);break;case"Clickthrough":l=((e,t)=>{if(t){if((0,o.rz)(e))return 1000541;else if((0,o._p)(e))return 1000542;else if((0,o.dM)(e))return 1000140}else if((0,o.rz)(e))return 1000544;else if((0,o._p)(e))return 1000543;else if((0,o.dM)(e))return 1000540})(c,n);break;case"NoAction":l=((e,t)=>{if(t&&(0,o.dM)(e))return 1000564})(c,n)}null!=l&&((0,o._p)(c)&&(r={...r,search_query:(0,a.A)(c.search)}),null!=l&&(t[l]||(0,o._u)(c))&&e(l,r,s))},[t,e,c,n])};var d=n(55465),p=n(262311),u=n(106386),h=n(526302),m=n(339589),x=n(917651),f=n(376195),g=n(562615);function _(e,t,n){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let y={dispatchMountActionDuringSSR:!1,isAdvertiserPlacement:!1},b=(e,t={},n)=>r=>(function(e,t,n=!0,r=!1,o){class a extends i.Component{constructor(e){super(e),_(this,"state",{extraContext:void 0}),_(this,"setExtraContextState",e=>{(0,h.Ay)(this.state.extraContext,e)||this.setState({extraContext:e})})}componentDidMount(){this.dispatchPlacementMount()}componentDidUpdate(n,i){let{dispatch:r,experience:s,requestContext:o}=this.props,a=i.extraContext,l=this.state.extraContext||t||{};"function"==typeof t&&(a=t(n,i.extraContext||{}),l=t(this.props,this.state.extraContext||{})),l&&Object.keys(l).length>0&&"object"==typeof l&&!(0,h.Ay)(a,l)&&r((0,m.xL)([e],o.isBot,l)),s&&(!n.experience||s.id!==n.experience.id)&&r((0,m.vI)(e,"object"==typeof l?l:{}))}componentWillUnmount(){this.props.unmountPlacement(e)}dispatchPlacementMount(){let n="function"==typeof t?t(this.props,this.state.extraContext||{}):{...t},i=r&&n?.advertiser_id?{advertiserId:n.advertiser_id}:void 0;this.props.mountPlacement(e,n,i)}render(){let{experience:e,experiencesMulti:t}=this.props,n={[r?"advertiserExperience":"experience"]:e&&(0,x.lC)(e)?e:null};return(0,g.jsx)(o,{...this.props,setPlacementExtraContext:this.setExtraContextState,...n,experiencesMulti:t})}}function l(t){let n=(0,u.d4)(t=>t.experiences[e]),i=(0,u.d4)(t=>t.experiencesMulti?t.experiencesMulti[e]:void 0),r=(0,f._8)(),o=(0,u.wA)(),{mountPlacement:l,unmountPlacement:c,setUsePlacementCalls:d}=(0,s.Ay)();return d(e,!0),(0,g.jsx)(a,{...t,dispatch:o,experience:n,experiencesMulti:i,mountPlacement:l,requestContext:r,unmountPlacement:c})}return l.displayName=`withPlacement(${o.displayName||o.name||"Component"})`,l})(e,t,(n={...y,...n}).dispatchMountActionDuringSSR,n.isAdvertiserPlacement,r)},55465(e,t,n){n.d(t,{A:()=>a});var i=n(859471),r=n(686151),s=n(917651),o=n(376195);function a(e){let{mountedPlacements:t,completeExperience:n,dismissExperience:a,experiences:l,fetchAllExperiences:c,fetchAllExperiencesMulti:d,fetchExperienceForPlacements:p,triggerExperimentsForPlacement:u,viewExperience:h}=(0,r.Ay)(),{isBot:m}=(0,o._8)(),x=e&&!m?(0,s.NW)(l,t,e):null;return(0,i.useMemo)(()=>({completeExperience:n,dismissExperience:a,experienceForPlacement:x,fetchAllExperiences:c,fetchAllExperiencesMulti:d,fetchExperienceForPlacements:p,triggerExperimentsForPlacement:u,viewExperience:h}),[n,a,x,c,d,p,u,h])}},686151(e,t,n){n.d(t,{Ay:()=>o,E3:()=>s,_z:()=>i});let{Provider:i,get:r,getMaybe:s}=(0,n(767216).A)("ExperienceContext"),o=r},262311(e,t,n){n.d(t,{A:()=>p});var i=n(859471),r=n(106386),s=n(810972),o=n(686151),a=n(376195),l=n(892804);let c=(0,s.createSelector)(e=>e.experiences,(e,t)=>t,(e,t)=>e[t]),d=(e,t)=>"function"==typeof t?t(e):t,p=(e,t={},n=!1)=>{let[s,p]=(0,i.useReducer)(d,t),{isBot:u}=(0,a._8)(),{fetchExperienceForPlacements:h,mountPlacement:m,triggerExperimentsForPlacement:x,unmountPlacement:f,setUsePlacementCalls:g}=(0,o.Ay)();(0,i.useDebugValue)(`Placement Hook ID - ${e}`),g(e,!0),(0,i.useEffect)(()=>(m(e,s,n&&s?.advertiser_id?{advertiserId:s.advertiser_id}:void 0),()=>{f(e)}),[]),(0,i.useEffect)(()=>{Object.keys(s).length>0&&h([e],u,s,n&&s?.advertiser_id?{advertiserId:s.advertiser_id}:void 0)},[s]);let _=(0,r.d4)(t=>c(t,e)),y=(0,r.d4)(t=>t.experiencesMulti[e]),b=_?_.triggerable_placed_exps:[];return(0,i.useEffect)(()=>{((e,t,n={})=>(0,l.GV)(`${e}.${t}`,{sampleRate:1,tags:n}))("experienceservice","placementHookExperimentTrigger.1",{platform:"web",placement_id:e,triggerable_experiences:JSON.stringify(b)}),x(e,s)},[JSON.stringify(b)]),{experience:_,experiencesMulti:y,setExtraContext:p}}},746743(e,t,n){n.d(t,{ZR:()=>ew,b5:()=>w,Vj:()=>N,rr:()=>eK.r,cO:()=>eA,Du:()=>ev.Du,Rf:()=>ev.Rf,Yd:()=>ev.Yd,xe:()=>eF.xe,Jq:()=>eh,j9:()=>H.default,TC:()=>eC,am:()=>eF.am,SP:()=>eJ,Gl:()=>eW,V6:()=>D.V6,En:()=>eF.En,tc:()=>F,Ts:()=>ev.Ts,X$:()=>eb,hf:()=>x,Je:()=>eK.J,Kp:()=>h,nU:()=>E,aR:()=>eu,r8:()=>eL,WJ:()=>ev.WJ}),n(135455);var i=n(335831),r=n(859471),s=n(836737),o=n(129625),a=n(396901),l=n(562615);let c={"error-callout":"error","info-callout":"info","warning-callout":"warning"};function d(e){(0,r.useEffect)(()=>{(0,i.A)("ExperienceAnalyticsCalloutBanner","/app/packages/experiences/Experiences/ExperienceAnalyticsCalloutBanner/ExperienceAnalyticsCalloutBanner.tsx")},[]);let t=(0,a.A)(),{logContextEvent:n}=(0,o.o)(),{displayData:d,experienceId:p,onComplete:u,onDismiss:h}=e,m={info:t._('Information icon', 'analyticsCalloutBanner.accessibilityLabel.info', 'accessibility label for info icon'),warning:t._('Warning icon', 'analyticsCalloutBanner.accessibilityLabel.warning', 'accessibility label for warning icon'),error:t._('Error icon', 'analyticsCalloutBanner.accessibilityLabel.error', 'accessibility label for error icon')},x=c[d.type]||"info";return(0,l.jsx)(s.az,{marginTop:6,paddingX:6,children:(0,l.jsx)(s.F_,{dismissButton:{accessibilityLabel:t._('Dismiss banner', 'analyticsCalloutBanner.dismissAccessibilityLabel', 'accessibility label to dismiss banner with metric updates on analytics'),onDismiss:()=>{h(),n({event_type:101,component:14071,element:11925,aux_data:{placed_experience_id:p}})}},iconAccessibilityLabel:m[x],message:(0,l.jsxs)(s.KJ,{children:[d.message,d.link?(0,l.jsx)(s.N_,{display:"inline",href:d.link.href,target:"blank",children:d.link.text}):null]},"message"),primaryAction:d.primaryAction?.label?{label:d.primaryAction.label,accessibilityLabel:d.primaryAction.accessibilityLabel,href:d.primaryAction.href,onClick:({dangerouslyDisableOnNavigation:e})=>{e(),u(),n({event_type:101,component:14071,element:13004,aux_data:{placed_experience_id:p}})},target:"blank",role:"link"}:void 0,secondaryAction:d.secondaryAction?.label?{label:d.secondaryAction.label,accessibilityLabel:d.secondaryAction.accessibilityLabel,href:d.secondaryAction.href,onClick:({dangerouslyDisableOnNavigation:e})=>{e(),h(),n({event_type:101,component:14071,element:13005,aux_data:{placed_experience_id:p}})},target:"blank",role:"link"}:void 0,title:d.title,type:x})})}var p=n(92035);let u=["error-callout","info-callout","warning-callout"];function h(e){(0,r.useEffect)(()=>{(0,i.A)("ExperienceAnalyticsCalloutBannerPlacement","/app/packages/experiences/Experiences/ExperienceAnalyticsCalloutBanner/ExperienceAnalyticsCalloutBannerPlacement.tsx")},[]);let{placementId:t}=e;return(0,l.jsx)(p.Ay,{placementId:t,predicate:e=>e.display_data?.type&&u.includes(e.display_data.type)&&e.display_data?.message,children:({complete:e,dismiss:t,experience:{display_data:n,experience_id:i}})=>(0,l.jsx)(d,{displayData:n,experienceId:i,onComplete:e,onDismiss:t})})}function m(e){(0,r.useEffect)(()=>{(0,i.A)("ExperienceAnalyticsUpsellBanner","/app/packages/experiences/Experiences/ExperienceAnalyticsUpsellBanner/ExperienceAnalyticsUpsellBanner.tsx")},[]);let t=(0,a.A)(),{logContextEvent:n}=(0,o.o)(),{displayData:c,experienceId:d,onComplete:p,onDismiss:u,marginBottom:h}=e;return(0,l.jsx)(s.az,{marginBottom:h,marginTop:6,paddingX:6,children:(0,l.jsx)(s.Sl,{dismissButton:{accessibilityLabel:t._('Dismiss banner', 'analyticsCalloutBanner.dismissAccessibilityLabel', 'accessibility label to dismiss banner with metric updates on analytics'),onDismiss:()=>{u(),n({event_type:101,component:14075,element:11925,aux_data:{placed_experience_id:d}})}},message:c.message,primaryAction:c.primaryAction?.label?{label:c.primaryAction.label,accessibilityLabel:c.primaryAction.accessibilityLabel,href:c.primaryAction.href,onClick:({dangerouslyDisableOnNavigation:e})=>{e(),p(),n({event_type:101,component:14075,element:13004,aux_data:{placed_experience_id:d}})},target:"blank",role:"link"}:void 0,secondaryAction:c.secondaryAction?.label?{label:c.secondaryAction.label,accessibilityLabel:c.secondaryAction.accessibilityLabel,href:c.secondaryAction.href,onClick:({dangerouslyDisableOnNavigation:e})=>{e(),u(),n({event_type:101,component:14075,element:13005,aux_data:{placed_experience_id:d}})},target:"blank",role:"link"}:void 0,title:c.title??""})})}function x(e){(0,r.useEffect)(()=>{(0,i.A)("ExperienceAnalyticsUpsellBannerPlacement","/app/packages/experiences/Experiences/ExperienceAnalyticsUpsellBanner/ExperienceAnalyticsUpsellBannerPlacement.tsx")},[]);let{placementId:t,marginBottom:n}=e;return(0,l.jsx)(p.Ay,{placementId:t,predicate:e=>e.display_data?.type==="upsell"&&e.display_data?.message,children:({complete:e,dismiss:t,experience:{display_data:i,experience_id:r}})=>(0,l.jsx)(m,{displayData:i,experienceId:r,marginBottom:n,onComplete:e,onDismiss:t})})}var f=n(428743),g=n(491149);let _=({children:e,wrapper:t})=>t?t(e):(0,l.jsx)(r.Fragment,{children:e});function y(e){(0,r.useEffect)(()=>{(0,i.A)("MultiPlatformBanner","/app/packages/experiences/Experiences/MultiPlatformBanner/MultiPlatformBanner.tsx")},[]);let t=(0,a.A)(),{displayData:{backgroundColorNarrow:n,backgroundColorWide:o,backgroundImageNarrow:c,backgroundImageWide:d,canClose:p,completeButtonText:u,coverImage:h,dismissButtonText:m,iconImage:x,layoutNarrow:y,layoutWide:b,links:v=[],linkTitles:E=[],message:A,onCompleteRedirectUrl:w,onDismissRedirectUrl:j,textColorNarrow:C,textColorWide:k,titleText:S,external:P},onComplete:T,onDismiss:I}=e,z=!(0,g.qJ)(),M=z?y:b,D=!z&&3!==M,O=z&&4===M,L=z?n:o,B=z?C:k,{altText:R,uri:N}=(z?c:d)||{},{altText:$,uri:U}=h||{},{altText:W,uri:F}=x||{},H=z&&2===M||!z&&2===M||O,J=z&&!O?"96px":"48px",K=z&&3===M,V=u&&!w&&(0,l.jsx)(s.$n,{color:"tertiary",onClick:({event:e})=>{T?.(e)},text:u}),G=(0,f.A)({url:w}),Y=u&&w&&(0,l.jsx)(s.vx,{color:O?"primary":"tertiary",fullWidth:O,href:w,onClick:({event:e})=>{T?.(e)},rel:G?"nofollow":"none",size:O?"md":"lg",target:P?"blank":void 0,text:u},"naglink"),q=(0,f.A)({url:j}),X=m&&j&&(0,l.jsx)(s.vx,{color:"tertiary",href:j,onClick:({event:e})=>{I?.(e)},rel:q?"nofollow":"none",size:"lg",target:P?"blank":void 0,text:m},"naglink"),Q=m&&!j&&(0,l.jsx)(s.$n,{color:"tertiary",onClick:({event:e})=>{I?.(e)},size:"lg",text:m}),Z=p&&(0,l.jsx)(s.K0,{accessibilityLabel:t._('Close', 'accessibility close label', 'accessibility close label'),bgColor:"secondary",icon:"close",iconColor:"subtle",onClick:({event:e})=>{I?.(e)},size:"md"}),ee=v.reduce((e,t,n)=>{let i=t.startsWith("https://")||t.startsWith("http://")?'rel="noreferrer noopener" target="_blank"':"",r=`<a href="${t}" ${i}>${E[n]}</a>`;return e.replace(`{${n}}`,r)},A),et={backgroundColor:L,backgroundImage:!N||H||K?void 0:`url(${N})`,backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundSize:"cover"},en=O?3:4,ei=O?0:-1,[er,es]=(0,r.useState)(1);return(0,r.useEffect)(()=>{if(F&&O){let e=new Image;e.src=F,e.onload=()=>{es(e.height/e.width)}}},[F,O]),(0,l.jsx)(s.az,{direction:D?"row":"column",display:"flex",marginBottom:5,marginEnd:2,marginStart:2,marginTop:O?6:2,children:(0,l.jsx)("div",{className:"banner-content",style:{borderRadius:"16px",boxShadow:O?"0px 0px 8px rgba(0, 0, 0, 0.1)":"none",margin:"0 auto"},children:(0,l.jsxs)(s.n1,{rounding:400,width:"100%",children:[K&&U&&(0,l.jsx)(s.so,{alignItems:"start",height:128,justifyContent:"center",width:"100%",children:(0,l.jsx)(s._V,{alt:$||"cover image",fit:"cover",naturalHeight:1,naturalWidth:3,src:U})}),(0,l.jsxs)(s.az,{alignItems:"center","aria-label":R,dangerouslySetInlineStyle:{__style:et},direction:D?"row":"column",display:"flex",justifyContent:"between",marginTop:K?-2:0,padding:O?3:6,children:[(0,l.jsxs)(s.so,{alignItems:"center",direction:D||O?"row":"column",gap:{row:2*!!O,column:2*!!O},justifyContent:"between",maxWidth:D?void 0:"560px",children:[H&&F&&(0,l.jsx)(s.az,{alignItems:"center",direction:"column",display:"flex",justifyContent:"center",marginBottom:6*!D,marginEnd:4*!!D,children:(0,l.jsx)(s.az,{height:O?"unset":J,width:J,children:(0,l.jsx)(s.n1,{rounding:O?0:D?400:600,children:(0,l.jsx)(s._V,{alt:W||"icon",naturalHeight:er,naturalWidth:1,src:F})})})}),(0,l.jsxs)(_,{wrapper:O?e=>(0,l.jsx)(s.so,{alignItems:O?"start":"center",direction:D?"row":"column",justifyContent:"between",children:e}):void 0,children:[!D&&S&&(0,l.jsx)(s.KJ,{align:O?"start":"center",weight:"bold",children:(0,l.jsx)("div",{className:"banner-title",style:{color:B,fontSize:O?"20px":"28px",marginBottom:D?0:"8px"},children:S})}),ee&&(0,l.jsxs)(s.KJ,{align:D||O?"start":"center",overflow:"normal",children:[(0,l.jsx)("style",{dangerouslySetInnerHTML:{__html:`
                        .banner-text a {
                          color: ${B||""};
                          font-weight: bold;
                        }`}}),(0,l.jsx)("div",{className:"banner-text",dangerouslySetInnerHTML:{__html:ee},style:{color:B}})]})]})]}),(0,l.jsx)(s.az,{marginBottom:D?0:ei,marginStart:4*!!D,marginTop:D?0:en,width:O?"100%":void 0,children:(0,l.jsxs)(_,{wrapper:O?void 0:e=>(0,l.jsx)(s.so,{alignItems:"center",gap:{row:2,column:0},justifyContent:"center",wrap:!D,children:e}),children:[Q||X,V||Y,Z]})})]})]})})})}var b=n(606815),v=n(866804);let E=({placementId:e})=>((0,r.useEffect)(()=>{(0,i.A)("ExperienceBanner","/app/packages/experiences/Experiences/ExperienceBanner/ExperienceBanner.tsx")},[]),(0,l.jsx)(p.Ay,{placementId:e,predicate:e=>e.display_data?.component_type===1,children:({complete:e,dismiss:t,experience:{display_data:n}})=>{let i=(0,b.A)(v.A)(n);return(0,l.jsx)(y,{displayData:i,onComplete:()=>e(),onDismiss:t})}})),A=[502312,502320,502321,502322],w=({placementId:e})=>((0,r.useEffect)(()=>{(0,i.A)("ExperienceBlank","/app/packages/experiences/Experiences/ExperienceBlank/ExperienceBlank.tsx")},[]),(0,l.jsx)(p.Ay,{eligibleIds:A,placementId:e,preventRemoval:!0,children:({complete:e})=>(e(),null)}));var j=n(303683),C=n(757507);function k({dismissButton:e,message:t,primaryAction:n,secondaryAction:o,title:c}){(0,r.useEffect)(()=>{(0,i.A)("CalloutNeutral","/app/packages/experiences/Experiences/ExperienceCallout/CalloutNeutral.tsx")},[]);let d=(0,g.qJ)(),p=n||o,u=(0,a.A)(),{setObserverRef:h}=(0,j.NM)(),m=e&&(0,l.jsx)(s.az,{alignSelf:"baseline",children:(0,l.jsx)(s.K0,{accessibilityLabel:e.accessibilityLabel||u._('Dismiss callout', 'experiences.ExperienceCallout.CalloutNeutral.dismissLabel', 'Accessibility label for the X button to dismiss a callout'),icon:"close",iconColor:"default",onClick:e.onDismiss,size:"xs"})});return(0,l.jsxs)(s.az,{ref:h,borderColor:"decorative",borderWidth:"sm",color:"transparent",direction:"row",display:"flex",marginBottom:4,padding:4,rounding:400,children:[(0,l.jsxs)(s.so,{direction:d?"row":"column",width:"100%",wrap:!d,children:[(0,l.jsxs)(s.so,{flex:"grow",justifyContent:"between",minWidth:0,children:[(0,l.jsxs)(s.so,{direction:"column",flex:"shrink",children:[c&&(0,l.jsx)(s.az,{marginBottom:2,children:(0,l.jsx)(s.KJ,{size:"400",weight:"bold",children:c})}),(0,l.jsx)(s.KJ,{children:t})]}),!d&&m]}),p&&(0,l.jsxs)(s.az,{alignItems:"center",display:"flex",flex:"grow",justifyContent:"end",marginTop:2*!d,children:[o&&(0,l.jsx)(C.A,{buttonType:"secondary",data:o,experienceType:27}),n&&(0,l.jsx)(C.A,{buttonType:"primary",data:n,experienceType:27})]})]}),d&&m]})}var S=n(625277);function P({dismissButton:e,imageData:t,message:n,primaryAction:o,secondaryAction:c,title:d}){let p;(0,r.useEffect)(()=>{(0,i.A)("UpsellCallout","/app/packages/experiences/Experiences/ExperienceCallout/UpsellCallout.tsx")},[]);let u=t?.component&&t.component.type===s._V,{isDarkMode:h}=(0,S.D2)(),m=(0,g.qJ)(),x=(0,a.A)(),{setObserverRef:f}=(0,j.NM)(),_=!!(o||c);"string"==typeof n&&(p=(0,l.jsx)(s.KJ,{children:n}));let y=x._('Dismiss callout', 'experiences.ExperienceCallout.UpsellCallout.dismissLabel', 'Accessibility label for the X button to dismiss an upsell callout'),b=e&&(0,l.jsx)(s.az,{alignSelf:m?"center":"baseline",children:(0,l.jsx)(s.K0,{accessibilityLabel:e.accessibilityLabel||y,icon:"close",iconColor:"default",onClick:e.onDismiss,size:"xs"})});return(0,l.jsxs)(s.az,{ref:f,color:h&&!m?void 0:"default",dangerouslySetInlineStyle:h&&!m?{__style:{backgroundColor:"var(--base-color-transparent)"}}:void 0,direction:"row",display:"flex",elevation:"shadowFloating",maxWidth:m?900:348,minWidth:m?380:348,padding:4,position:"relative",rounding:400,children:[(0,l.jsxs)(s.so,{direction:m?"row":"column",width:"100%",wrap:!m,children:[(0,l.jsxs)(s.so,{alignItems:m?"center":"start",flex:"grow",justifyContent:"between",minWidth:0,children:[t&&(0,l.jsx)(s.az,{flex:"none",marginEnd:4,width:u?Math.min(t.width||128,128):void 0,children:(0,l.jsx)(s.n1,{rounding:t.mask?.rounding||0,wash:t.mask?.wash||!1,children:t.component})}),(0,l.jsx)(s.az,{alignItems:"center",direction:"column",display:"flex",marginBottom:"auto",marginEnd:0,marginStart:0,marginTop:"auto",smDisplay:"block",smMarginEnd:6,smMarginStart:6*!!t,children:(0,l.jsxs)(s.az,{maxWidth:648,children:[d&&(0,l.jsx)(s.az,{marginBottom:2,children:(0,l.jsx)(s.KJ,{size:"400",weight:"bold",children:d})}),p||n]})}),!m&&b]}),_&&(0,l.jsxs)(s.az,{alignItems:"center",display:"flex",flex:"grow",justifyContent:"end",marginTop:2*!m,children:[c&&(0,l.jsx)(C.A,{buttonType:"secondary",data:c,experienceType:28}),o&&(0,l.jsx)(C.A,{buttonType:"primary",data:o,experienceType:28})]})]}),m&&b]})}var T=n(380961),I=n(183994),z=n(295658),M=n(49041),D=n(917651),O=n(169250),L=n(428576);let B=new s.rk(O.d1),R=new s.K5([B]),N=({experience:e,placementId:t,customFooterHeight:n})=>{(0,r.useEffect)(()=>{(0,i.A)("ExperienceCallout","/app/packages/experiences/Experiences/ExperienceCallout/ExperienceCallout.tsx")},[]);let o=(0,g.qJ)(),c=(0,a.A)(),{enableExperienceSession:d,endOnSurfaceChange:u}=(0,T.A)(t),{navFooterHeight:h}=(0,L.o)();return(0,l.jsx)(p.Ay,{eligibleTypes:[27,28],enableExperienceSession:d,experience:e,placementId:t,sessionEndOnSurfaceChange:u,children:({complete:e,dismiss:t,experience:i})=>{let a=(0,b.A)(v.A)(i.display_data),d=c._('Dismiss callout', 'experiences.ExperienceCallout.dismissLabel', 'Accessibility label for the X button to dismiss an callout'),p=a.completeButton?(0,I.q)(a.completeButton,()=>e(),d):void 0,u=a.dismissButton&&!a.dismissButton.hideDismissButton?(0,I.q)(a.dismissButton,()=>t(),d):void 0;switch(i.type){case 27:return(0,l.jsx)(s.az,{paddingX:4*!!o,children:(0,l.jsx)(k,{dismissButton:{onDismiss:()=>t(),accessibilityLabel:d},message:(0,D.dz)(a.message),primaryAction:p,secondaryAction:u,title:a.title})});case 28:var m,x;let f,g,_=(m=a.icon,x=a.iconColor,f=(0,M.W)(m),g=(0,z.A)(x),f?(0,l.jsx)(s.In,{accessibilityLabel:"",color:g,icon:f,size:32}):null);return(0,l.jsx)(s.Wd,{zIndex:R,children:(0,l.jsx)(s.az,{bottom:!0,dangerouslySetInlineStyle:{__style:{marginBottom:o?24:(n??h)+8,transition:"margin-bottom 300ms ease-in-out"}},display:"flex",justifyContent:"center",left:!0,position:"fixed",right:!0,children:(0,l.jsx)(s.az,{children:(0,l.jsx)(P,{dismissButton:{onDismiss:()=>t(),accessibilityLabel:d},imageData:_?{component:_}:void 0,message:(0,D.dz)(a.message),primaryAction:p,secondaryAction:u,title:a.title})})})});default:return(0,l.jsx)(r.Fragment,{})}}})};var $=n(55465),U=n(262311);class W extends r.PureComponent{componentDidMount(){let{experience:e}=this.props;if(e&&500500===e.experience_id){let{experience_id:t,placement_id:n}=e;this.props.experienceClient.viewExperience(n,t)}}componentDidUpdate(e){let t=e.experience,n=this.props.experience;if(n&&!t){let{experience_id:e,placement_id:t}=n;this.props.experienceClient.viewExperience(t,e)}}render(){return this.props.children}}function F(e){(0,r.useEffect)(()=>{(0,i.A)("ExperienceCloseupFeatures","/app/packages/experiences/Experiences/ExperienceCloseupFeatures/ExperienceCloseupFeatures.tsx")},[]);let t=(0,$.A)(),{experience:n}=(0,U.A)(1000075);return(0,l.jsx)(W,{...e,experience:n,experienceClient:t})}var H=n(312952),J=n(106386),K=n(795822);let V=new s.rk(O.d1),G=new s.K5([V]),Y=new s.K5([G]),q={modalMargin:24,gestaltModalMargin:6,closeButtonMargin:6},X={width:540,height:363},Q={modalMargin:24,gestaltModalMargin:6,closeButtonMargin:4},Z={width:320,height:215},ee=(0,K.A)(()=>Promise.all([n.e("91796"),n.e("44175"),n.e("57120")]).then(n.bind(n,712459)),void 0,e=>712459,"app-www-video-VideoWrapper",e=>["91796","44175","57120"]),et=e=>{let{isMobile:t,image:n,video:i,handleDismiss:r,title:o}=e,c=(0,a.A)(),d=t?Q:q,p=t?Z:X,u=(0,l.jsx)(s.az,{display:"flex",justifyContent:t?"start":"end",margin:d.closeButtonMargin,position:"absolute",width:p.width-2*d.modalMargin,zIndex:Y,children:(0,l.jsx)(s.K0,{accessibilityLabel:c._('Dismiss', 'experiences.ExperienceModalWindow.modalDismissIconButton', 'Accessibility lable for the X icon button to dismiss the modal window'),bgColor:"secondary",icon:"close",iconColor:"default",onClick:r,size:"sm"})}),h=n?n.imageAlt:o,m=n?n.url:i?.metadata?.thumbnail,x=n?.dominantColor?.length===3?`rgb(${n.dominantColor[0]}, ${n.dominantColor[1]}, ${n.dominantColor[2]})`:"rgb(111, 91, 77)",f=p.width/p.height,g={width:p.width,height:p.height};n&&n.width&&n.height?(f=n.width/n.height,g={width:n.width,height:n.height}):i&&i.metadata.width&&i.metadata.height&&(f=i.metadata.width/i.metadata.height,g={width:i.metadata.width,height:i.metadata.height});let _=m?(0,l.jsx)(s._V,{alt:h||"",color:x,fit:"cover",naturalHeight:g.height,naturalWidth:g.width,src:m}):void 0,y=Math.trunc(p.width/f);return(0,l.jsxs)(s.az,{bottom:!0,height:y,left:!0,overflow:"hidden",right:!0,top:!0,width:p.width,children:[u,n&&_,i&&(0,l.jsx)(ee,{aspectRatio:f,backgroundColor:"transparent",captions:"",controls:!1,fallback:_,isAutoPlay:!0,loop:!0,objectFit:"cover",onPlay:()=>{},onPlayError:()=>{},pinKey:null,playbackRate:1,playing:!0,playsInline:!0,poster:n?.url||i.metadata.thumbnail,preload:"auto",src:i.url,volume:0})]})};function en(e){(0,r.useEffect)(()=>{(0,i.A)("ExperienceMediaModalContent","/app/packages/experiences/Experiences/ExperienceMediaModal/ExperienceMediaModalContent.tsx")},[]);let{displayData:t,handleComplete:n,handleDismiss:o,isMobile:a}=e,{video:c,image:d,title:p,body:u,completeButton:h,dismissButton:m}=t,x=a?Q:q,g=a?"center":"start",_=(0,f.A)({url:h.url}),{setObserverRef:y}=(0,j.NM)();return(0,l.jsxs)(r.Fragment,{children:[(0,l.jsx)(et,{handleDismiss:o,image:d,isMobile:a,title:p,video:c}),(0,l.jsxs)(s.az,{ref:y,direction:"column",display:"flex",justifyContent:"center",margin:x.gestaltModalMargin,children:[(0,l.jsx)(s._Y,{align:g,children:p}),(0,l.jsx)(s.az,{marginBottom:4,marginTop:2,children:(0,l.jsx)(s.KJ,{align:g,children:(0,D.dz)(u)})}),(0,l.jsxs)(s.az,{dangerouslySetInlineStyle:{__style:{flexWrap:"wrap-reverse"}},display:"flex",justifyContent:a?"center":"end",margin:-1,children:[m&&!m.hideDismissButton&&(0,l.jsx)(s.az,{fit:!0,flex:a?"grow":"none",minWidth:a?130:void 0,padding:1,children:(0,l.jsx)(s.$n,{color:"secondary",fullWidth:a,onClick:o,size:"lg",text:m.text})}),h&&(0,l.jsx)(s.az,{fit:!0,flex:a?"grow":"none",minWidth:a?130:void 0,padding:1,children:h.url?(0,l.jsx)(s.vx,{color:"primary",fullWidth:a,href:h.url,onClick:n,rel:_?"nofollow":"none",size:"lg",text:h.text}):(0,l.jsx)(s.$n,{color:"primary",fullWidth:a,onClick:n,size:"lg",text:h.text})})]})]})]})}var ei=n(389598),er=n(921831),es=n(306869),eo=n(259628),ea=n(498395),el=n(257470);function ec({accessibilityModalLabel:e,allowScroll:t=!1,children:n,closeOnOutsideClick:o=!0,footer:c,isOpen:d,modalWidth:p,onDismiss:u,zIndex:h}){(0,r.useEffect)(()=>{(0,i.A)("MobileModalWindow","/app/www/experiences/duplo/ExperienceMobileModalWindow/MobileModalWindow.tsx")},[]);let m=(0,a.A)(),x=(0,r.useRef)(null),{setAppFocusState:f}=(0,el.Y)();return((0,r.useEffect)(()=>(x.current=(0,er.A)(()=>{}),()=>{"u">typeof window&&Object.prototype.hasOwnProperty.call(window,"cancelAnimationFrame")&&x.current&&(window.cancelAnimationFrame(x.current),x.current=null)}),[]),(0,r.useEffect)(()=>(d?(eo.A.pause(),f(!1)):(eo.A.resume(),f(!0)),()=>{d&&(eo.A.resume(),f(!0))}),[f,d]),(0,r.useEffect)(()=>{let e=d&&!t;return e&&(()=>{if(document.body){let{body:{style:e}}=document;e.overflow="hidden",e.touchAction="none"}})(),()=>{e&&(()=>{if(document.body){let{body:{style:e}}=document;e.overflow="visible",e.touchAction="auto"}})()}},[d,t]),d)?(0,l.jsx)(ea.A,{children:(0,l.jsx)(s.Wd,{children:(0,l.jsxs)(s.az,{"aria-label":e,position:"relative",role:"dialog",zIndex:h||es.nH,children:[(0,l.jsx)(s.Rp,{accessibilityLabel:m._('Mobile Popup Modal Mask', 'mweb.experience_popup_modal.mask', 'The acessibility label for the mask of popup modal'),onTap:()=>{o&&u()},tapStyle:"none",children:(0,l.jsx)(s.az,{dangerouslySetInlineStyle:{__style:{backgroundColor:"rgba(0, 0, 0, .5)",touchAction:"none",transitionProperty:"opacity",transitionTimingFunction:"ease-out"}},height:"100%",left:!0,position:"fixed",top:!0,width:"100%",zIndex:new s.rk(1)})}),(0,l.jsxs)(s.az,{color:"default",dangerouslySetInlineStyle:{__style:{top:"50%",left:"50%",transform:"translate(-50%, -50%)",touchAction:"none",transitionProperty:"transform, opacity",transitionTimingFunction:"ease-out"}},overflow:"hidden",position:"fixed",rounding:400,top:!0,width:p,zIndex:new s.rk(1),children:[n,c]})]})})}):null}let ed=new s.rk(O.d1),ep=new s.K5([ed]);function eu(e){(0,r.useEffect)(()=>{(0,i.A)("ExperienceModalWindow","/app/packages/experiences/Experiences/ExperienceMediaModal/ExperienceModalWindow.tsx")},[]);let t=(0,J.d4)(({experiences:t})=>e.experience||(e.placementId?t[e.placementId]:void 0)),n=t?.display_data?.delay_in_millis,[a,c]=(0,r.useState)(t&&!n),{logContextEvent:d}=(0,o.o)(),u=(0,g.qJ)(),{enableExperienceSession:h,endOnSurfaceChange:m}=(0,T.A)(e.placementId),x=(0,r.useCallback)((e,t)=>{let n=new URL(e.display_data.complete_button.url),i=n.searchParams.get("repin_id"),r=n.pathname.split("/").pop(),{pin_count:s,cluster_title:o}=e.metadata?.[e.experience_id]||{};d({event_type:t,aux_data:{cluster_selected_name:o,component_id:r,navigation_source:3,pin_count:s,repin_id:i}})},[d]);return(0,r.useEffect)(()=>{let e=t&&!t.display_data?.delay_in_millis;c(e),e&&t?.experience_id===507669&&x(t,16498)},[t,x]),(0,r.useEffect)(()=>{let e;return n&&(e=setTimeout(()=>{c(!0)},n)),()=>clearTimeout(e)},[n]),(0,l.jsx)(r.Fragment,{children:a&&(0,l.jsx)(p.Ay,{eligibleSchemas:[1],eligibleTypes:[26],enableExperienceSession:h,experience:t,placementId:e.placementId,sessionEndOnSurfaceChange:m,children:({complete:e,dismiss:n,experience:{display_data:i}})=>{let r=(0,b.A)(v.A)(i),o=t?.experience_id===507054,a=t?.experience_id===507669,d=()=>{a&&x(t,16499),c(!1),n()},p=({dangerouslyDisableOnNavigation:t})=>{o&&t(),e(),c(!1)},{title:h,body:m,completeButton:f}=r;return h&&m&&f.text?u?(0,l.jsx)(s.Wd,{zIndex:ep,children:(0,l.jsx)(ei.Ay,{accessibilityModalLabel:"",onDismiss:d,size:"sm",children:(0,l.jsx)(en,{displayData:r,handleComplete:p,handleDismiss:d,isMobile:!1})})}):(0,l.jsx)(ec,{accessibilityModalLabel:r?.title,isOpen:!0,modalWidth:320,onDismiss:d,children:(0,l.jsx)(en,{displayData:r,handleComplete:p,handleDismiss:d,isMobile:!0})}):null}})})}let eh=e=>{(0,r.useEffect)(()=>{(0,i.A)("ExperienceMetricsUnificationBanner","/app/packages/experiences/Experiences/ExperienceMetricsUnificationBanner/ExperienceMetricsUnificationBanner.tsx")},[]);let t=(0,a.A)(),[n,o]=(0,r.useState)(!0),{placementId:c}=e;return(0,l.jsx)(p.Ay,{eligibleIds:[502527],placementId:c,children:({experience:{display_data:e,type:i}})=>(0,l.jsx)(r.Fragment,{children:n&&5===i&&!!e.buttons&&e.buttons.length>=2&&!!e.title_text&&!!e.subtitle_text&&(0,l.jsx)(s.az,{marginBottom:6,marginTop:6,children:(0,l.jsx)(s.F_,{dismissButton:{accessibilityLabel:e.buttons[1].text,onDismiss:()=>{o(!1)}},iconAccessibilityLabel:t._('Info icon', 'experiences.experienceMetricsUnificationBanner.iconAccessibilityLabel', 'Accessibility label for info icon'),message:e.subtitle_text,primaryAction:{href:e.buttons[0].uri,label:e.buttons[0].text,accessibilityLabel:e.buttons[0].text,onClick:({dangerouslyDisableOnNavigation:e})=>e(),role:"link"},title:e.title_text,type:"info"})})})})};var em=n(731634),ex=n(54905);let ef=O.d1,eg=new s.rk(ef-1);function e_(e){let{button:t,onClick:n}=e;return t.url?(0,l.jsx)(s.vx,{color:"tertiary",fullWidth:!0,href:t.url,onClick:n,rel:(0,f.A)({url:t.url})?"nofollow":"none",text:t.text}):(0,l.jsx)(s.$n,{color:"tertiary",fullWidth:!0,onClick:n,text:t.text})}let ey=e=>{let t,{anchors:n,experience:i,dismiss:o,complete:a,scrollToDismiss:c,onAnchorHover:d,onAnchorTouch:p,idealDirection:u,zIndex:h}=e,m=!0,{message:x,anchor:f,complete_button:g}=(i||{}).display_data,_=n[f],y=()=>{t&&clearTimeout(t),o()},b=()=>{t||m||(t=setTimeout(()=>y(),1500)),m=!1};(0,r.useEffect)(()=>(_&&(c&&(window.addEventListener("scroll",b),window.addEventListener("touchmove",b)),p&&_&&_.addEventListener("click","complete"===p?a:y),d&&_&&_.addEventListener("mouseenter","complete"===d?a:y)),()=>{c&&(window.removeEventListener("scroll",b),window.removeEventListener("touchmove",b),t&&clearTimeout(t)),p&&_&&_.removeEventListener("click","complete"===p?a:y),d&&_&&_.removeEventListener("mouseenter","complete"===d?a:y)}),[_]);let{setObserverRef:v}=(0,ex.A)(),E=(0,l.jsx)(s.fT,{anchor:_,idealDirection:u,onDismiss:y,zIndex:eg,children:(0,l.jsx)(s.az,{ref:v,padding:4,tabIndex:0,children:(0,l.jsxs)(s.so,{direction:"column",gap:3,children:[(0,l.jsx)(s.KJ,{color:"light",children:x}),g&&(0,l.jsx)(e_,{button:g,onClick:a})]})})});return h?(0,l.jsx)(s.az,{position:"fixed",zIndex:h,children:E}):E},eb=e=>{(0,r.useEffect)(()=>{(0,i.A)("ExperiencePopover","/app/packages/experiences/Experiences/ExperiencePopover/ExperiencePopover.tsx")},[]);let{placementId:t,anchors:n,advertiserId:s}=e,[o,a]=(0,r.useState)(!0),{enableExperienceSession:c,endOnSurfaceChange:d}=(0,j.wQ)(t);return(0,l.jsx)(em.A,{name:"ExperiencePopoverEducational",children:o&&(0,l.jsx)(p.Ay,{enableExperienceSession:c,placementId:t,predicate:e=>{if(e?.type!==29)return!1;let{anchor:t}=(e||{}).display_data;return!!t&&!!n[t]},sessionEndOnSurfaceChange:d,targeting:s?{advertiserId:parseInt(s,10)}:null,children:({complete:t,dismiss:n,experience:i})=>(0,l.jsx)(ey,{...e,complete:()=>{a(!1),t()},dismiss:()=>{a(!1),n()},experience:i})})})};var ev=n(642769);let eE=(e,t)=>{let n=RegExp("\\b"+t+"\\b","i");return e===t||e.match(n)};function eA({children:e,experiences:t,placementId:n,searchTerm:i,suggestions:s}){let{viewExperience:o}=(0,ev.WJ)(),[a,l]=(0,r.useState)(null),[c,d]=(0,r.useState)(new Set),p=t?.filter(e=>e.display_data?.component_type===3).map(e=>({...e.display_data,id:e.experience_id}))||[];return(0,r.useEffect)(()=>{if(!i||!s)return void l(null);if(!a?.search_query_list.find(e=>s.some(({label:t})=>eE(t??"",e)))){let e=p.find(e=>e.id!==a?.id&&e.search_query_list?.find(e=>s.some(({label:t})=>eE(t??"",e))));if(e){l(e);let{id:t}=e;c.has(t)||("number"==typeof t&&o(n,t),d(new Set(c).add(t)))}}},[i]),e({searchDelightConfig:a})}function ew(e,t){return t.map(t=>((e,t)=>{let n=RegExp("\\b"+t+"\\b","i");if(!e.match(n))return null;let i=e.toLowerCase().indexOf(t.toLowerCase());return[e.slice(0,i),e.slice(i,i+t.length)]})(e,t)).filter(Boolean).sort((e,t)=>e&&t?t[1].length-e[1].length:0).shift()}function ej({searchDelightText:e,searchDelightConfig:t}){(0,r.useEffect)(()=>{(0,i.A)("SearchDelightText","/app/packages/experiences/Experiences/ExperienceSearchDelight/search-delight/SearchDelightText.tsx")},[]);let{text_background_color:n,text_colors:s=[]}=t,o=n?{backgroundColor:n,margin:"-2px",padding:"2px"}:void 0;if(!(s.length>1))return(0,l.jsx)("span",{style:{color:s[0],whiteSpace:"pre-wrap",...o},children:e},`searchDelight-${e}`);{let t=0;return(0,l.jsx)("span",{style:{whiteSpace:"pre-wrap",...o},children:e.split("").map((e,n)=>{let i=s[t];return" "!==e&&(t=(t+1)%s.length),(0,l.jsx)("span",{style:{color:i},children:e},`searchDelight-${n}`)})})}}function eC({allBold:e,searchDelightParts:t,searchDelightConfig:n,text:o,weightPivot:a}){(0,r.useEffect)(()=>{(0,i.A)("HighlightTermWithSearchDelight","/app/packages/experiences/Experiences/ExperienceSearchDelight/search-delight/HighlightTermWithSearchDelight.tsx")},[]);let c=t[1],d=o.indexOf(c),p=d+c.length;return a<=d?(0,l.jsxs)(r.Fragment,{children:[(0,l.jsx)(s.KJ,{color:"subtle",inline:!0,weight:e?"bold":"normal",children:o.substring(0,a)}),(0,l.jsxs)(s.KJ,{inline:!0,weight:"bold",children:[o.substring(a,d),(0,l.jsx)(ej,{searchDelightConfig:n,searchDelightText:c}),o.substring(p)]})]}):a<=p?(0,l.jsxs)(r.Fragment,{children:[(0,l.jsx)(s.KJ,{color:"subtle",inline:!0,weight:e?"bold":"normal",children:o.substring(0,d)}),(0,l.jsxs)(s.KJ,{inline:!0,weight:"bold",children:[(0,l.jsx)(ej,{searchDelightConfig:n,searchDelightText:c}),o.substring(p)]})]}):(0,l.jsxs)(r.Fragment,{children:[(0,l.jsx)(s.KJ,{color:"subtle",inline:!0,weight:e?"bold":"normal",children:o.substring(0,d)}),(0,l.jsx)(s.KJ,{inline:!0,weight:"bold",children:(0,l.jsx)(ej,{searchDelightConfig:n,searchDelightText:c})}),(0,l.jsx)(s.KJ,{color:"subtle",inline:!0,weight:e?"bold":"normal",children:o.substring(p,a)}),(0,l.jsx)(s.KJ,{inline:!0,weight:"bold",children:o.substring(a)})]})}function ek(e,t,n){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class eS extends r.Component{constructor(...e){super(...e),ek(this,"state",{surveyLoaded:!1}),ek(this,"loadSurvey",()=>{this.setState({surveyLoaded:!0}),this.props.view?.()}),ek(this,"handleDismiss",()=>{this.props.dismiss(),this.setState({surveyLoaded:!1})}),ek(this,"handleComplete",()=>{this.props.complete(),this.setState({surveyLoaded:!1})})}componentDidMount(){(0,i.A)("ExternalSurvey","/app/packages/experiences/Experiences/ExperienceSurvey/ExternalSurvey.tsx");let{displayData:{delay:e}}=this.props;this.surveyTimer=window.setTimeout(this.loadSurvey,e)}componentWillUnmount(){clearTimeout(this.surveyTimer)}render(){if(!this.state.surveyLoaded)return null;let{displayData:{buttons:e,detailed_text:t,title_text:n},setObserverRef:i}=this.props;return(0,l.jsx)(ei.Ay,{accessibilityModalLabel:this.props.i18n._('Would you mind taking a survey?', 'User eval survey', 'User eval survey'),footer:(0,l.jsx)(s.so,{alignItems:"stretch",justifyContent:"end",children:e.map(e=>{if(!e.uri)return(0,l.jsx)(s.az,{marginStart:1,children:(0,l.jsx)(s.$n,{fullWidth:!0,onClick:this.handleDismiss,text:e.text})},e.text);{let t=e.uri,n=(0,f.A)({url:t});return(0,l.jsx)(s.az,{marginStart:1,children:(0,l.jsx)(s.vx,{color:"primary",fullWidth:!0,href:t,onClick:this.handleComplete,rel:n?"nofollow":"none",target:"blank",text:e.text})},e.text)}})}),heading:n,onDismiss:this.handleDismiss,size:"sm",children:(0,l.jsx)(s.az,{ref:i,padding:3,children:(0,l.jsx)(s.KJ,{children:t})})})}}function eP(e){(0,r.useEffect)(()=>{(0,i.A)("ExternalSurvey","/app/packages/experiences/Experiences/ExperienceSurvey/ExternalSurvey.tsx")},[]);let t=(0,a.A)();return(0,l.jsx)(eS,{...e,i18n:t})}var eT=n(979638);function eI(e,t,n){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class ez extends r.Component{constructor(...e){super(...e),eI(this,"isOnClose",this.props.onCloseEnabled&&2===this.props.actionTrigger),eI(this,"state",{surveyAccepted:!1,surveyLoaded:!1,surveyLoadFailed:!1,showSurveyOnClose:this.isOnClose}),eI(this,"loadSurvey",(e=!0)=>{let{onView:t}=this.props;e&&t?.(),this.setState({surveyLoaded:!0})}),eI(this,"processIFrameMessage",e=>{let{presentationDelay:t=5e3,onComplete:n,surveyLink:i,onCloseEnabled:r}=this.props,s=e.origin||e.originalEvent.origin;i.startsWith(s)&&("surveyFinished"===e.data?n():"surveyLoaded"===e.data&&(window.clearTimeout(this.loadSurveyFailureTimeout),this.isOnClose&&this.showSurveyOnLeavingPage(),r?this.actionTriggerHandler():this.loadSurveyTimeout=window.setTimeout(this.loadSurvey,t)))}),eI(this,"handleShowSurvey",()=>{this.setState({surveyAccepted:!0})})}componentDidMount(){(0,i.A)("AnketSurvey","/app/www/common/AnketSurvey/AnketSurvey.tsx"),window.addEventListener("message",this.processIFrameMessage),this.loadSurveyFailureTimeout=window.setTimeout(()=>{this.state.surveyLoaded||(window.clearTimeout(this.loadSurveyTimeout),this.setState({surveyLoadFailed:!0}))},15e3)}componentWillUnmount(){window.removeEventListener("message",this.processIFrameMessage),window.clearTimeout(this.loadSurveyTimeout),window.clearTimeout(this.loadSurveyFailureTimeout),this.isOnClose&&this.props.unblock()}actionTriggerHandler(){let{actionTrigger:e,presentationDelay:t=5e3}=this.props;switch(e){case 1:this.loadSurvey();break;case 2:this.loadSurvey(!1);break;default:this.loadSurveyTimeout=window.setTimeout(this.loadSurvey,t)}}showSurveyOnLeavingPage(){let{onView:e,block:t}=this.props;t(()=>{e?.(),this.setState({showSurveyOnClose:!1})})}render(){let{surveyAccepted:e,surveyLoadFailed:t,surveyLoaded:n,showSurveyOnClose:i}=this.state;if(t)return null;let{acceptButtonText:r,bodyText:o,declineButtonText:a,onDismiss:c,subtitleText:d,surveyLink:p,titleText:u,setObserverRef:h}=this.props,m=(0,l.jsx)("iframe",{"data-test-id":"anket-iframe",src:p,style:e?{border:0,minHeight:810,paddingBottom:4,width:"100%"}:{display:"none"},title:this.props.i18n._('Pinterest Survey', 'Accessible label for survey frame', 'Accessible label for survey frame')});return n&&!i?(0,l.jsx)(s.az,{position:"absolute",zIndex:new s.rk(1e3),children:(0,l.jsxs)(s.aF,{accessibilityModalLabel:this.props.i18n._('Have a few minutes to take a survey?', 'User evaluation survey', 'User evaluation survey'),footer:!e&&(0,l.jsxs)(s.az,{display:"flex",justifyContent:"end",paddingX:1,children:[(0,l.jsx)(s.az,{dangerouslySetInlineStyle:{__style:{padding:"6px 8px"}},children:(0,l.jsx)(s.$n,{fullWidth:!0,onClick:()=>{this.setState({surveyAccepted:!1}),c()},text:a})}),(0,l.jsx)(s.az,{dangerouslySetInlineStyle:{__style:{padding:"6px 8px"}},children:(0,l.jsx)(s.$n,{color:"primary",fullWidth:!0,onClick:this.handleShowSurvey,text:r})})]}),heading:e?"":u,onDismiss:c,padding:"none",role:"alertdialog",size:e?"lg":"md",children:[(0,l.jsx)(s.az,{ref:h,children:m}),!e&&(0,l.jsxs)(s.az,{padding:3,children:[(0,l.jsx)(s.KJ,{children:d}),(0,l.jsx)(s.KJ,{children:o})]})]})}):m}}let eM=function(e){let t=(0,a.A)(),[n,i]=(0,r.useState)(!1),s=(0,r.useRef)(null),o=(0,eT.KP)(n);return(0,r.useEffect)(()=>{"blocked"===o.state&&s.current?.()},[o.state]),(0,l.jsx)(ez,{...e,block:e=>{s.current=e,i(!0)},i18n:t,onCloseEnabled:!1,unblock:()=>{i(!1),s.current=null,"blocked"===o.state&&o.proceed()}})},eD=e=>{let{complete:t,dismiss:n,view:i,displayData:r}=e,{setObserverRef:s}=(0,j.NM)(),{anket:o,buttons:a,delay:c,detailed_text:d,subtitle_text:p,title_text:u,action_trigger:h=3}=r,[m,x]=a;return o?(0,l.jsx)(eM,{acceptButtonText:x?.text||"",actionTrigger:h,bodyText:d,declineButtonText:m?.text||"",onComplete:t,onDismiss:n,onView:i,presentationDelay:c,setObserverRef:s,subtitleText:p,surveyLink:x?.uri||"",titleText:u}):(0,l.jsx)(eP,{complete:t,dismiss:n,displayData:r,setObserverRef:s,view:i})},eO=e=>{let{experienceId:t,displayData:n}=e,{delay:i=0}=n,s={...n,delay:0},o={...e,displayData:{...s}},a=(0,r.useRef)(void 0),[c,d]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{let e=["/pin-builder","/idea-pin-builder"],t=e=>window.location.pathname.includes(e),n=()=>{e.some(t)?a.current=setTimeout(()=>n(),3e3):d(!0)};return a.current=setTimeout(()=>n(),i),()=>{clearTimeout(a.current)}},[t,i]),c?(0,l.jsx)(eD,{...o}):null};function eL(e){(0,r.useEffect)(()=>{(0,i.A)("ExperienceSurvey","/app/packages/experiences/Experiences/ExperienceSurvey/ExperienceSurvey.tsx")},[]);let{placementId:t,experience:n,targeting:s,eligibleIds:o}=e,{enableExperienceSession:a,endOnSurfaceChange:c}=(0,j.wQ)(t);return(0,l.jsx)(p.Ay,{disableAutoView:!0,eligibleIds:o||[],eligibleTypes:[5],enableExperienceSession:a,experience:n,placementId:t,sessionEndOnSurfaceChange:c,targeting:s,children:({complete:e,dismiss:n,view:i,experience:r})=>{let s=r.display_data,o=r.experience_id;return 1000421===t?(0,l.jsx)(eO,{complete:e,dismiss:n,displayData:s,experienceId:o,view:i}):(0,l.jsx)(eD,{complete:e,dismiss:n,displayData:s,experienceId:o,view:i})}})}var eB=n(388364);let eR=e=>{(0,r.useEffect)(()=>{(0,i.A)("ExperienceToast","/app/packages/experiences/Experiences/ExperienceToast/ExperienceToast.tsx")},[]);let{logContextEvent:t}=(0,o.o)();return(0,l.jsx)(p.Ay,{eligibleIds:e.eligibleIds,eligibleTypes:[10],placementId:e.placementId,children:({complete:n,dismiss:i,experience:{display_data:r}})=>{let s=r.link||e.linkUrl;return(0,l.jsx)(eB.A,{duration:r.duration,href:s,onClick:()=>{n(),e.onClick&&e.onClick(),e.shouldLogClicks&&e.shouldLogClicks&&t({event_type:101,object_id_str:e.objectId,component:e.thriftComponentType,element:e.thriftElementType})},onHide:()=>{e.onHide(),e.completionOnDismissal?n():i()},text:r.text||""})}})};var eN=n(906494);function e$(e,t,n){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class eU extends r.Component{constructor(...e){super(...e),e$(this,"componentDidMount",()=>{let{delay:e=2e3}=this.props;this.experienceToastsTimeout=window.setTimeout(()=>this.triggerEducationToasts(),e)})}componentWillUnmount(){window.clearTimeout(this.experienceToastsTimeout)}triggerEducationToasts(){let{toastManagerContext:e,completionOnDismissal:t,placementId:n,experienceIds:i}=this.props;e.showToast(({hideToast:e})=>(0,l.jsx)(eR,{completionOnDismissal:t,eligibleIds:i,onHide:e,placementId:n,shouldLogClicks:!1}))}render(){return null}}function eW(e){return(0,r.useEffect)(()=>{(0,i.A)("ExperienceToastLaunchWrapper","/app/packages/experiences/Experiences/ExperienceToast/ExperienceToastLaunchWrapper.tsx")},[]),(0,l.jsx)(eU,{...e,toastManagerContext:(0,eN.CG)()})}e$(eU,"defaultProps",{completionOnDismissal:!1});var eF=n(78e4);function eH(e){(0,r.useEffect)(()=>{(0,i.A)("PinnerUpgradeToBusinessBanner","/app/packages/experiences/Experiences/ExperienceUpsellPinnersToPartner/PinnerUpgradeToBusinessBanner.tsx")},[]);let t=(0,a.A)(),{handleComplete:n,handleDismiss:o}=e;return(0,l.jsx)(s.az,{marginBottom:2,marginEnd:"auto",marginStart:"auto",marginTop:2,width:"55%",children:(0,l.jsx)(s.Sl,{dismissButton:{accessibilityLabel:t._('Dismiss Banner Button', 'PinnerUpgradeToBusinessBanner.primaryAction.accesibility', 'Dismis Banner Button accesibility Label of the Banner to upgrade pinners to business account'),onDismiss:o},imageData:{component:(0,l.jsx)(s.In,{accessibilityLabel:"graph",color:"default",icon:"graph-bar",size:45})},message:t._('Upgrade to a free Pinterest business account to unlock tools that help drive traffic, grow your audience and sell more products', 'PinnerUpgradeToBusinessBanner.message', 'Message of the Banner to upgrade pinners to business account'),primaryAction:{label:t._('Upgrade', 'PinnerUpgradeToBusinessBanner.primaryAction', 'Upgrade action of the Banner to upgrade pinners to business account'),href:"/business/convert/",accessibilityLabel:t._('Upgrade Button', 'PinnerUpgradeToBusinessBanner.primaryAction.accesibility', 'Upgrade Button accesibility Label of the Banner to upgrade pinners to business account'),onClick:n,role:"link"},title:t._('Discover your top performing Pins', 'PinnerUpgradeToBusinessBanner.title.variant_a', 'Title of the Banner to upgrade pinners to business account')})})}let eJ=({placementId:e})=>((0,r.useEffect)(()=>{(0,i.A)("ExperiencePinnerUpgradeToBusinessBanner","/app/packages/experiences/Experiences/ExperienceUpsellPinnersToPartner/ExperiencePinnerUpgradeToBusinessBanner.tsx")},[]),(0,l.jsx)(p.Ay,{eligibleIds:[503755],placementId:e,children:({complete:e,dismiss:t})=>(0,l.jsx)(eH,{handleComplete:e,handleDismiss:t})}));var eK=n(783637)},815944(e,t,n){n.d(t,{$d:()=>s,Uh:()=>o,YT:()=>l,iN:()=>r,vv:()=>a});var i=n(891744);let r=e=>({type:i.yU,payload:{experiencesMulti:e}}),s=(e,t,n)=>({type:i.Dq,payload:{placementId:e,experienceId:t,status:n}}),o=(e,t,n)=>({type:i.RQ,payload:{placementId:e,experienceId:t,status:n}}),a=e=>({type:i.KP,payload:{experiences:e}}),l=e=>({type:i.XB,payload:{experiences:e}})},917651(e,t,n){n.d(t,{lC:()=>h,V6:()=>u,dz:()=>v,al:()=>f,NW:()=>x,JY:()=>E,Pf:()=>m,$1:()=>A,C3:()=>g});var i=n(859471),r=n(836737),s=n(107639);let o=[11,1000168,40001],a={1:{id:1,route:"/",onRoute:s.rz,placements:[11,1000541,1000503,40001]},13:{id:13,route:"/business/hub/",onRoute:s.Zm,placements:[1000168]}};var l=n(822819),c=n(428743),d=n(562615);let p={display_data:{},experience_id:1,id:"noop",placement_id:0,type:0};function u(e,t){let n=!!(e&&"object"==typeof e&&Object.keys(e).length>0&&Object.keys(p).every(t=>t in e))&&1!==e.experience_id&&0!==e.type;if(t){if(!n)return!1;if("experience_id"in t)return e.experience_id===t.experience_id;if("type"in t)return e.type===t.type;if("status"in t)return"status"in e&&e.status===t.status;throw Error("Invalid options provided to isExperience. Options must be one of: { experience_id: number }, { type: number }, or { status: ExperienceStatus }")}return n}function h(e){return!!e&&0!==e.type}let m=(e,t,n,i,r,s=!0)=>{let a="existingExperience";return i?h(i)?n&&(a="placementInSurface",!n.placements.includes(e))?{shouldRefresh:!0,refreshReasoning:"placementNotInSurface"}:r?(a="inSSRPlacement",o.includes(e)?{shouldRefresh:!1,refreshReasoning:a}:{shouldRefresh:!0,refreshReasoning:"notAnSSRPlacement"}):!s||(a="placementMounted",t.mountedPlacements[e]||t.registeredAfterActionPlacements[e])?{shouldRefresh:!1,refreshReasoning:a}:{shouldRefresh:!0,refreshReasoning:"placementNotMounted"}:{shouldRefresh:!0,refreshReasoning:"experienceNotRenderable"}:{shouldRefresh:!0,refreshReasoning:"noExistingExperience"}},x=(e,t,n)=>{let i=e[n];return t[n]&&h(i)?i:null};function f(e){return e.display_data?.anchor}function g(e){return Object.values(a).find(t=>t.onRoute?t.onRoute(e):t.route===e.pathname)}let _=/<(\w+)\s*([^>]*)>([^<]*)<\/\1>/gim,y=/(?:href)=["']?([^"'>\s\\]*)["']?/im,b=/(?:target)=["']?([^"'>\s\\]*)["']?/im,v=(e,t)=>{let n=function(e){let t=[],n=0;for(let i of Array.from(e.matchAll(_))){if(i.index>n){let r=e.slice(n,i.index);r&&t.push({type:"text",content:r})}let[r,s,o,a]=i;switch(s){case"a":t.push({type:"link",content:a||"",attrs:o||""});break;case"b":t.push({type:"bold",content:a||""});break;default:t.push({type:"text",content:r})}n=i.index+r.length}if(n<e.length){let i=e.slice(n);i&&t.push({type:"text",content:i})}return t}(e);return(0,d.jsx)(r.KJ,{inline:!0,size:t,children:n.map(({type:e,content:n,attrs:s},o)=>{switch(e){case"text":return(n?.split(`
`)||[]).map((e,s)=>(0,d.jsxs)(i.Fragment,{children:[s>0&&(0,d.jsx)("br",{}),(0,d.jsx)(r.KJ,{inline:!0,size:t,children:e})]},`${n}-${s}`));case"bold":return(0,d.jsx)(r.KJ,{inline:!0,size:t,weight:"bold",children:n},`${n}-${o}`);case"link":let a=s?.match(y),l=a&&a.length>1?a[1]:void 0,p=s?.match(b),u=p&&p.length>1?p[1]:void 0;if(!l)return(0,d.jsx)(r.KJ,{inline:!0,size:t,children:n},`${n}-${o}`);let h=!1;return h=(0,c.A)({url:l}),(0,d.jsx)(r.N_,{display:"inline",externalLinkIcon:h?"default":"none",href:l,rel:h?"nofollow":"none",target:"_blank"===u?"blank":void 0,children:n},`${l}-${o}`);default:return null}})})},E=()=>"u">typeof window&&performance&&performance.now?Math.floor(performance.now()):Math.floor(Date.now()),A=(0,l.A)()&&(0,l.A)().debug_experience_session?console:{log:(...e)=>{},error:(...e)=>{},warn:(...e)=>{}}},306869(e,t,n){n.d(t,{GV:()=>p,QN:()=>c,aj:()=>h,m2:()=>d,nH:()=>l,ou:()=>u});var i=n(836737),r=n(94024),s=n(625277),o=n(510149),a=n(87213);let l=new i.rk(1e3),c=new i.K5([a.f,o.U7,r.gJ]),d=new i.K5([c]),p=12,u=({variant:e,isDarkMode:t})=>{let n=t?s.be:"#FFFFFF";return{__style:"fullpage"===e?{backgroundColor:n,touchAction:"none",transitionProperty:"transform, opacity",transitionTimingFunction:"ease-out",width:"100%",height:"100%",left:0,right:0,top:0,bottom:0,zIndex:1,overflowY:"hidden"}:"fullscreen"===e?{backgroundColor:n,touchAction:"none",transitionProperty:"transform, opacity",transitionTimingFunction:"ease-out",width:"90vw",height:"70vh",borderRadius:"8px",zIndex:1,left:"5vw",bottom:"13vh",overflowY:"hidden"}:"tablet"===e?{backgroundColor:n,border:void 0,borderRadius:"32px",top:"50%",left:"50%",minWidth:"350px",overflow:"hidden",touchAction:"none",transform:"translate(-50%, -50%)",transitionProperty:"transform, opacity",transitionTimingFunction:"ease-out",zIndex:1}:"footer"===e?{backgroundColor:n,border:t?void 0:"1px solid #efefef",borderRadius:"32px 32px 0 0",bottom:0,boxShadow:"0 0 16px rgba(0,0,0, 0.16)",left:0,touchAction:"none",transitionProperty:"transform, opacity",transitionTimingFunction:"ease-out",width:"100vw",zIndex:1}:"signup"===e||"euPrompt"===e?{backgroundColor:n,border:void 0,borderRadius:"32px",top:"50%",touchAction:"none",transform:"translate(0%, -50%)",transitionProperty:"transform, opacity",transitionTimingFunction:"ease-out",zIndex:1,left:"euPrompt"===e?"5%":"8px",right:"euPrompt"===e?"5%":"8px",overflow:"auto"}:"repinPage"===e?{backgroundColor:t?s.ee:"#FFFFFF",borderRadius:"32px 32px 0 0",border:t?void 0:"1px solid #efefef",bottom:0,boxShadow:"0px 0px 8px rgba(0, 0, 0, 0.1)",left:"0px",maxHeight:"100%",overflow:"hidden",touchAction:"none",transitionProperty:"transform, opacity",transitionTimingFunction:"ease-out",width:"100vw",zIndex:1}:{backgroundColor:n,borderRadius:"32px 32px 0 0",border:t?void 0:"1px solid #efefef",bottom:0,boxShadow:"0px 0px 8px rgba(0, 0, 0, 0.1)",left:"0px",maxHeight:"100%",overflow:"hidden",touchAction:"none",transitionProperty:"transform, opacity",transitionTimingFunction:"ease-out",width:"100vw",zIndex:1}}},h=({isFullscreen:e,isTablet:t,isShowing:n,isRelatedInterestsModal:i,isDarkMode:r})=>{let s={border:r?void 0:"1px solid #efefef",touchAction:"none",width:"100vw",height:"",zIndex:1,left:0,bottom:0,borderRadius:"32px 32px 0px 0px",boxShadow:"0px 0px 8px rgba(0, 0, 0, 0.1)"},o=n?"translateY(0)":"translateY(100vh)";return s.height=e?"100vh":"",t&&i&&(s={...s,width:425,left:"50%",transform:"translateX(-50%)"},o=n?"translate(-50%, 0)":"translate(-50%, 100vh)"),{__style:{...s,transition:"all 225ms cubic-bezier(0.0,0.0,0.2,1) 500ms",transform:o}}}},779685(e,t,n){n.d(t,{A:()=>i});function i(e){if(!e)return!1;let t=new Date(e);return t.setDate(t.getDate()+28),new Date().getTime()<t.getTime()}},612921(e,t,n){n.d(t,{A:()=>i});function i(e,t,n=28){if(!e?.resurrection_info&&!(t?.isAuth&&t.resurrectionInfo))return!1;let r=t?t.isAuth&&t.resurrectionInfo?.resurrectionDate:e?.resurrection_info?.resurrection_dt,s=new Date,o=r?new Date(r):s;return o.setDate(o.getDate()+n),new Date().getTime()<o.getTime()}},439261(e,t,n){n.d(t,{A:()=>i});let i={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,F5:116,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}},198694(e,t,n){n.d(t,{A:()=>function e(t,n=!1){return r=>{if(!(0,i.A)(r))if(n&&Array.isArray(r))return r.map(e(t,n));else return r;let s={};return Object.keys(r).forEach(o=>{let a=t(r[o],o);(0,i.A)(r[o])||n&&Array.isArray(r[o])?s[a]=e(t,n)(r[o]):s[a]=r[o]}),s}}});var i=n(185511)},606815(e,t,n){n.d(t,{A:()=>r});var i=n(198694);function r(e,t=!1){let n=(t,n)=>e(n);return e=>(0,i.A)(n,t)(e)}},4914(e,t,n){n.d(t,{r:()=>i});let i={REGISTRATION:"registration",SETTINGS:"settings",GOOGLE_PEOPLE_API:"google_people_api",HOLISTIC_PROFILE_PROMPT:"holistic_profile_prompt",IN_APP_BIRTHDAY_PROMPT:"in_app_birthday_prompt",FIX_EMAIL_PROMPT:"fix_email_prompt",NUX:"nux",BUSINESS_HUB:"business_hub",UNKNOWN:"unknown"}},498395(e,t,n){n.d(t,{A:()=>c});var i=n(335831),r=n(859471),s=n(439261),o=n(479381),a=n(562615);let l=()=>{};function c({allowClickAndDrag:e,allowEsc:t,allowMediaPlay:n,allowScroll:c,children:d}){(0,r.useEffect)(()=>{(0,i.A)("StopEventPropagation","/app/packages/stop-event-propagation/StopEventPropagation.tsx")},[]);let p=e=>{t&&e.keyCode===s.A.ESCAPE||(0,o.A)(e)};return(0,a.jsx)("div",{onAbort:o.A,onAnimationEnd:o.A,onAnimationIteration:o.A,onAnimationStart:o.A,onBlur:l,onCanPlay:n?l:o.A,onCanPlayThrough:o.A,onChange:o.A,onClick:e?l:o.A,onCompositionEnd:o.A,onCompositionStart:o.A,onCompositionUpdate:o.A,onContextMenu:o.A,onCopy:o.A,onCut:o.A,onDoubleClick:o.A,onDurationChange:o.A,onEmptied:o.A,onEncrypted:o.A,onEnded:o.A,onError:o.A,onFocus:l,onInput:o.A,onInvalid:o.A,onKeyDown:p,onKeyPress:p,onKeyUp:p,onLoad:o.A,onLoadedData:o.A,onLoadedMetadata:o.A,onLoadStart:o.A,onMouseDown:o.A,onMouseEnter:o.A,onMouseLeave:o.A,onMouseMove:e?l:o.A,onMouseOut:o.A,onMouseOver:o.A,onMouseUp:e?l:o.A,onPaste:o.A,onPause:o.A,onPlay:o.A,onPlaying:o.A,onProgress:o.A,onRateChange:o.A,onScroll:c?l:o.A,onSeeked:o.A,onSeeking:o.A,onSelect:o.A,onStalled:o.A,onSubmit:o.A,onSuspend:o.A,onTimeUpdate:o.A,onTouchCancel:o.A,onTouchEnd:e?l:o.A,onTouchMove:e?l:o.A,onTouchStart:e?l:o.A,onTransitionEnd:o.A,onVolumeChange:o.A,onWaiting:o.A,onWheel:o.A,children:d})}},479381(e,t,n){n.d(t,{A:()=>i});let i=e=>{e.stopPropagation(),e.nativeEvent&&e.nativeEvent.stopImmediatePropagation&&e.nativeEvent.stopImmediatePropagation()}},901787(e,t,n){n.d(t,{A:()=>d});var i=n(335831),r=n(859471),s=n(836737),o=n(38316),a=n(396901),l=n(538346),c=n(562615);function d({color:e="dark",completeButtonText:t,completeUrl:n,dismissButtonText:d,experienceId:p,external:u,message:h,onComplete:m,onDismiss:x}){(0,r.useEffect)(()=>{(0,i.A)("Banner","/app/packages/ui/Banner.tsx")},[]);let f=(0,a.A)(),g=(0,r.useRef)(null),_=h&&!t,y=500735===p,b=t&&(!n||y)&&(0,c.jsx)(s.$n,{color:"tertiary",onClick:({event:e})=>{m&&m(e)},text:t}),v=t&&n&&(0,c.jsx)(o.A,{anchor:".HomeButton2",anchorElementRef:g.current,containerBoxConfig:{display:"flex",height:"100%"},children:(0,c.jsx)(s.vx,{ref:g,accessibilityLabel:t,color:"tertiary",href:n,onClick:({event:e})=>{m&&m(e)},rel:u?"nofollow":"none",size:"md",text:t})}),E=d&&x&&(0,c.jsx)(s.az,{mdPaddingX:2,children:(0,c.jsx)(s.$n,{color:"shopping"===e?"tertiary":"secondary",onClick:({event:e})=>{x&&x(e)},text:d})}),A=_&&!y&&x&&!d&&(0,c.jsx)(s.K0,{accessibilityLabel:f._('Close', 'accessibility close label', 'accessibility close label'),bgColor:"secondary",icon:"close",iconColor:"subtle",onClick:({event:e})=>{x&&x(e)},size:"md"});return(0,c.jsxs)(s.az,{alignItems:"center",color:{dark:"washDark",shopping:"default",default:"default"}[e],dangerouslySetInlineStyle:{__style:{backgroundColor:"#dadada"}},direction:"column",display:"flex",justifyContent:"between",paddingX:6,paddingY:3,smDirection:"row",children:[(0,c.jsx)(s.az,{column:12,smColumn:_?11:8,children:(0,c.jsxs)(s.KJ,{color:"inverse",weight:y?"normal":"bold",children:[(0,c.jsx)(l.A,{unsafeCSS:".Banner--message a { color: #fff; text-decoration: underline; }"}),(0,c.jsx)("div",{className:"Banner--message",children:(0,c.jsx)("span",{dangerouslySetInnerHTML:{__html:h}})})]})}),(0,c.jsxs)(s.so,{alignItems:"center",justifyContent:"end",children:[E,b||v,A]})]})}},428743(e,t,n){n.d(t,{A:()=>r});var i=n(899187);let r=({url:e})=>!!(e&&e.match(/^https{0,1}:\/\//)&&!(0,i.A)(e))},428576(e,t,n){n.d(t,{D:()=>h,o:()=>u});var i=n(859471),r=n(106386),s=n(767216),o=n(795546),a=n(47998),l=n(779685),c=n(612921),d=n(562615);let{Provider:p,get:u}=(0,s.A)("NavFooterContext");function h({children:e}){let[t,n]=(0,i.useState)(),[s,u]=(0,i.useState)(!1),[h,m]=(0,i.useState)(!1),[x,f]=(0,i.useState)(!1),[g,_]=(0,i.useState)(!1),[y,b]=(0,i.useState)(!1),v=(0,i.useRef)(null),E=(0,r.d4)(e=>e.currentUserTracker?.savedPins?.length??o.BP.length),A=(0,c.A)(null,(0,a.A)()),w=(0,r.d4)(e=>e.session.isAuthenticated),j=(0,r.d4)(e=>w?e.users[e.session.userId]:void 0),C=(0,l.A)(j?.created_at);return(0,d.jsx)(p,{value:{completeNudgeUsersToHomeExperienceRef:v,forceShowNavFooter:g,homeFlyoutText:t,isNavFooterHiddenAfterScroll:s,isNavFooterHiddenByPinActionBar:y,navFooterHeight:s?0:w&&(A||C)?64:52,numUnauthSavedPins:E,setForceShowNavFooter:_,setHomeFlyoutText:n,setIsNavFooterHiddenAfterScroll:u,setIsNavFooterHiddenByPinActionBar:b,setShowHomeBadge:m,setShowHomeFlyoutWithButton:f,showHomeBadge:h,showHomeFlyoutWithButton:x},children:e})}},87213(e,t,n){n.d(t,{f:()=>s,n:()=>o});var i=n(836737),r=n(639706);let s=new i.K5([r.A]),o=160},639706(e,t,n){n.d(t,{A:()=>s});var i=n(836737),r=n(510149);let s=new i.K5([r.nS])},510149(e,t,n){n.d(t,{U7:()=>o,nS:()=>s,nf:()=>a,qn:()=>r});var i=n(836737);let r=2,s=new i.rk(1),o=new i.rk(1),a=new i.rk(1)},109346(e,t,n){n.d(t,{A:()=>i});function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(null,arguments)}},203632(e,t,n){function i(e,t){return(i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function r(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,i(e,t)}n.d(t,{A:()=>r})},408789(e,t,n){n.d(t,{A:()=>i});function i(e,t){if(null==e)return{};var n={};for(var i in e)if(({}).hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;n[i]=e[i]}return n}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/80316-bc9d8bae568c61a7.mjs.map