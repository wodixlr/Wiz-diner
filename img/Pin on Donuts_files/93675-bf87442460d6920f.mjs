(self.modernJsonp=self.modernJsonp||[]).push([["93675"],{321651(e,t,n){n.d(t,{$S:()=>r,IX:()=>u,ak:()=>d,d2:()=>o,j5:()=>l});var i=n(619410),a=n(594555);let r=()=>"number"==typeof window.innerHeight&&"number"==typeof window.pageYOffset&&!!document.querySelector&&!!document.querySelectorAll,o=e=>e instanceof HTMLDivElement||e instanceof HTMLVideoElement?e.getBoundingClientRect():e.parentElement instanceof HTMLElement?e.parentElement.getBoundingClientRect():null,s=e=>{if(e instanceof HTMLImageElement)return e.src;if(e instanceof HTMLVideoElement)return e.poster||null;let t=(e.style||{}).backgroundImage||"";if(!t.startsWith("url(")||!t.endsWith(")"))return null;let n=t.slice(4,-1);return(n.startsWith('"')&&n.endsWith('"')||n.startsWith("'")&&n.endsWith("'"))&&(n=n.slice(1,-1)),n||null},l=()=>document.querySelector?document.querySelectorAll(i.t$).length:((0,a.vV)("missing_document_query_selector"),0),d=()=>{let e=(()=>{if(!document.querySelector)return(0,a.vV)("missing_document_query_selector"),null;let e=document.querySelectorAll(i.t$);return e[e.length-1]||null})();if(!e)return!1;let t=window.innerHeight||0,n=window.pageYOffset||0;return e.getBoundingClientRect().top+n>=t},u=(e,t,n)=>{if(!document.querySelector)return(0,a.vV)("missing_document_query_selector"),[];let r={foldY:window.innerHeight||0,pageYOffset:window.pageYOffset||0},l=[i.os,...e?[i.x_]:[],...t?[i.Sc]:[]].join(","),d=[...document.querySelectorAll(l)];if(n){let e=[...document.querySelectorAll('div[data-test-id="board-section"]')],t=e=>{let n=[...e.children];!n.length&&e.style.backgroundImage?d.push(e):n.length&&n.forEach(e=>{t(e)})};e.forEach(e=>{t(e)})}return d.reduce((e,n)=>{if((n instanceof HTMLImageElement||n instanceof HTMLDivElement||n instanceof HTMLVideoElement&&t)&&((e,t)=>{let n=o(e);if(!n)return(0,a.vV)("missing_client_rect"),!1;if(n.width<70&&n.height<70){if(e instanceof HTMLImageElement)return!1;let t=s(e);if(t?.endsWith("svg"))return!1}return(({top:e,height:t},{foldY:n,pageYOffset:i})=>{let a=e+i;if(a>=n)return!1;let r=Math.min(t,n-a);return r>.5*t||r>.2*n})(n,t)})(n,r)){let t=s(n);if(t){let i=t.lastIndexOf("/"),a=i>=0?t.slice(i+1):t,r=a.indexOf("?"),o=r>=0?a.slice(0,r):a;return e.concat([{element:n,fileName:o}])}}return e},[])}},619410(e,t,n){n.d(t,{Sc:()=>l,lH:()=>i,os:()=>o,t$:()=>r,x_:()=>s});let i="pwt-grid-item",a=['div[data-grid-item="true"]',"div.Grid__Item",`div[data-test-id="${i}"]`],r=a.join(","),o=a.map(e=>`${e} img`).join(","),s=a.map(e=>`${e} div[style*=background-image]`).join(","),l=a.map(e=>`${e} video`).join(",")},834598(e,t,n){n.d(t,{A:()=>v,c:()=>p});var i=n(859471),a=n(532259),r=n(321651),o=n(32883),s=n(313316),l=n(75975),d=n(369022),u=n(705852),m=n(28204),c=n(711076),_=n(330958),g=n(892804);let f=(0,a.lo)("GridProfiler"),p=()=>!!window.addEventListener&&!!window.removeEventListener&&(0,r.$S)();function v({isAtEndOfFeed:e,pinData:t,includeBackgroundImages:n,includeVideos:p=!1,includeSections:v,isPlaceholderGrid:E,onVisuallyCompletePinCount:h,stopwatchSetVisuallyCompleteResult:A,stopwatchContext:w}){let I=(0,c.lj)(),[N,R]=(0,i.useState)({status:"DISABLED"});(0,i.useEffect)(()=>{R({status:"LAYOUT",failedCount:0,numOfItemsChecked:0})},[I]),(0,i.useEffect)(()=>{if(f("new status",N),"LAYOUT"===N.status){var e,t;let n,i=(e="scroll",t=()=>{(0,l.A)("scrollDuringLayout")},n=()=>{window.removeEventListener(e,n),t()},window.addEventListener(e,n),()=>window.removeEventListener(e,n));return()=>{i()}}return()=>{}},[N.status]),(0,_.A)(()=>{let i=(0,c.R$)(),l=()=>{},_=e=>{(0,s.A)(e),w&&w?.abort(),A&&A({result:"ABORT"})};"unknown"!==i?l=m.tL:(i=`${w?.name}`,w?.addBinaryAnnotation&&(l=w?.addBinaryAnnotation));let I=(0,r.IX)(n,p,v);if(E)return void f("bypassing PWT run due to skeleton pin grid");switch(N.status){case"LAYOUT":{let t=((e,t)=>{if(!t){let t=(0,r.j5)();if(t===e)return f("No new items, so skip the viewport-fill check."),{complete:!1,numOfItemsChecked:e};if(!(0,r.ak)())return f("Viewport may not be filled yet."),{complete:!1,numOfItemsChecked:t}}return{complete:!0}})(N.numOfItemsChecked,e);t.complete?R({status:"TIMING",failedCount:0,pinElements:I}):500*N.failedCount>6e4?((0,u.pI)({eventName:`images.${i}.visuallyComplete.maxLayoutAttempt`}),_("visuallyComplete_layoutTimeout"),R({status:"DISABLED"})):R({...N,failedCount:N.failedCount+1,numOfItemsChecked:t.numOfItemsChecked});break}case"TIMING":{let e=(0,o.Fm)(),n=N.pinElements.length,r=[],s=0,m=0,c=0,p=1/0,v=0;if(N.pinElements.forEach(({element:t,fileName:n})=>{let i=e.find(e=>e.name.endsWith(n));i?i.responseEnd?(r.push(i),(0,a.Gp)(t,"green"),p=Math.min(p,i.requestStart),v=Math.max(v,i.responseEnd)):(c+=1,(0,a.Gp)(t,"blue")):t instanceof HTMLImageElement&&t.complete?(m+=1,(0,a.Gp)(t,"red")):(s+=1,(0,a.Gp)(t,"greenyellow"))}),s||c)100*N.failedCount>6e4?((0,u.pI)({eventName:`images.${i}.visuallyComplete.maxAttempt`,tags:{totalImageCount:n,incompleteCount:s,noTimingCount:m,noTimingResponseEndCount:c}}),_("visuallyComplete_timingTimeout"),R({status:"DISABLED"})):R({...N,failedCount:N.failedCount+1});else{if(f(`All ${r.length} images are fetched`),h?.(n),t&&t.length){var T,S;let e,n,a,r,o,s=(T=t,S=N.pinElements,e=0,n=0,a=0,r=0,o=0,T=T.filter(e=>"pin"===e.type),S.forEach((t,i)=>{let s,l=t.fileName.split(".")[0];s=T[i],l!==s?.image_signature&&(s=T.find(e=>l===e?.image_signature)),void 0===s?o+=1:s.is_promoted||s.recommendation_reason?.reason==="PROMOTED_PIN"||s?.promoter?a+=1:null!==s.story_pin_data_id&&void 0!==s.story_pin_data_id?e+=1:s?.videos?.video_list?n+=1:r+=1}),{storyPinCount:e,videoCount:n,adCount:a,imageCount:r,unknownCount:o});if(Object.entries(s).forEach(([e,t])=>{l(e,t,"I16"),(0,d.kN)(e,t,"I16")}),(0,u.pI)({eventName:`${i}.pinTypes`,tags:s}),"SEARCH_FEED_RENDER"===i){let e=v-p;t[0].display_options?.num_columns_requested===0?(0,g.N9)("full_width_story_image_fetch_time_true",e,{sampleRate:1}):(0,g.N9)("full_width_story_image_fetch_time_false",e,{sampleRate:.05})}}(({imageTimings:e})=>{A&&A({result:"COMPLETE"}),(0,d.Cf)(e)})({imageTimings:r}),R({status:"DISABLED"}),(0,u.pI)({eventName:`images.${i}.visuallyComplete.complete`,tags:{totalImageCount:n,noTimingCount:m}}),(0,u.AJ)({eventName:`images.${i}.visuallyComplete.timing`,value:Math.round(v)})}}}},"LAYOUT"===N.status&&500||"TIMING"===N.status&&100||null)}},313316(e,t,n){n.d(t,{A:()=>d});var i=n(276013),a=n(850855),r=n(457983),o=n(705852),s=n(711076),l=n(834382);function d(e){if(!(0,r.A)())return;let t=(0,s.mw)();if(t){let n=[...(0,s.e0)(),...t.annotateExperiments||[]],r=(0,s.uS)();(0,o.HF)({abortReason:e,pwtName:t.name,annotateExperiments:n}),r.forEach(e=>{(0,o.SR)(e,t?.name)});let d=(0,l.tQ)(),u={type:"surface",surface:t.name,id:t.id,navigationType:(0,s.Fg)(),isAuthenticated:d.isAuthenticated},m=(0,i.R)({reason:e,annotateExperiments:n,annotations:{},binaryAnnotations:(0,s.EZ)(),constraintMap:(0,s.Qh)(),endTime:performance.now(),imageTimings:(0,s.XA)(),isV4Logger:!0,metricId:u,pwtMeasures:(0,s.vs)(),pwtStaticContext:d,startTime:(0,s.Wj)(),traceId:(0,s.v5)(),spans:[]});(0,o.cY)(`Abort ${t.name} PWT. Abort reason: ${e}`),(0,o.cY)("Result:",m),(0,a.A)({metricId:u,pwtStaticContext:d,result:m,isV4Logger:!0,annotateExperiments:n}),(0,s.sq)()}}},237698(e,t,n){n.d(t,{A:()=>o});var i=n(834382);let a=!1,r=null;function o(e){if(a)return;r=e;let t=window.innerHeight,n=window.innerWidth,o=()=>{let e=(0,i.tQ)(),s=Math.abs(window.innerHeight-t),l=window.innerHeight!==t,d=window.innerWidth!==n;if("phone"===e.deviceType&&(!d&&l&&s<=150||!l&&!d)||"desktop"===e.deviceType&&!l&&!d){window.removeEventListener("resize",o),a=!1;return}r?.("windowResized"),window.removeEventListener("resize",o),a=!1};window.addEventListener("resize",o),a=!0}},949457(e,t,n){n.d(t,{A:()=>o});var i=n(457983),a=n(705852),r=n(711076);function o(e,t,n){let o;if((0,i.A)()){switch(n){case"BOOL":o={type:"BOOL",value:"boolean"==typeof t?t:null};break;case"STRING":o={type:"STRING",value:"string"==typeof t?t:null};break;case"I16":case"I32":case"I64":o={type:n,value:"number"==typeof t?t:null};break;default:(0,a.cY)("Invalid binary annotation type");return}if(null===o.value)return void(0,a.cY)("Invalid binary annotation value");(0,r.Oh)(e,o),(0,a.cY)(`Add binary annotation: { ${e}: ${o.value} }`)}}},402220(e,t,n){n.d(t,{A:()=>l});var i=n(457983),a=n(705852),r=n(711076),o=n(810391),s=n(905686);function l(e,t){if(!(0,i.A)())return;let n=(0,r.mw)();if(n){let i=(0,r.uS)(),l=i.indexOf(e);l>-1&&((0,r.qu)()<t&&(0,r.yg)(t),(0,r.$I)(e,t),(0,a.Nr)(i[l],n?.name),(0,a.AJ)({eventName:`${n?.name}.constraint.${e}`,value:t}),(0,a.AJ)({eventName:`constraint.${e}`,value:t,tags:{handler:(0,s.q)()}}),(0,a.cY)(`Complete constraint: ${e} at ${Math.floor(t)}ms`),(0,o.A)(e))}else{let n=(0,r.HX)();n[e]||(n[e]=t)}}},672585(e,t,n){n.d(t,{A:()=>l,W:()=>d});let i=[{handler:"sterling/advertiser/[advertiserId]/audiences.js",config:{dWeb:{auth:{clientNavigation:{name:"STERLING_AUDIENCES_PAGE_USER_NAV",id:224,constraints:["NavigationCompletev4","audiencesTableRendered"]}}}}},{handler:["sterling/advertiser/[advertiserId]/ads/edit.js"],config:{dWeb:{auth:{initialPageLoad:{name:"STERLING_ADSEDIT_MAIN_PAGELOAD",id:204,constraints:["NavigationCompletev4","editFlowRendered"]},clientNavigation:{name:"STERLING_EDIT_FLOW_USER_NAV",id:225,constraints:["NavigationCompletev4","editFlowRendered"]}}}}},{handler:["sterling/advertiser/[advertiserId]/ads/create.js","sterling/advertiser/[advertiserId]/ads/duplicate.js"],config:{dWeb:{auth:{initialPageLoad:{name:"STERLING_ADSCREATE_MAIN_PAGELOAD",id:204,constraints:["NavigationCompletev4","createFlowRendered"]},clientNavigation:{name:"STERLING_ADSCREATE_USER_NAV",id:233,constraints:["NavigationCompletev4","createFlowRendered"]}}}}},{handler:"sterling/advertiser/[advertiserId]/reporting/[entityType].js",config:{dWeb:{auth:{initialPageLoad:{name:"STERLING_REPORTING_DETAILS_PAGELOAD",id:218,constraints:["NavigationCompletev4","reportingTableRendered","reportingMetricsGraphDataFetched"]},clientNavigation:{name:"STERLING_REPORTING_DETAILS_USER_NAV",id:227,constraints:["NavigationCompletev4","reportingTableRendered","reportingMetricsGraphDataFetched"]}}}}},{handler:"sterling/advertiser/[advertiserId].js",config:{dWeb:{auth:{initialPageLoad:{name:"STERLING_REPORTING_OVERVIEW_PAGELOAD",id:219,constraints:["NavigationCompletev4","activeCampaignsTableRendered","accountActivityRendered"]},clientNavigation:{name:"STERLING_REPORTING_OVERVIEW_USER_NAV",id:226,constraints:["NavigationCompletev4","activeCampaignsTableRendered","accountActivityRendered"]}}}}},{handler:["sterling/advertiser/[advertiserId]/bulk_editor/[page].js"],config:{dWeb:{auth:{initialPageLoad:{name:"STERLING_BULKEDITOR_HISTORY_PAGELOAD",id:231,constraints:["NavigationCompletev4","bulkHistoryRendered"]},clientNavigation:{name:"STERLING_BULKEDITOR_HISTORY_USER_NAV",id:232,constraints:["NavigationCompletev4","bulkHistoryRendered"]}}}}}],a=[{handler:["www/pin/[id]/sent.js","www/pin/[id].js"],config:{mWeb:{unauth:{initialPageLoad:{name:"PIN_PAGE_INTERACTIVE",id:113,constraints:["ReduxStoreInitialized","PinPageMainImageRendered"]},clientNavigation:{name:"client_route_push_unauth_pin",id:null,constraints:["PinPageMainImageRendered"]}},auth:{initialPageLoad:{name:"initial_page_load_auth_pin",id:null,constraints:["ReduxStoreInitialized","PinPageMainImageRendered"],annotateExperiments:["auth_mweb_graphql_pin_page"]},clientNavigation:{name:"PIN_CLOSEUP_DETAILS",id:13,constraints:["PinPageMainImageRendered"],annotateExperiments:["auth_mweb_graphql_pin_page","closeup_dweb_side_by_side_redesign_fast_follow"]}}},dWeb:{unauth:{initialPageLoad:{name:"PIN_PAGE_INTERACTIVE",id:113,constraints:["ReduxStoreInitialized","PinPageMainImageRendered"]},clientNavigation:{name:"client_route_push_unauth_pin",id:null,constraints:["PinPageMainImageRendered"]}},auth:{initialPageLoad:{name:"initial_page_load_auth_pin",id:null,constraints:["ReduxStoreInitialized","image","resource","button"],segments:{product_detail_page:{name:"PRODUCT_DETAILS_INTERACTIVE"},product_detail_page_plus:{name:"PRODUCT_DETAILS_PLUS_INTERACTIVE"}}},clientNavigation:{name:"PIN_CLOSEUP_DETAILS",id:13,constraints:["button","image","resource"],segments:{story_pin:{name:"STORY_PIN_CLOSEUP",constraints:["button","resource","image","video"]},product_detail_page:{name:"PRODUCT_DETAILS_RENDER",constraints:["button","description","image","shopButton","thumbnailsLoaded"]},product_detail_page_plus:{name:"PRODUCT_DETAILS_PLUS_RENDER",constraints:["button","description","image","shopButton","thumbnailsLoaded"]}}}}}}},{handler:["www/index.js","www/homefeed.js"],config:{unified:{auth:{initialPageLoad:{name:"HOME_FEED_PINTERACTIVE",id:19,constraints:["ReduxStoreInitialized","VisuallyComplete"],annotateExperiments:["web_sw_with_early_hydration","web_install_sw_on_unauth_landing","web_sw_early_registration"]},clientNavigation:{name:"HOME_FEED_RENDER",id:2,constraints:["VisuallyComplete"]}}}}},{handler:"www/search/[scope].js",config:{unified:{auth:{clientNavigation:{name:"SEARCH_FEED_RENDER",id:3,constraints:["VisuallyComplete"]}}}}},{handler:"www/search.js",config:{mWeb:{auth:{clientNavigation:{name:"SEARCH_TAB_RENDER",id:25,constraints:["RenderSearchLandingPageBubbles"]}}}}},{handler:"www/[username]/[slug].js",config:{unified:{unauth:{initialPageLoad:{name:"BOARD_PAGE_INTERACTIVE",id:114,constraints:["ReduxStoreInitialized","VisuallyComplete"]}},auth:{initialPageLoad:{name:"initial_app_load_auth_board",id:null,constraints:["ReduxStoreInitialized","VisuallyComplete"]},clientNavigation:{name:"client_route_push_auth_board",id:null,constraints:["VisuallyComplete"]}}}}},{handler:"www/for-you/[boardId].js",config:{unified:{auth:{initialPageLoad:{name:"AUTOMAGICAL_BOARD_PAGE_INTERACTIVE",id:129,constraints:["ReduxStoreInitialized","VisuallyComplete"]}}}}},{handler:"www/ideas/[interest]/[id].js",config:{unified:{unauth:{initialPageLoad:{name:"TOPIC_PAGE_INTERACTIVE",id:119,constraints:["ReduxStoreInitialized","idea_module_loaded"]}}}}},{handler:"www/business/hub.js",config:{dWeb:{auth:{initialPageLoad:{name:"BIZHUB_PINTERACTIVE",id:607,constraints:["ReduxStoreInitialized"]},clientNavigation:{name:"BIZHUB_PAGE_RENDER",id:608,constraints:["NavigationCompletev4"]}}}}},{handler:"www/pin/[id]/visual-search.js",config:{dWeb:{auth:{initialPageLoad:{name:"VISUAL_SEARCH_PAGE_RENDER",id:44,constraints:["VisualSearchImageRender","VisualSearchFeedRender"]},clientNavigation:{name:"VISUAL_SEARCH_PAGE_RENDER",id:44,constraints:["VisualSearchImageRender","VisualSearchFeedRender"]}}}}},{handler:["www/[username].js","www/[username]/_boards.js","www/[username]/_created.js","www/[username]/_saved.js","www/[username]/_pins.js","www/[username]/_profile.js"],config:{unified:{auth:{initialPageLoad:{name:"OTHER_PROFILE_PAGE_LOAD",id:122,constraints:["ReduxStoreInitialized","VisuallyComplete"],segments:{self_profile:{name:"SELF_PROFILE_PAGE_LOAD"},other_profile_no_pins:{name:"OTHER_PROFILE_NO_PINS_PAGE_LOAD"},own_profile_no_pins:{name:"OWN_PROFILE_NO_PINS_PAGE_LOAD"},own_profile:{name:"OWN_PROFILE_PAGE_LOAD"}}},clientNavigation:{name:"OTHER_PROFILE",id:15,constraints:["VisuallyComplete"],segments:{self_profile:{name:"SELF_PROFILE"},own_profile:{name:"OWN_PROFILE"},own_profile_no_pins:{name:"OWN_PROFILE_NO_PINS"},other_profile_no_pins:{name:"OTHER_PROFILE_NO_PINS"}}}},unauth:{initialPageLoad:{name:"USER_PAGE_INTERACTIVE",id:115,constraints:["ReduxStoreInitialized","VisuallyComplete"]}}}}},{handler:"www/business/catalogs/[catalog_id]/data-sources.js",config:{dWeb:{auth:{clientNavigation:{name:"MERCHANT_CATALOGS_DATA_SOURCES_USER_NAV",id:228,constraints:["NavigationCompletev4"]}}}}},{handler:"www/business/catalogs/[catalog_id]/product-groups.js",config:{dWeb:{auth:{clientNavigation:{name:"MERCHANT_CATALOGS_PRODUCT_GROUPS_USER_NAV",id:229,constraints:["NavigationCompletev4"]}}}}},{handler:"www/business/catalogs/[catalog_id]/listings.js",config:{dWeb:{auth:{clientNavigation:{name:"MERCHANT_CATALOGS_LISTINGS_USER_NAV",id:230,constraints:["NavigationCompletev4"]}}}}},{handler:"www/business/catalogs/[catalog_id]/products.js",config:{dWeb:{auth:{clientNavigation:{name:"MERCHANT_CATALOGS_LISTINGS_USER_NAV",id:230,constraints:["NavigationCompletev4"]}}}}},{handler:"www/collage-creation-tool.js",config:{dWeb:{auth:{initialPageLoad:{name:"COLLAGE_CREATION_PAGE_LOAD",id:130,constraints:["ReduxStoreInitialized","VisuallyComplete"]},clientNavigation:{name:"COLLAGE_CREATION_USER_NAV",id:53,constraints:["VisuallyComplete"]}}}}}];var r=n(705852),o=n(905686);let s=[...a,...i];function l({isAuthenticated:e,isInitialPageLoad:t,isMobile:n}){let i=(0,o.q)(),a=s.find(e=>Array.isArray(e.handler)?e.handler.includes(i):i===e.handler),l=a?.config,d=l?.unified;if(d||(d=n?l?.mWeb:l?.dWeb),d){let n=e?d.auth:d.unauth;if(n){if(t&&n.initialPageLoad)return(0,r.cY)("Found isInitialPageLoad config"),(0,r.cY)(n.initialPageLoad),{...n.initialPageLoad};else if(!t&&n.clientNavigation)return(0,r.cY)("Found clientNavigation config"),(0,r.cY)(n.clientNavigation),{...n.clientNavigation}}}return(0,r.cY)(`No config found for ${i} :(`),null}let d=({isAuthenticated:e,isInitialPageLoad:t,isMobile:n,segment:i})=>{let a=l({isAuthenticated:e,isInitialPageLoad:t,isMobile:n});return("DEFAULT"===i?a?.name:a?.segments?.[i]?.name)??null}},369022(e,t,n){n.d(t,{sq:()=>E,aA:()=>h,Ay:()=>I,kF:()=>w,kN:()=>o.A,Cf:()=>A});var i=n(313316),a=n(515289),r=n(237698),o=n(949457),s=n(75975),l=n(327336),d=n(457983),u=n(402220),m=n(672585),c=n(705852),_=n(770183),g=n(711076),f=n(810391),p=n(834382),v=n(905686);function E(){(0,c.cY)("Reset PWT configs"),(0,g.sq)(),(0,_.vz)()}function h(e){if(!(0,d.A)())return;let t=(0,g.mw)(),n=(0,g.uS)();t?((0,c.S2)(e,t.name),n.includes(e)||((0,g.XX)(e),(0,c.cY)(`Add constraint: ${e}`))):(0,c.J6)({errorName:"add_constraint_while_no_PWT_in_progress",errorDetailsTag:e})}function A(e){if(!(0,d.A)())return;let t=(0,g.mw)(),n=(0,g.uS)();if(t&&n.includes("VisuallyComplete"))if((0,c.cY)("Set visually complete result"),(0,c.cY)("Image resource timings: ",e),(0,g.R9)(e),0===e.length)(0,i.A)("visuallyComplete_noImages");else{let t=Math.max(...e.map(e=>e.responseEnd||0));performance.mark("complete_constraint__VisuallyComplete",{startTime:t}),(0,l.A)("constraint__VisuallyComplete",(0,g.Wj)(),t)}}function w(e){if(!(0,d.A)())return;let t=(0,g.mw)(),n=(0,g.e0)(),i=(0,g.Fg)();if(t&&t.name.toLowerCase()!==e.toLowerCase()){let a=[...n,...t.annotateExperiments||[]],{isAuthenticated:r,deviceType:o}=(0,p.tQ)(),s=(0,m.W)({isAuthenticated:r,isInitialPageLoad:"initial_app_load"===i,isMobile:"phone"===o,segment:e});if(!s){(0,c.cY)(`Segment action name not found for segment: ${e}`),(0,c.J6)({errorName:"segment_action_name_not_found",errorDetailsTag:e});return}(0,c.HF)({abortReason:"segmentChange",pwtName:t.name,annotateExperiments:a});let{segments:l,constraints:d}=t,u=l?.[e],_=u?.constraints;if(_){let e=new Set(_),t=new Set(d);[...(0,g.uS)()].forEach(t=>{e.has(t)||(0,f.A)(t)}),_.forEach(e=>{t.has(e)||h(e)}),(0,g.nz)(e)}t.name=s,(0,c.cY)(`Set segment to ${e}. PWT action name: ${s}`),(0,c.Lc)({pwtName:t.name,annotateExperiments:[...n,...t.annotateExperiments||[]]})}else(0,c.J6)({errorName:"set_segment_while_no_PWT_in_progress",errorDetailsTag:e})}function I({requestContext:e}){try{var t;if(!(0,d.A)())return void(0,c.pI)({eventName:"unsupportedPWTBrowser"});(0,c.pI)({eventName:"supportedPWTBrowser"}),"function"==typeof performance?.setResourceTimingBufferSize&&e.experimentsClient?.checkExperiment("web_pwt_grid_profiler_v2")?.anyEnabled&&performance.setResourceTimingBufferSize(500),(0,r.A)(i.A),t=i.A,a.A.onSessionPause(()=>t("sessionPaused"));let n=new PerformanceObserver(e=>{e&&e.getEntries&&e.getEntries().forEach(e=>{if(e&&e.name&&!e.name.startsWith("--")){if(e.name.includes("complete_constraint__"))(0,u.A)(e.name.split("complete_constraint__")[1]||"",e.startTime);else if(e.name.startsWith("pwt__")){let t=e.name.slice(5);(0,_.Wg)()[t]||(0,_.ht)(t,{name:t,entryType:e.entryType,startTime:e.startTime,duration:e.duration})}}})});n.observe&&n.observe({type:"mark",buffered:!0});let o=new PerformanceObserver(e=>{e&&e.getEntries&&e.getEntries().forEach(e=>{if(e&&e.name&&!e.name.startsWith("--")){let t=(0,g.vs)();if(e.name.startsWith("pwt__")){let n=e.name.slice(5);t[n]||(t[n]={name:n,entryType:e.entryType,startTime:e.startTime,duration:e.duration})}}})});o.observe&&o.observe({type:"measure",buffered:!0});let m=new PerformanceObserver(e=>{e.getEntries().forEach(e=>{let{rtt:t}=window.navigator.connection||{};if(t&&"number"==typeof t){let n=e.responseEnd-t/2;n>0&&(0,s.A)("client_chunkEndTime",n)}(0,l.A)("dom_complete",e.startTime,e.domComplete),(0,l.A)("dom_interactive",e.startTime,e.domInteractive),(0,l.A)("dom_content_loaded_event_end",e.startTime,e.domContentLoadedEventEnd),(0,l.A)("load_event_end",e.startTime,e.loadEventEnd),(0,l.A)("response_start",e.startTime,e.responseStart),(0,l.A)("response_duration",e.responseStart,e.responseEnd)})});m.observe&&m.observe({type:"navigation",buffered:!0});let f=new PerformanceObserver(e=>{e.getEntries().forEach(e=>{!(0,g.YH)()[e.identifier]&&((0,g.$G)(e.identifier,e),(e.identifier.includes("MainPinImage")||e.identifier.includes("closeupImage"))&&((0,l.A)(`element_timing_${e.identifier}`,0,e.renderTime),(0,s.A)(`element_timing_${e.identifier}`,e.renderTime)))})});f.observe({type:"element",buffered:!0});let p=[];e.experimentsClient?.checkExperiment("web_soft_navigation_origin_trial")?.anyEnabled&&(p=function(){let e=[];try{let t=new PerformanceObserver(e=>{for(let t of e.getEntries()){let{navigationId:e}=t;e&&(0,c.AJ)({eventName:"soft_navigation",value:t.duration,tags:{navigationId:String(e),handler:(0,v.q)()}})}});t.observe({type:"soft-navigation",includeSoftNavigationObservations:!0,buffered:!0}),e.push(t);let n=new PerformanceObserver(e=>{for(let t of e.getEntries()){let{navigationId:e}=t;e&&(0,c.AJ)({eventName:"soft_navigation.first_contentful_paint",value:t.startTime,tags:{navigationId:String(e),handler:(0,v.q)()}})}});n.observe({type:"first-contentful-paint",includeSoftNavigationObservations:!0,buffered:!0}),e.push(n);let i=new PerformanceObserver(e=>{for(let t of e.getEntries()){let{navigationId:e}=t;e&&(0,c.AJ)({eventName:"soft_navigation.largest_contentful_paint",value:t.startTime,tags:{navigationId:String(e),size:String(t.size??0),handler:(0,v.q)()}})}});i.observe({type:"largest-contentful-paint",includeSoftNavigationObservations:!0,buffered:!0}),e.push(i);let a=new PerformanceObserver(e=>{for(let t of e.getEntries()){let{navigationId:e,renderTime:n,loadTime:i,size:a}=t;e&&(0,c.AJ)({eventName:"soft_navigation.interaction_contentful_paint",value:n??i??t.startTime,tags:{navigationId:String(e),size:String(a??0),handler:(0,v.q)()}})}});a.observe({type:"interaction-contentful-paint",includeSoftNavigationObservations:!0,buffered:!0}),e.push(a);let r=new PerformanceObserver(e=>{for(let t of e.getEntries()){let{navigationId:e,value:n}=t;e&&(0,c.Be)({eventName:"soft_navigation.layout_shift",value:(n??0)*1e3,tags:{navigationId:String(e),handler:(0,v.q)()}})}});r.observe({type:"layout-shift",includeSoftNavigationObservations:!0,buffered:!0}),e.push(r);let o=new PerformanceObserver(e=>{for(let t of e.getEntries()){let{navigationId:e}=t;e&&(0,c.AJ)({eventName:"soft_navigation.event_timing",value:t.duration,tags:{navigationId:String(e),name:t.name,handler:(0,v.q)()}})}});o.observe({type:"event-timing",includeSoftNavigationObservations:!0,buffered:!0}),e.push(o),(0,c.cY)("Soft navigation observers initialized")}catch(e){(0,c.J6)({errorName:e})}return e}()),window.addEventListener("beforeunload",()=>{n.disconnect(),m.disconnect(),f.disconnect(),p.forEach(e=>e.disconnect())})}catch(e){(0,c.J6)({errorName:e instanceof Error?e.message:String(e)})}(0,g.Yp)(e.experimentsClient?.checkExperiment("web_log_generic_feed_pwt")?.anyEnabled??!1)}},28204(e,t,n){n.d(t,{$Q:()=>_,JT:()=>g,Qj:()=>c,Uy:()=>m,oV:()=>f,tL:()=>p});var i=n(859471),a=n(313316),r=n(949457),o=n(327336),s=n(457983),l=n(369022),d=n(711076),u=n(810391);let m=(e,t)=>{(0,s.A)()&&(t?performance.mark(`complete_constraint__${e}`,{startTime:t}):performance.mark(`complete_constraint__${e}`),(0,o.A)(`constraint__${e}`,(0,d.Wj)(),t??performance.now()))},c=e=>{(0,a.A)(e)},_=e=>{(0,u.A)(e)},g=e=>{(0,l.kF)(e)},f=e=>{(0,i.useEffect)(()=>{(0,l.kF)(e)},[e])},p=(e,t,n)=>{(0,r.A)(e,t,n)}},810391(e,t,n){n.d(t,{A:()=>g});var i=n(775816),a=n(276013),r=n(850855),o=n(132460),s=n(949457),l=n(457983),d=n(705852),u=n(770183),m=n(711076),c=n(834382),_=n(905686);function g(e){if(!(0,l.A)())return;let t=(0,m.mw)();if(t){let n=(0,m.uS)().indexOf(e);if(n>-1){if((0,m.PX)(n),(0,d.cY)(`Remove constraint: ${e}. Remaining constraints: [${(0,m.uS)().join(", ")}]`),0===(0,m.uS)().length){let e=(0,m.qu)(),n=(0,m.Wj)(),l=e-n,g=[...(0,m.e0)(),...t.annotateExperiments||[]];(0,d.ed)({pwtName:t.name,annotateExperiments:g}),(0,d.AJ)({eventName:t.name,value:l}),(0,d.AJ)({eventName:"complete",value:l,tags:{handler:(0,_.q)()}});let f=(0,c.tQ)(),p=(0,m.EZ)();if((0,m.OW)()&&(48===t.id||"FEED_RENDER"===t.name)){let e=(0,i.Cs)(),t=e?.viewType,n=e?.viewParameter;null==t||void 0===t||p["view.type"]||(0,s.A)("view.type",t,"I32"),null==n||void 0===n||p["view.parameter"]||(0,s.A)("view.parameter",n,"I32")}let v={type:"surface",surface:t.name,id:t.id,navigationType:(0,m.Fg)(),isAuthenticated:f.isAuthenticated},E=(0,m.v5)(),h=(0,a.I)({annotateExperiments:g,annotations:{},binaryAnnotations:(0,m.EZ)(),constraintMap:(0,m.Qh)(),endTime:e,imageTimings:(0,m.XA)(),isV4Logger:!0,metricId:v,pwtMeasures:(0,m.vs)(),pwtStaticContext:f,startTime:n,traceId:E,spans:[{name:`Report_PWT_Complete_${t.name}`,startTime:n,endTime:e,annotationMap:{},binaryAnnotationMap:{},id:(0,o.A)(),parentId:E}]});(0,d.cY)(`All constraints complete. ${t.name} PWT completed at ${Math.floor(e)}ms. PWT duration: ${Math.floor(l)}ms`),(0,d.cY)("Result:",h),(0,r.A)({metricId:v,pwtStaticContext:f,result:h,isV4Logger:!0,annotateExperiments:g}),(0,m.sq)(),(0,u.vz)()}}else(0,d.J6)({errorName:"constraint_completed_not_in_PWT_constraint_list",pwtName:t.name,errorDetailsTag:e})}else(0,d.J6)({errorName:"remove_constraint_while_no_PWT_in_progress",errorDetailsTag:e}),(0,m.vp)(e)}},330958(e,t,n){n.d(t,{A:()=>a});var i=n(859471);let a=(e,t)=>{let n=(0,i.useRef)(()=>{});(0,i.useEffect)(()=>{n.current=e},[e]),(0,i.useEffect)(()=>{if(null===t)return()=>{};let e=setInterval(()=>n.current(),t);return()=>clearInterval(e)},[t])}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/93675-bf87442460d6920f.mjs.map