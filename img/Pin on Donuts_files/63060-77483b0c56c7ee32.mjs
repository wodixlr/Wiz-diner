(self.modernJsonp=self.modernJsonp||[]).push([["63060"],{460744(e,t,n){n.r(t),n.d(t,{default:()=>a});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"AuthDesktopWebCloseupVideoEndCard_pin",selections:[{args:null,kind:"FragmentSpread",name:"useCalculateMaxWidthAndHeightForSideBySideVariant_pin"}],type:"Pin",abstractKey:null};i.hash="c4a51cbc26011483ff5552ff99019cdc";let a=i},538884(e,t,n){n.r(t),n.d(t,{default:()=>a});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"AuthDesktopWebCloseupVideoNonDuplo_pin",selections:[{args:null,kind:"FragmentSpread",name:"AuthDesktopWebCloseupVideoEndCard_pin"},{args:null,kind:"FragmentSpread",name:"VideoWithContextLogging_pin"},{args:null,kind:"FragmentSpread",name:"useCalculateMaxWidthAndHeightForSideBySideVariant_pin"},{args:null,kind:"FragmentSpread",name:"IdeaPinVideoScrubberDuplo_pin"}],type:"Pin",abstractKey:null};i.hash="7562478d60c54219d833414c881b75b3";let a=i},475616(e,t,n){var i;n.r(t),n.d(t,{default:()=>s});let a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"IdeaPinVideoScrubberDuplo_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,concreteType:"StoryPinData",kind:"LinkedField",name:"storyPinData",plural:!1,selections:[{alias:null,args:null,concreteType:"StoryPinPage",kind:"LinkedField",name:"pages",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"layout",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"shouldMute",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"blocks",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"blockType",storageKey:null},{alias:null,args:null,concreteType:"StoryPinVideoMetadataFormattedV2",kind:"LinkedField",name:"videoDataV2",plural:!1,selections:[{alias:"videoListMobile",args:[{kind:"Literal",name:"version",value:"V_HLSV3_MOBILE"}],concreteType:"StoryPinVideoFormatsV2",kind:"LinkedField",name:"videoList",plural:!1,selections:[{alias:null,args:null,concreteType:"VideoDetail",kind:"LinkedField",name:"vHLSV3MOBILE",plural:!1,selections:[i={alias:null,args:null,kind:"ScalarField",name:"duration",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"captionsUrls",storageKey:null}],storageKey:null}],storageKey:'videoList(version:"V_HLSV3_MOBILE")'},{alias:"videoList720P",args:[{kind:"Literal",name:"version",value:"V_720P"}],concreteType:"StoryPinVideoFormatsV2",kind:"LinkedField",name:"videoList",plural:!1,selections:[{alias:null,args:null,concreteType:"VideoDetail",kind:"LinkedField",name:"v720P",plural:!1,selections:[i],storageKey:null}],storageKey:'videoList(version:"V_720P")'}],storageKey:null}],type:"StoryPinVideoBlock",abstractKey:null}],storageKey:null}],storageKey:null}],storageKey:null},{args:null,kind:"FragmentSpread",name:"Pagination_pin"}],type:"Pin",abstractKey:null};a.hash="2f810e287a1c756ac33896e516afe9a2";let s=a},84381(e,t,n){n.r(t),n.d(t,{default:()=>a});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"Pagination_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null}],type:"Pin",abstractKey:null};i.hash="6a1efce65e0b388d5f09f256d4756b8b";let a=i},911058(e,t,n){n.r(t),n.d(t,{default:()=>a});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"StoryPinBlock_pin",selections:[{args:null,kind:"FragmentSpread",name:"StoryPinStickerBlockCloseup_pin"}],type:"Pin",abstractKey:null};i.hash="8bb1bb1f7bafeed0fe43bed44ef12d2a";let a=i},843386(e,t,n){n.r(t),n.d(t,{default:()=>a});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"StoryPinStickerBlockCloseup_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"gridTitle",storageKey:null},{alias:"images_236x",args:[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:'images(spec:"236x")'},{alias:null,args:null,concreteType:"RichPinGridData",kind:"LinkedField",name:"richSummary",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"displayName",storageKey:null},{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:[{alias:null,args:null,concreteType:"OfferSummary",kind:"LinkedField",name:"offerSummary",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"price",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"maxPrice",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],type:"Pin",abstractKey:null};i.hash="15c2890e144324504002cdfbce76ffd8";let a=i},430004(e,t,n){n.r(t),n.d(t,{default:()=>a});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"VideoWithContextLogging_pin",selections:[{args:null,kind:"FragmentSpread",name:"VideoWrapper_pin"}],type:"Pin",abstractKey:null};i.hash="93ed23334d5bac81ac8410f05c4f2031";let a=i},115328(e,t,n){n.r(t),n.d(t,{default:()=>a});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useCalculateImageContainerDimension_pin",selections:[{args:null,kind:"FragmentSpread",name:"useCalculateMaxWidthAndHeightForSideBySideVariant_pin"}],type:"Pin",abstractKey:null};i.hash="86a6c49cecdb70d77f786a1965756cf9";let a=i},957159(e,t,n){var i,a,s,o;n.r(t),n.d(t,{default:()=>r});let l=(i={alias:null,args:null,kind:"ScalarField",name:"domain",storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"link",storageKey:null},o=[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"officialUser",plural:!1,selections:s=[{alias:null,args:null,kind:"ScalarField",name:"firstName",storageKey:null}],storageKey:null}],{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useCalculateMaxWidthAndHeightForSideBySideVariant_pin",selections:[{alias:null,args:null,concreteType:"PinCarouselData",kind:"LinkedField",name:"carouselData",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"index",storageKey:null},{alias:null,args:null,concreteType:"PinCarouselSlot",kind:"LinkedField",name:"carouselSlots",plural:!0,selections:[i,a],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"closeupAttribution",plural:!1,selections:s,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"closeupUnifiedTitle",storageKey:null},i,{alias:null,args:null,kind:"ScalarField",name:"gridTitle",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isEligibleForPdp",storageKey:null},a,{alias:null,args:null,concreteType:"Domain",kind:"LinkedField",name:"linkDomain",plural:!1,selections:o,storageKey:null},{alias:null,args:null,concreteType:"UserWebsite",kind:"LinkedField",name:"linkUserWebsite",plural:!1,selections:o,storageKey:null},{alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:[{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:[{alias:null,args:null,concreteType:"OfferSummary",kind:"LinkedField",name:"offerSummary",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"price",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"standardPrice",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trackedLink",storageKey:null}],type:"Pin",abstractKey:null});l.hash="b2a27d44d1f3dbd42301b82866212272";let r=l},8137(e,t,n){n.d(t,{A:()=>l});var i=n(859471),a=n(836737),s=n(208762),o=n(562615);let l=(0,i.forwardRef)(({accessibilityControls:e,accessibilityExpanded:t,accessibilityHaspopup:n,accessibilityLabel:l,handleClick:r,icon:d,iconColor:c,iconOnly:u,onMouseEnter:p,onMouseLeave:h,testId:m,buttonText:g,tabIndex:y,bgColor:f,isActive:_,size:v},b)=>{let[x,w]=(0,i.useState)(!1),S=(0,i.useRef)(null);(0,i.useImperativeHandle)(b,()=>S.current);let{setAbortNoActionPlacementTimeout:A}=(0,s._G)(),P=()=>{w(e=>!e),r(),A(!0)},k=e=>{S&&e.target instanceof Element&&!S.current?.contains(e.target)&&w(!1)};return(0,i.useEffect)(()=>(window.addEventListener("mousedown",k),()=>{window.removeEventListener("mousedown",k)}),[]),(0,i.useEffect)(()=>{void 0!==_&&w(_)},[_]),(0,o.jsx)(a.az,{"data-test-id":m||"closeup-action-bar-button",onMouseEnter:p,onMouseLeave:h,children:(0,o.jsxs)(a.so,{alignItems:"center",justifyContent:"start",children:[(0,o.jsx)(a.K0,{ref:S,accessibilityControls:e,accessibilityExpanded:t,accessibilityHaspopup:n,accessibilityLabel:l,bgColor:f,icon:d,iconColor:c||"default",onClick:P,selected:x,size:v||(u?"md":"lg"),tabIndex:y}),g&&(0,o.jsx)(a.Rp,{onTap:P,rounding:200,children:(0,o.jsx)(a._Y,{color:"light",overflow:"normal",size:"400",children:g})})]})})})},45965(e,t,n){n.d(t,{Ay:()=>m,ru:()=>h});var i,a=n(859471);n(224989);var s=n(578576),o=n(363906),l=n(63971),r=n(838084),d=n(900565),c=n(353461),u=n(208762);let p=(void 0!==i||(i=n(115328)).hash&&"86a6c49cecdb70d77f786a1965756cf9"!==i.hash&&console.error("The definition of 'useCalculateImageContainerDimension_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),i);function h(e,t){return`${Math.floor(e/t*1e4)/1e4} / 1`}function m({carouselData:e,imageToDisplayWidthRatio:t=1,mainImage:n={width:1,height:1,url:""},maxCloseupImageWidth:i,pinKey:h,shouldPadImage:m=!1}){let g=(0,d.A)(p,h),{peekCloseupEnabled:y,viewportSize:f}=(0,u._G)(),{numericValues:_}=(0,s.Vc)(),{maxHeight:v}=(0,o.A)({pinKey:g}),{fiftyPercentHeight:b,fiftyPercentWidth:x,maxHeight:w,maxWidth:S}=_??{},{peekRedesignFastFollowsEnabled:A}=(0,l.A)(n);return(0,a.useMemo)(()=>{let a,s,o,l,d,u=i-c.Ye,p=Math.min(m?u:i,S??1/0,x??1/0),h=Math.min(...[n,...e?.carousel_slots?.map(e=>{var t;return(0,r.A)(e.images)||((t=e.videos?.video_list)?t.V_720P?.url?t.V_720P:t.V_HLSV4?.url?t.V_HLSV4:t.V_HLSV3_MOBILE?.url?t.V_HLSV3_MOBILE:t.V_HLSV3_WEB?.url?t.V_HLSV3_WEB:null:null)}).filter(e=>!!e)||[]].map(({width:e,height:t})=>(e??1)/(t??1))),g=Math.floor(p*(e?t:1)/h),_="sm"===f?b:w;a=y?_??g:"number"==typeof v?v:g;let P=A?void 0:a,k=P?Math.min(g,P):g,C=Math.min(p*(y?k/g:1),S??1/0,x??1/0),{containerAspectRatio:I,letterBoxedWidth:j,letterBoxedHeight:T}=((l=n?.width/n.height)>(d=C/k)?(s=C,o=C/l):(s=k*l,o=k),{containerAspectRatio:d,letterBoxedWidth:s,letterBoxedHeight:o});return{containerAspectRatio:I,containerHeight:k,containerWidth:C,horizontalOffset:(C-j)/2,letterBoxedHeight:T,letterBoxedWidth:j,letterBoxAspectRatio:j/T,verticalOffset:(k-T)/2}},[i,m,n,e,t,f,b,w,y,v,A,S,x])}},753233(e,t,n){n.d(t,{A:()=>i});let i=(e,t)=>{let n,{height:i=0,width:a=0}=t||{};switch(e){case"enabled_15":n=.15;break;case"enabled_25":n=.25;break;default:n=.35}return a/i<n}},216544(e,t,n){n.d(t,{A:()=>f});var i=n(335831),a=n(859471),s=n(836737),o=n(578576),l=n(363906),r=n(296377),d=n(501132),c=n(129625),u=n(396901),p=n(567787),h=n(412848),m=n(208762),g=n(562615);class y extends a.PureComponent{constructor(...e){var t,n,i;super(...e),t="startAudiblePlayTime",n=this.props.muted?null:new Date,(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in this?Object.defineProperty(this,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):this[t]=n}componentDidUpdate(e){e.muted!==this.props.muted&&(this.startAudiblePlayTime=this.props.muted?null:new Date)}componentWillUnmount(){let{musicRecordingId:e,muted:t,pinId:n,video:i}=this.props;if(e&&!t&&this.startAudiblePlayTime&&Date.now()-this.startAudiblePlayTime.getTime()>=2e3){let{hlsv3:t,mp4:a}=(0,p.A)({vEXP3:i.video_list?.V_EXP3,vEXP4:i.video_list?.V_EXP4,vEXP5:i.video_list?.V_EXP5,vEXP6:i.video_list?.V_EXP6,vEXP7:i.video_list?.V_EXP7,v720P:i.video_list?.V_720P,vHLSV3MOBILE:i.video_list?.V_HLSV3_MOBILE})||{},s=(a||t)?.duration||0;this.props.logContextEvent({event_type:8999,object_id_str:e,aux_data:{pin_id:n,story_pin_music_duration:s}})}}render(){let{activePageIndex:e,aspectRatio:t,blockHeight:n,blockWidth:i,closeupBodyWidth:a,closeupStoryPinViewability:o,closeupWithinMasonryEnabled:l,customEndCard:r,inBlendedUIExp:c,isPlaying:u,muted:h,onEnded:m,onUpdateVideoInfo:y,pageIndex:f,pin:_,pinId:v,maxHeight:b,video:x,videoThumbnailStartTime:w}=this.props,{hlsv3:S,mp4:A}=(0,p.A)({vEXP3:x.video_list?.V_EXP3,vEXP4:x.video_list?.V_EXP4,vEXP5:x.video_list?.V_EXP5,vEXP6:x.video_list?.V_EXP6,vEXP7:x.video_list?.V_EXP7,v720P:x.video_list?.V_720P,vHLSV3MOBILE:x.video_list?.V_HLSV3_MOBILE})??{},P=A||S;if(!P)return null;let{height:k,thumbnail:C,width:I}=P,j=t??(I??1)/(k??1),T={height:"100%",left:"0",top:"0",width:"100%"},E=l||c,z=l&&a&&null!=b?a/Number(b):i/n;if(!E&&Math.abs(z-j)>.01){if(z<j){let e=100*j/z;T.width=`${e}%`,T.left=`-${(e-100)/2}%`}else if(z>j){let e=100*z/j;T.height=`${e}%`,T.top=`-${(e-100)/2}%`}}let V="number"==typeof e&&f<=e+3;return(0,g.jsx)(s.az,{height:"100%",overflow:"hidden",position:"relative",width:"100%",children:(0,g.jsx)(s.az,{height:"100%",position:"absolute",width:"100%",children:V||u||w?(0,g.jsx)(s.az,{dangerouslySetInlineStyle:{__style:T},position:"absolute",children:(0,g.jsx)(d.A,{aspectRatio:c?j:l?z:t,autoplay:u,closeupStoryPinViewability:o,contextLogData:{component:0===f?227:228,element:10957,objectId:v,story_pin_page_id:f,view:3,viewParameter:157},customEndCard:r,customThumbnail:C,isMainCloseupIdeaVideo:!0,isPromoted:!1,loop:!1,muted:h,objectFit:E?"contain":"cover",onEnded:()=>{m&&m(f)},onTimeChange:({time:e})=>{y&&"number"==typeof P.duration&&P.duration>0&&y({currentTime:e,duration:P.duration/1e3})},pinId:v,pinKey:null===_?null:{type:"Legacy",data:_},preferMp4:!!A,showControls:"hover",variant:"storyPin",video:{id:x.id,hlsv3:S,mp4:A},videoThumbnailStartTime:w})}):C&&(0,g.jsx)(s._V,{alt:this.props.i18n._('Video cover image', 'closeup.storyPin.videoCover', 'cover image displayed for a video'),fit:"cover",naturalHeight:k??1,naturalWidth:I??1,src:C})})})}}function f(e){let t;(0,a.useEffect)(()=>{(0,i.A)("StoryPinVideo","/app/common/react/components/auth-desktop-web-closeup/StoryPin/StoryPinVideo.tsx")},[]);let{logContextEvent:n}=(0,c.o)(),{pin:s}=e,d=(0,u.A)(),{closeupWithinMasonryEnabled:p}=(0,m._G)(),{closeupBodyWidth:f}=(0,h.K)(),_=(0,r.A)({showProductDetailPage:!!s?.is_eligible_for_pdp}),{maxHeight:v}=(0,o.Vc)(),{maxHeight:b}=(0,l.A)({pinKey:null===s?null:{type:"Legacy",data:s},isVideo:!0}),x=_&&f?f/2:f;return _||(t=p?b:v),(0,g.jsx)(y,{...e,closeupBodyWidth:x,closeupWithinMasonryEnabled:p,i18n:d,inBlendedUIExp:_,logContextEvent:n,maxHeight:t})}},325839(e,t,n){n.d(t,{A:()=>J});var i,a,s=n(335831),o=n(859471);n(825193);var l=n(836737),r=n(45965),d=n(578576),c=n(979638),u=n(94024),p=n(129625),h=n(508765),m=n(562615);let g=({block:{block_style:{height:e=0,width:t=0,x_coord:n=0,y_coord:i=0,rotation:a=0}={},original_comment_id:r},horizontalOffset:g=0,pageAspectRatio:y,scaleFactor:f,verticalOffset:_=0})=>{(0,o.useEffect)(()=>{(0,s.A)("IdeaPinCommentReplyStickerBlock","/app/common/react/components/auth-desktop-web-closeup/StoryPin/IdeaPinCommentReplyStickerBlock.tsx")},[]);let{logContextEvent:v}=(0,p.o)(),b=d.ul/y,x=t*d.ul*f/100,w=n*d.ul*f/100+g,S=(0,c.Zp)(),{data:A}=(0,h.A)({name:"AggregatedCommentResource",options:{commentId:r,field_set_key:"comment_reply_sticker"}});return(0,m.jsx)(l.az,{dangerouslySetInlineStyle:{__style:{left:w,top:i*b*f/100+_,transform:`rotate(${a}deg)`}},display:"flex",height:e*b*f/100,margin:-1,padding:1,position:"absolute",rounding:200,width:x,zIndex:u.gJ,children:(0,m.jsx)(l.Rp,{onTap:()=>{v({event_type:102,view_type:1,component:227,element:12541,aux_data:{comment_id:r}}),A?.pin_id&&S(`/pin/${A.pin_id}/comments/${r||""}`)},rounding:"pill"})})};var y=n(120093),f=n(69451);function _({src:e,fallbackSrc:t,...n}){(0,o.useEffect)(()=>{(0,s.A)("ImageWithFallback","/app/common/react/components/auth-desktop-web-closeup/StoryPin/renderer/ImageWithFallback.tsx")},[]);let i=(0,f.A)(e);return(0,m.jsx)(y.A,{...n,src:i?e:t})}var v=n(106386);function b({isUseCache:e,signature:t}){return(0,v.d4)(({pinbuilder:n})=>{let{storyPinItemBlocks:i}=n;if(!e)return null;for(let e of Object.keys(i))if(i[e].media?.signatureEdited===t||i[e].media?.signature===t)return i[e];return null})}var x=n(988677),w=n(952935),S=n(389598),A=n(396901),P=n(719997);let k=({aggregatedCommentId:e,onDismiss:t})=>{(0,o.useEffect)(()=>{(0,s.A)("StoryPinQuestionStickerReplyModal","/app/common/react/components/auth-desktop-web-closeup/StoryPin/StoryPinQuestionStickerReplyModal.tsx")},[]);let n=(0,A.A)(),i=(0,w.A)(),a=(0,x.A)(),[r,d]=(0,o.useState)(""),c=(0,m.jsx)(l.so,{justifyContent:"end",children:(0,m.jsx)(l.$n,{color:"primary",disabled:!r,onClick:()=>{(async()=>{await a({fromUnifiedComment:!0,objectType:P.S.aggregatedComment,objectId:e,tags:"[]",text:r})})(),t()},text:n._('Post', 'ideapin.questionsticker.replymodal.postbutton', 'Post reply to creator Q&A question')})});return(0,m.jsx)(S.Ay,{accessibilityModalLabel:"reply to creator Q and A question",align:"start",footer:c,heading:n._('Reply', 'ideapin.questionsticker.replymodal', 'Reply to creator Q&A question'),onDismiss:t,children:(0,m.jsx)(l.az,{paddingX:8,paddingY:1,children:(0,m.jsx)(l.fs,{id:"ideaPinQuestionStickerReplyModalTextArea",onChange:({value:e})=>{d(e)},placeholder:i?n._('Your reply will show up as a public comment on this Pin.', 'pin.questionsticker.replymodal.placeholder', 'Placeholder for creator Q&A reply textarea'):n._('Your reply will show up as a public comment on this Idea Pin.', 'ideapin.questionsticker.replymodal.placeholder', 'Placeholder for creator Q&A reply textarea'),value:r})})})};var C=n(923957),I=n(47998),j=n(900565),T=n(410899),E=n(998053),z=n(411923);let V=(void 0!==i||(i=n(843386)).hash&&"15c2890e144324504002cdfbce76ffd8"!==i.hash&&console.error("The definition of 'StoryPinStickerBlockCloseup_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),i);function L({block:e,elementType:t,horizontalOffset:n=0,onFlyoutOpen:i,pageAspectRatio:a,pageIndex:r,pinKey:g,scaleFactor:y,tooltipElementType:f,verticalOffset:_=0,videoPinProgress:v}){(0,o.useEffect)(()=>{(0,s.A)("StoryPinStickerBlock","/app/common/react/components/auth-desktop-web-closeup/StoryPin/StoryPinStickerBlock.tsx")},[]);let{logContextEvent:b}=(0,p.o)(),[x,w]=(0,o.useState)(!1),[S,P]=(0,o.useState)(!1),L=(0,o.useRef)(null),R=(0,c.Zp)(),M=(0,A.A)(),F=(0,j.A)(V,g),D=(0,I.A)(),{block_style:{height:O=0,width:N=0,x_coord:W=0,y_coord:B=0,rotation:K=0}={},end_time:$,error_message:H,interactive_sticker_type:U=null,is_removed:G,is_valid:q,start_time:X,sticker_data:Z,type:J}=e,Y=F?.entityId,{board_id:Q,question_comment_id:ee}=Z||{},{image_small_url:et,full_name:en,username:ei=""}=e.user??{},ea=null,es=q&&5===U&&!!Q,eo=q&&7===U&&!!ee,el=(0,h.A)(Q&&es?{name:"BoardResource",options:{field_set_key:"tagged_board_preview",board_id:Q}}:null),{is_collaborative:er,pin_count:ed,url:ec}=el.data||{};J===E.Nc.PRODUCT_STICKER?ea=Y?`/pin/${Y}/`:"/":J===E.Nc.MENTION_STICKER?ea=`/${ei}/`:es&&(ea=el.isLoaded?`${ec}`:null);let eu=d.ul/a,ep=N*d.ul*y/100,eh=W*d.ul*y/100+n,{currentTime:em}=v||{},eg=!(0,z.A)({currentTime:em,endTime:$,startTime:X}),ey=()=>{b({event_type:123,component:228,element:f,view_type:3,view_parameter:157,aux_data:{story_pin_page_id:r}}),w(!1)};(0,o.useEffect)(()=>(document.addEventListener("scroll",()=>{w(!1)}),()=>document.removeEventListener("scroll",()=>{w(!1)})),[]);let ef=()=>{let e=null,t=D.isAuth?D?.avatar_color_index:void 0;switch(J){case E.Nc.PRODUCT_STICKER:let{gridTitle:n,images_236x:i,richSummary:a,description:s}=F||{},{displayName:r,products:d}=a||{},c=((d||[])[0]||{}).offerSummary||{},{price:u,maxPrice:p}=c||{},h=!!c&&(!!u||!!p),g=r||n||s;e=(0,m.jsxs)(o.Fragment,{children:[(0,m.jsx)(l.az,{flex:"none",children:(0,m.jsx)(l.n1,{height:40,rounding:300,wash:!0,width:40,children:i?.url&&(0,m.jsx)(l._V,{alt:"",color:"lightGray",fit:"cover",naturalHeight:1,naturalWidth:1,src:i.url})})}),(0,m.jsx)(l.az,{flex:"grow",paddingX:2,children:h?(0,m.jsxs)(l.so,{alignContent:"center",alignItems:"stretch",direction:"column",flex:"grow",justifyContent:"center",children:[(0,m.jsx)(l.KJ,{color:"default",lineClamp:1,size:"100",weight:"bold",children:u}),(0,m.jsx)(l.KJ,{lineClamp:1,size:"100",children:g})]}):(0,m.jsx)(l.KJ,{lineClamp:1,size:"100",children:g})}),(0,m.jsx)(l.az,{flex:"none",children:(0,m.jsx)(l.DR,{bgColor:"transparent",icon:"chevron-right",iconColor:"darkGray",size:"xs"})})]});break;case E.Nc.MENTION_STICKER:e=(0,m.jsxs)(o.Fragment,{children:[(0,m.jsx)(l.az,{flex:"none",children:(0,m.jsx)(C.eu,{color:t,name:en??"",size:"sm",src:et??void 0})}),(0,m.jsx)(l.az,{flex:"grow",paddingX:2,children:(0,m.jsx)(l.KJ,{lineClamp:1,size:"200",weight:"bold",children:en})}),(0,m.jsx)(l.az,{flex:"none",children:(0,m.jsx)(l.DR,{bgColor:"transparent",icon:"chevron-right",iconColor:"darkGray",size:"xs"})})]});break;case E.Nc.GENERIC_STICKER:e=null!==U&&[5].includes(U)?q?el.isLoaded?(0,m.jsxs)(o.Fragment,{children:[(0,m.jsxs)(l.az,{flex:"grow",paddingX:2,children:[(0,m.jsx)(l.KJ,{lineClamp:1,size:"100",weight:"bold",children:er?M._('Explore this group board', 'closeup.StoryPin.stickerBlock.boardSticker.clickLabel', 'Label explaining click action when group board tag flyout showing'):M._('Explore this board', 'closeup.StoryPin.stickerBlock.boardSticker.clickLabel', 'Label explaining click action when board tag flyout showing')}),(0,m.jsx)(l.KJ,{size:"100",children:(!!ed||0===ed)&&(0,T.vQ)(M.ngettext('{{ pinCount }} Pin', '{{ pinCount }} Pins', ed, 'closeup.StoryPin.stickerBlock.boardSticker.boardLabel', 'Caption when board tag flyout that showing number of Pins on board'),{pinCount:ed})})]}),(0,m.jsx)(l.az,{flex:"none",children:(0,m.jsx)(l.DR,{bgColor:"transparent",icon:"chevron-right",iconColor:"darkGray",size:"xs"})})]}):(0,m.jsxs)(l.az,{alignItems:"center",direction:"row",display:"flex",flex:"grow",paddingY:2,children:[(0,m.jsx)(l.az,{marginEnd:1,paddingX:2,children:(0,m.jsx)(l.KJ,{color:"subtle",lineClamp:1,size:"100",children:M._('Loading board...', 'closeup.StoryPin.stickerBlock.boardSticker.loadingText', 'Label explaining board sticker still loading')})}),(0,m.jsx)(l.y$,{accessibilityLabel:M._('Board is loading', 'closeup.StoryPin.stickerBlock.boardSticker.loadingSpinnerText', 'Accessibility label for board loading spinner'),show:!0,size:"sm"})]}):(0,m.jsx)(l.az,{paddingX:2,paddingY:2,children:(0,m.jsx)(l.KJ,{color:"subtle",lineClamp:1,size:"200",weight:"bold",children:H})}):(0,m.jsx)(l.az,{paddingX:2,paddingY:2,children:(0,m.jsx)(l.KJ,{color:"subtle",lineClamp:1,size:"200",weight:"bold",children:M._('Sticker not supported yet', 'closeup.StoryPin.stickerBlock.genericStickerError', 'Label explaining this sticker has not been implemented yet')})});break;case E.Nc.VTO_MAKEUP_STICKER:e=(0,m.jsx)(l.KJ,{size:"300",weight:"bold",children:M._('Try this sticker on your phone!', 'closeup.storyPin.vtoMakeupSticker', 'Caption when @vitural-try-on-makeup tag is tapped for Web')})}return(0,m.jsx)(l.az,{alignItems:"center","data-test-id":J,display:"flex",justifyContent:"center",padding:J===E.Nc.PRODUCT_STICKER?1:3,width:"100%",children:G?(0,m.jsx)(l.KJ,{color:"subtle",size:"200",weight:"bold",children:M._('Tag removed!', 'closeup.storyPin.stickerBlock', 'Caption when the tag is removed')}):e})};return(0,m.jsx)(o.Fragment,{children:eg?null:(0,m.jsxs)(l.az,{ref:L,dangerouslySetInlineStyle:{__style:{left:eh,top:B*eu*y/100+_,transform:`rotate(${K}deg)`}},"data-test-id":(J||"")+"_container",display:"flex",height:O*eu*y/100+2*d.GY,margin:-1,padding:1,position:"absolute",rounding:200,width:ep+2*d.GY,zIndex:u.gJ,children:[(0,m.jsx)(l.Rp,{disabled:eg,onTap:x?ey:({event:e})=>{eg||(b({event_type:101,component:228,element:t,view_type:3,view_parameter:157,aux_data:{story_pin_page_id:r}}),eo?P(!0):(({event:e})=>{b({event_type:120,component:228,element:f,view_type:3,view_parameter:157,aux_data:{error_message:!q&&H?H:null,story_pin_page_id:r}}),w(!0),i&&(e.stopPropagation(),i())})({event:e}))},rounding:"pill"}),x&&(0,m.jsx)(l.Wd,{zIndex:u.Mc,children:(0,m.jsx)(l.AM,{_deprecatedShowCaret:!0,anchor:L.current,idealDirection:"up",onDismiss:ey,positionRelativeToAnchor:!1,size:G?"flexible":"sm",children:G?ef():(0,m.jsx)(l.Rp,{fullWidth:!0,onTap:({event:e})=>{e.preventDefault(),G||(b({event_type:101,component:228,element:f,object_id_str:Y,view_type:3,view_parameter:157,aux_data:{story_pin_page_id:r}}),ea?R(ea):ey())},children:ef()})})}),!!ee&&S&&(0,m.jsx)(k,{aggregatedCommentId:ee,onDismiss:()=>{P(!1)}})]})})}var R=n(781871),M=n(411081),F=n(116060),D=n(297641);function O({block:e,fontsLoaded:t,horizontalOffset:n=0,pageAspectRatio:i,scaleFactor:a,thumbnail:r,verticalOffset:d=0}){(0,o.useEffect)(()=>{(0,s.A)("StoryPinTextBlock","/app/common/react/components/auth-desktop-web-closeup/StoryPin/StoryPinTextBlock.tsx")},[]);let{block_style:c,style:u=E.xP,text:p}=e,{alignment:h,font:g,font_size:y,highlight_color:f,vertical_alignment:_=E.xP.vertical_alignment}=u,{hex_color:v=E.xP.hex_color}=u??{},[b,x]=(0,o.useState)(0),[w,S]=(0,o.useState)([]),A=g||E.xP.font,{name:P,default_size:k,letter_spacing:C,line_height:I}=A,j=(0,D.A)(A),T=Math.round(100*(c?.width||100))/1e4,z=Math.round(100*(c?.height||100))/1e4,V=Math.round(100*(c?.x_coord||0))/1e4,L=Math.round(100*(c?.y_coord||0))/1e4;(0,o.useEffect)(()=>{if(t){let e=(0,F.DB)({text:p,boxHeight:M.ik/i*z,boxWidth:M.ik*T,font:j,startFontSize:Math.floor(y||k||24)});S(e.lines),x(e.fontSize)}},[t,p]);let O=b*a,N=f?(0,E.hm)(O,I):{x:0,y:0},W=T*M.ik*a+2*N.x,B=z*(M.ik/i)*a+2*N.y,K=n+V*M.ik*a-N.x,$=r?`${100*L}%`:d+L*(M.ik/i)*a-N.y;return(0,m.jsx)(l.az,{dangerouslySetInlineStyle:{__style:{left:K,top:$}},display:"flex",height:B,position:"absolute",width:W,children:(0,m.jsx)(l.az,{dangerouslySetInlineStyle:{__style:(0,R.zD)({alignment:h,verticalAlignment:_})},children:(0,m.jsx)(l.az,{display:"inlineBlock",maxWidth:"100%",children:(0,m.jsx)("p",{style:(0,R.$$)({fontSize:O,hexColor:v,letterSpacing:C,lineHeight:I,name:P}),children:w.map((e,t)=>(0,m.jsx)("span",{"data-gestalt-valid-html":"Text",style:(0,R.WZ)({fontSize:O,hasText:e.text.length>0,highlightColor:f||null,lineHeight:I}),children:t===w.length-1?e.text:(0,m.jsxs)(o.Fragment,{children:[e.text," ",(0,m.jsx)("br",{})]})},`paragraphLine-${t}-${(p??"").substr(0,9)}`))})})})})}var N=n(216544);function W({ownerId:e}){(0,o.useEffect)(()=>{(0,s.A)("StoryPinVideoPlaceholder","/app/common/react/components/auth-desktop-web-closeup/StoryPin/StoryPinVideoPlaceholder.tsx")},[]);let t=(0,A.A)(),n=(0,I.A)(),i=n.isAuth&&n.id===e;return(0,m.jsxs)(l.az,{alignItems:"center",color:"tertiary",direction:"column",display:"flex",height:"100%",justifyContent:"center",width:"100%",children:[(0,m.jsx)(l.KJ,{color:"inverse",children:i?t._('Your video is processing!', 'closeup.storyPin.videoPlaceholder', 'Let user know that their video is still processing'):t._('This video is still processing!', 'closeup.storyPin.videoPlaceholder', 'Let user know that this video is still processing')}),(0,m.jsx)(l.KJ,{color:"inverse",children:t._('Check back in a few minutes.', 'closeup.storyPin.videoPlaceholder', 'Let user know to come back in a couple of minutes to view the video')})]})}var B=n(63971),K=n(296377),$=n(839978),H=n(28204),U=n(747791),G=n(208762);function q({block:e,isActive:t,pwtTrackImageLoad:n,thumbnail:i}){let a,s=(0,A.A)(),{closeupWithinMasonryEnabled:o,isCloseupMediaViewerOpen:c,peekCloseupEnabled:u,showProductDetailPage:p}=(0,G._G)(),h=(0,K.A)({showProductDetailPage:p}),{borderStyle:g}=i||h?{}:(0,U.A)({closeupWithinMasonryEnabled:o}),f=e.image?.images?.["750x"]||e.image?.images?.["474x"],{height:v=1,width:x=1}=f||{},w=b({isUseCache:!0,signature:e.image_signature}),{peekRedesignFastFollowsEnabled:S}=(0,B.A)(f);return f||w?(a=i?"cover":o||S?"none":"contain",(0,m.jsx)(l.az,{alignItems:u?"center":void 0,dangerouslySetInlineStyle:{__style:{...g,aspectRatio:o?(0,r.ru)(x,v):void 0,contain:"strict",display:u?"grid":"block",justifySelf:o?"center":void 0}},height:o?"100%":"inherit",overflow:"hidden",width:o?void 0:"inherit",children:w?(0,m.jsx)(_,{_enableViewTransitions:!0,alt:s._('Story pin image', 'closeup.storypin.renderer', 'Alt text for story pin image'),color:d.lr,elementTiming:"StoryPinImageBlock-MainPinImage",fallbackSrc:w.media?.src??"",fit:a,isActive:t,naturalHeight:v,naturalWidth:x,onLoad:n,src:f?.url??"",suppressViewTransitionTags:c}):(0,m.jsx)(y.A,{_enableViewTransitions:!0,alt:s._('Story pin image', 'closeup.storypin.renderer', 'Alt text for story pin image'),borderStyle:g,color:d.lr,elementTiming:"StoryPinImageBlock-MainPinImage",fetchPriority:o?"high":void 0,fit:a,isActive:t,naturalHeight:f?.height??1,naturalWidth:f?.width??1,onLoad:n,src:f?.url??"",suppressViewTransitionTags:c})})):null}function X({activePageIndex:e,block:t,closeupStoryPinViewability:n,customEndCard:i,isActive:a,isSplitLayout:s=!1,musicRecordingId:o,muted:r,onEnded:c,onUpdateVideoInfo:u,ownerId:p,pageAspectRatio:h,pageDimensions:g,pageIndex:y,pin:f,pinId:_,scaleFactor:v,stillLoading:x,videoThumbnailStartTime:w,thumbnail:S=!1}){let{block_style:{height:A=100,width:P=100,x_coord:k=0,y_coord:C=0}={},video:I}=t,{closeupWithinMasonryEnabled:j,showProductDetailPage:T}=(0,G._G)(),E=(0,K.A)({showProductDetailPage:T}),z=j||E,V=d.ul/h,{height:L,width:R}=g,M=P*d.ul*v/100,F=P<100?Math.min(Math.max(100,P)-Math.abs(k),P):Math.min(Math.max(P-Math.abs(k),0),100),D=A<100?Math.min(Math.max(100,A)-Math.abs(C),A):Math.min(Math.max(A-Math.abs(C),0),100),O=z?"100%":D*V*v/100,B=z?"100%":F*d.ul*v/100,$=Math.max(C,0)*V*v/100,H=Math.max(k,0)*d.ul*v/100,U=b({isUseCache:!I,signature:t.video_signature});if(x)return null;let{media:q}=U||{},{duration:X,src:Z}=q||{},J=!!Z&&!!X;return I||J?!!(I?.video_list?.V_HLSV3_MOBILE||I?.video_list?.V_720P||J)&&(0,m.jsx)(l.az,{height:s?"50%":"100%",overflow:"hidden",position:"relative",children:(0,m.jsx)(l.az,{dangerouslySetInlineStyle:{__style:{alignSelf:"anchor-center",left:H,top:$}},"data-test-id":"story-pin-video-block",height:S?L:O,overflow:"hidden",position:"absolute",width:S?R:B,children:(0,m.jsx)(N.A,{activePageIndex:e,aspectRatio:h,blockHeight:S?L:A*V*v/100,blockWidth:S?R:M,closeupStoryPinViewability:n,customEndCard:i,isPlaying:a,musicRecordingId:o,muted:r,onEnded:c,onUpdateVideoInfo:u,pageIndex:y,pin:f,pinId:_,video:I||{video_list:{V_EXP7:{duration:X?1e3*X:0,url:Z}}},videoThumbnailStartTime:w})})}):(0,m.jsx)(l.az,{dangerouslySetInlineStyle:{__style:{left:H,top:$}},height:O,position:"absolute",width:B,children:(0,m.jsx)(W,{ownerId:p})})}n(128895);let Z=(void 0!==a||(a=n(911058)).hash&&"8bb1bb1f7bafeed0fe43bed44ef12d2a"!==a.hash&&console.error("The definition of 'StoryPinBlock_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),a);function J({activePageIndex:e,block:t,closeupStoryPinViewability:n,customEndCard:i,disableProductStickers:a,fontsLoaded:r,horizontalOffset:c,isActive:u,isSplitLayout:p=!1,musicRecordingId:h,muteVideos:y,onEnded:f,onFlyoutOpen:_,onUpdateVideoInfo:v,ownerId:b,pageAspectRatio:x,pageHeight:w,pageIndex:S,pageWidth:A,pin:P,pinId:k,previewOnly:C,pinKey:I,stillLoading:T=!1,thumbnail:z=!1,transform:V,verticalOffset:R,videoPinProgress:M,videoThumbnailStartTime:F}){(0,o.useEffect)(()=>{(0,s.A)("StoryPinBlock","/app/common/react/components/auth-desktop-web-closeup/StoryPin/renderer/StoryPinBlock.tsx")},[]);let D=(0,j.A)(Z,I),{closeupWithinMasonryEnabled:N}=(0,G._G)(),{block_style:{height:W=100,width:B=100,x_coord:K=0,y_coord:U=0}={},interactive_sticker_type:J=null}=t,Y=(0,$.d)();if(0===W||0===B)return null;let Q=A/d.ul;switch(t.type){case E.Nc.PARAGRAPH:case E.Nc.HEADING:return(0,m.jsx)(O,{block:t,fontsLoaded:r,horizontalOffset:c,pageAspectRatio:x,scaleFactor:Q,thumbnail:z,verticalOffset:R});case E.Nc.VIDEO:return(0,m.jsx)(X,{activePageIndex:e,block:t,closeupStoryPinViewability:n,customEndCard:i,isActive:u,isSplitLayout:p,musicRecordingId:h,muted:y,onEnded:f,onUpdateVideoInfo:v,ownerId:b,pageAspectRatio:x,pageDimensions:{height:w,width:A},pageIndex:S,pin:P,pinId:k,scaleFactor:Q,stillLoading:T,thumbnail:z,videoThumbnailStartTime:F});case E.Nc.IMAGE:let{scaleX:ee=1,scaleY:et=1}=V||{};return(0,m.jsx)(l.az,{dangerouslySetInlineStyle:{__style:{display:N?"grid":"block",height:`${W}%`,left:`${K*ee}%`,top:`${U*et}%`,width:`${B}%`}},"data-test-id":"story-pin-image-block",overflow:"hidden",position:"absolute",children:(0,m.jsx)(q,{block:t,isActive:u,pwtTrackImageLoad:()=>{Y&&u&&(Y.addBinaryAnnotation("pin.id",k,"STRING"),Y.addBinaryAnnotation("video",!1,"BOOL"),Y.stop()),u&&((0,H.tL)("pin.id",k,"STRING"),(0,H.tL)("video",!1,"BOOL"),(0,H.Uy)("image"),(0,H.$Q)("video"))},thumbnail:z})});case E.Nc.MENTION_STICKER:return!C&&(0,m.jsx)(L,{block:{...t},elementType:12120,horizontalOffset:c,onFlyoutOpen:_,pageAspectRatio:x,pageIndex:S,pinKey:null,scaleFactor:Q,tooltipElementType:12121,verticalOffset:R,videoPinProgress:M});case E.Nc.GENERIC_STICKER:let en;return!C&&(en=5===J,(0,m.jsx)(L,{block:{...t},elementType:en?12827:12858,horizontalOffset:c,onFlyoutOpen:_,pageAspectRatio:x,pageIndex:S,pinKey:null,scaleFactor:Q,tooltipElementType:en?12828:12859,verticalOffset:R,videoPinProgress:M}));case E.Nc.PRODUCT_STICKER:return!C&&!a&&(0,m.jsx)(L,{block:{...t},elementType:12223,horizontalOffset:c,onFlyoutOpen:_,pageAspectRatio:x,pageIndex:S,pinKey:D,scaleFactor:Q,tooltipElementType:12224,verticalOffset:R,videoPinProgress:M});case E.Nc.VTO_MAKEUP_STICKER:return!C&&(0,m.jsx)(L,{block:{...t},elementType:12561,horizontalOffset:c,onFlyoutOpen:_,pageAspectRatio:x,pageIndex:S,pinKey:null,scaleFactor:Q,tooltipElementType:12561,verticalOffset:R,videoPinProgress:M});case E.Nc.COMMENT_REPLY_STICKER:return t.type===E.Nc.COMMENT_REPLY_STICKER&&!C&&(0,m.jsx)(g,{block:t,horizontalOffset:c,pageAspectRatio:x,scaleFactor:Q,verticalOffset:R});default:return null}}},405661(e,t,n){n.d(t,{A:()=>i});let i=({carouselData:e,domain:t})=>{let n="",i=t||"";if(e){let{carouselSlots:t=[]}=e,a=e.index??0;t&&t[a]&&(n=t[a].link||"",i=t[a].domain||i)}return{carouselLink:n,currentDomain:i}}},363906(e,t,n){n.d(t,{A:()=>h});var i,a=n(859471);n(224989);var s=n(405661),o=n(296377),l=n(900565),r=n(757893),d=n(852758),c=n(507120),u=n(208762);let p=(void 0!==i||(i=n(957159)).hash&&"b2a27d44d1f3dbd42301b82866212272"!==i.hash&&console.error("The definition of 'useCalculateMaxWidthAndHeightForSideBySideVariant_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),i);function h({pinKey:e,isVideo:t}){let{closeupWithinMasonryEnabled:n}=(0,u._G)(),i=(0,c.A)(),h=(0,l.A)(p,e),m=(0,o.A)({showProductDetailPage:!!h?.isEligibleForPdp}),{group:g}=(0,r.A)(),y=(0,a.useMemo)(()=>h?.carouselData?{carouselSlots:h.carouselData.carouselSlots?.map(e=>({domain:e.domain,link:e.link}))||[],index:h.carouselData.index}:void 0,[h?.carouselData]),{currentDomain:f}=(0,a.useMemo)(()=>(0,s.A)({carouselData:y,domain:h?.domain}),[y,h?.domain]),_=(0,a.useMemo)(()=>f?f.split(".")[0]:"",[f]),v=(0,a.useMemo)(()=>{let e=h?.trackedLink||h?.link||"";return(0,d.A)(e)??e},[h?.trackedLink,h?.link]),b=(0,a.useMemo)(()=>{let e=h?.richMetadata?.products?.[0],t=e?.offerSummary,n=!!(t?.price||t?.standardPrice),i=h?.linkDomain?.officialUser?.firstName;return{hasPrice:n,domainOwner:!!h?.closeupAttribution?.firstName||!!i,merchantName:h?.linkUserWebsite?.officialUser?.firstName||i||""}},[h?.richMetadata?.products,h?.linkDomain?.officialUser?.firstName,h?.closeupAttribution?.firstName,h?.linkUserWebsite?.officialUser?.firstName]),x=(0,a.useMemo)(()=>!!((b.merchantName||_)&&v),[b.merchantName,_,v]),w=(0,a.useMemo)(()=>{let e,t=0,n=0;return e=84+(h?.isEligibleForPdp&&b.hasPrice?18:0),t+=(h?.closeupUnifiedTitle||h?.gridTitle?23:0)+("enabled_idea_pin"!==g&&b.domainOwner?40:0),n+=64*!!x,e+=Math.max(t,n)},[h?.isEligibleForPdp,b.hasPrice,h?.closeupUnifiedTitle,h?.gridTitle,g,b.domainOwner,x]);if(!n)return{maxHeight:void 0};if(i)return{maxHeight:m?void 0:`calc(round(100vh, 1px) - 80px - ${w}px)`};let S=Math.round(window.innerHeight)-80-w;return{maxHeight:m&&!t?void 0:S}}},63971(e,t,n){n.d(t,{A:()=>l});var i=n(753233),a=n(528989),s=n(376195),o=n(491149);function l(e){let{isAuthenticated:t}=(0,s._8)(),n=(0,o.qJ)(),{checkExperiment:l}=(0,a.A)(),r=t&&n&&l("closeup_dweb_peek_redesign_fast_follow").anyEnabled,d=l("closeup_dweb_peek_redesign_fast_follow").group,c=t&&n&&l("closeup_dweb_side_by_side_redesign_fast_follow").anyEnabled,u=c?l("closeup_dweb_side_by_side_redesign_fast_follow").group:"";return{peekRedesignFastFollowsExpGroup:d,peekRedesignFastFollowsEnabled:r&&(0,i.A)(d,e),sideBySideRedesignFastFollowsExpGroup:u,sideBySideRedesignFastFollowsEnabled:c,sideBySideFullWidthCTAEnabled:"enabled_full_width_cta"===u||"employees"===u,sideBySidePWTDeferActionBarLoad:"enabled_pwt_defer_action_bar_load"===u}}},745140(e,t,n){n.r(t),n.d(t,{default:()=>D});var i=n(335831),a=n(859471),s=n(657811),o=n(836737),l=n(8137),r=n(221718),d=n(538346),c=n(544303),u=n(915625),p=n(149018),h=n(930798),m=n(415825),g=n(520621),y=n(556971),f=n(47998),_=n(424120);let v=new Set(["JP","TW","TH"]),b={10:g.A,6:p.A,5:c.A,8:u.A,20:h.A,22:m.A,9:y.A};function x(){let e=(0,f.A)();return[...e.isAuth&&v.has(e.country)?[8]:[],10,6,5].slice(0,3)}function w(){try{let e=Number(_.Ay.getItem(r.OG)),t=[];e&&b[e]&&t.push(e);let n=new Set(t),i=x().filter(e=>!n.has(e));return t.push(...i.slice(0,3-t.length)),t.slice(0,3)}catch(e){return x()}}var S=n(119795),A=n(507120),P=n(353103),k=n(562615);function C({onAnimationEnd:e,startAnimating:t,fadeOut:n}){let i=(0,A.A)(),s=(0,a.useMemo)(()=>w(),[]),[l,c]=(0,a.useState)("idle"),[u,p]=(0,a.useState)(""),[h,m]=(0,a.useState)(["","",""]);return((0,a.useEffect)(()=>{if(!t||i)return;let e=_.Ay.getItem(r.A8)||{};_.Ay.setItem(r.A8,{...e,lastAnimationTimestamp:Date.now()}),c("expanding"),p("expandingContainerAnimation 300ms ease-in-out forwards")},[t,i]),t&&"idle"!==l&&"complete"!==l)?(0,k.jsxs)(o.az,{dangerouslySetInlineStyle:{__style:{opacity:+!n,transition:n?"opacity 100ms ease-in-out":"none"}},position:"absolute",zIndex:P.d8,children:[(0,k.jsx)(d.A,{unsafeCSS:`
@keyframes expandingContainerAnimation {
  0% {
    opacity: 0;
    width: 0;
  }
  100% {
    opacity: 1;
    width: 140px;
  }
}

@keyframes expandingContainerContract {
  0% {
    opacity: 1;
    width: 140px;
  }
  100% {
    opacity: 0;
    width: 0;
  }
}

@keyframes expandingAppSlideIn {
  0% {
    opacity: 0;
    transform: translateY(10px);
  }
  100% {
    opacity: 1;
    transform: translateY(0px);
  }
}

@keyframes expandingAppSlideOut {
  0% {
    opacity: 1;
    transform: translateY(0px);
  }
  100% {
    opacity: 0;
    transform: translateY(10px);
  }
}

@keyframes expandingAppSlideOutLast {
  0% {
    opacity: 1;
    transform: translateY(0px);
  }
  100% {
    opacity: 0;
    transform: translateY(10px);
  }
}
`}),(0,k.jsx)(o.az,{alignItems:"center",dangerouslySetInlineStyle:{__style:{animation:u,backgroundColor:"var(--sema-color-background-subtle)"}},display:"flex",height:48,justifyContent:"center",onAnimationEnd:t=>{let{animationName:n}=t;"expandingContainerAnimation"===n&&"expanding"===l?(c("appSlideIn"),m(s.map((e,t)=>`expandingAppSlideIn 300ms ease-in-out ${100*t}ms forwards, ${0===t?"expandingAppSlideOutLast":"expandingAppSlideOut"} 300ms ease-in-out ${2700-100*t}ms forwards`))):"expandingAppSlideOutLast"===n?(c("contracting"),p("expandingContainerContract 300ms ease-in-out forwards")):"expandingContainerContract"===n&&(c("complete"),e())},paddingX:2,paddingY:1.5,position:"absolute",rounding:300,width:48,children:(0,k.jsx)(o.so,{alignItems:"center",direction:"row",gap:2,justifyContent:"center",children:s.map((e,t)=>{let n=b[e];return n?(0,k.jsx)(o.az,{dangerouslySetInlineStyle:{__style:{animation:h[t]}},opacity:0,children:(0,k.jsx)(n,{size:36})},e):null})})})]}):null}function I({onAnimationEnd:e,fadeOut:t}){(0,a.useEffect)(()=>{(0,i.A)("SecondarySendButtonExpandingAnimation","/app/common/react/components/social/SecondarySendButtonExpandingAnimation.tsx")},[]);let[n,s]=(0,a.useState)(!1);return(0,S.A)(()=>{let e=setTimeout(()=>{s(!0);let e=setTimeout(()=>{s(!1)},4500);return()=>clearTimeout(e)},5e3);return()=>clearTimeout(e)}),(0,k.jsx)(C,{fadeOut:t,onAnimationEnd:e,startAnimating:n})}var j=n(396901);function T({onAnimationEnd:e,startAnimating:t,fadeOut:n}){let i=(0,j.A)(),s=(0,A.A)(),l=(0,a.useMemo)(()=>w(),[]),[c,u]=(0,a.useState)("idle"),[p,h]=(0,a.useState)(0),[m,g]=(0,a.useState)(""),[y,f]=(0,a.useState)(""),v=i._('Share', 'secondarySendButtonFlashingAnimation.share', 'Share label for sharing a Pin - Flashing animation');if((0,a.useEffect)(()=>{if(!t||s)return;let e=_.Ay.getItem(r.A8)||{};_.Ay.setItem(r.A8,{...e,lastAnimationTimestamp:Date.now()}),u("iconShrink"),g("shareIconShrinkOut 200ms ease-in-out forwards")},[t,s]),!t||"idle"===c||"complete"===c)return null;let x=l[p],S=x?b[x]:null;return(0,k.jsxs)(o.az,{dangerouslySetInlineStyle:{__style:{opacity:+!n,transition:n?"opacity 100ms ease-in-out":"none"}},position:"absolute",zIndex:P.d8,children:[(0,k.jsx)(d.A,{unsafeCSS:`
@keyframes shareIconShrinkOut {
  0% {
    transform: scale(1);
    opacity: 1;
  }
  100% {
    transform: scale(0);
    opacity: 0;
  }
}

@keyframes appIconAnimateIn {
  0% {
    transform: scale(0);
    opacity: 0;
  }
  100% {
    transform: scale(1.2);
    opacity: 1;
  }
}

@keyframes appIconShrink {
  0% {
    transform: scale(1.2);
  }
  100% {
    transform: scale(1);
  }
}

@keyframes appIconAnimateOut {
  0% {
    transform: scale(1);
    opacity: 1;
  }
  100% {
    transform: scale(0);
    opacity: 0;
  }
}

@keyframes shareIconReturnLarge {
  0% {
    transform: scale(0);
    opacity: 0;
  }
  100% {
    transform: scale(1.33);
    opacity: 1;
  }
}

@keyframes shareIconReturnFinal {
  0% {
    transform: scale(1.33);
  }
  100% {
    transform: scale(1);
  }
}
`}),(0,k.jsxs)(o.az,{alignItems:"center",color:"default",display:"flex",height:48,justifyContent:"center",onAnimationEnd:t=>{let{animationName:n}=t;"shareIconShrinkOut"===n?(u("appAnimations"),h(0),f("appIconAnimateIn 300ms ease-in-out forwards")):"appIconAnimateIn"===n?f("appIconShrink 300ms ease-in-out forwards"):"appIconShrink"===n?f("appIconAnimateOut 300ms ease-in-out forwards"):"appIconAnimateOut"===n?p<2?(h(p+1),f("appIconAnimateIn 300ms ease-in-out forwards")):(u("iconReturn"),g("shareIconReturnLarge 200ms ease-in-out forwards")):"shareIconReturnLarge"===n?g("shareIconReturnFinal 200ms ease-in-out forwards"):"shareIconReturnFinal"===n&&(u("complete"),e())},position:"absolute",rounding:300,width:48,children:[("iconShrink"===c||"iconReturn"===c)&&(0,k.jsx)(o.az,{dangerouslySetInlineStyle:{__style:{animation:m}},children:(0,k.jsx)(o.In,{accessibilityLabel:v,color:"default",icon:"share",size:24})}),"appAnimations"===c&&S&&(0,k.jsx)(o.az,{alignItems:"center",dangerouslySetInlineStyle:{__style:{top:"50%",left:"50%",transform:"translate(-50%, -50%)"}},display:"flex",justifyContent:"center",position:"absolute",children:(0,k.jsx)(o.az,{alignItems:"center",dangerouslySetInlineStyle:{__style:{animation:y}},display:"flex",justifyContent:"center",position:"absolute",children:(0,k.jsx)(S,{size:36})})})]})]})}function E({onAnimationEnd:e,fadeOut:t}){(0,a.useEffect)(()=>{(0,i.A)("SecondarySendButtonFlashingAnimation","/app/common/react/components/social/SecondarySendButtonFlashingAnimation.tsx")},[]);let[n,s]=(0,a.useState)(!1);return(0,S.A)(()=>{let e=setTimeout(()=>{s(!0);let e=setTimeout(()=>{s(!1)},5e3);return()=>clearTimeout(e)},5e3);return()=>clearTimeout(e)}),(0,k.jsx)(T,{fadeOut:t,onAnimationEnd:e,startAnimating:n})}var z=n(746743),V=n(528989),L=n(393652),R=n(922834),M=n(169250),F=n(237505);function D({anchorRef:e,controllerOptions:t,experienceAnchor:n=3017,iconColor:d,iconOnly:c,buttonText:u,onMouseEnter:p,onMouseLeave:h,shouldHideTooltip:m=!1,showSendAnimation:g=!1,tabIndex:y=0,closeupWithinMasonryEnabled:f=!1,isInCloseupMediaViewer:v=!1}){(0,a.useEffect)(()=>{(0,i.A)("SecondarySendButton","/app/common/react/components/social/SecondarySendButton.tsx")},[]);let b=(0,j.A)(),x=(0,a.useId)(),w=(0,_.y1)(),{checkExperiment:A}=(0,V.A)(),{setIsShowingShareButton:P}=(0,L.A)(),C=(0,a.useRef)(null),T=e??C,[D,O]=(0,a.useState)(g),[N,W]=(0,a.useState)(0),[B,K]=(0,a.useState)(!1),$=new o.K5(v?[R.y]:[M.Bf]),H=()=>{O(!1)},U=e=>{K(!0);let t=w.getItem(r.A8)||{};w.setItem(r.A8,{...t,lastAnimationTimestamp:Date.now()}),setTimeout(()=>{O(!1),K(!1)},100),e()};(0,S.A)(()=>{let{lastAnimationTimestamp:e}=w.getItem(r.A8)||{lastAnimationTimestamp:0};W(e),(0,s.A)(new Date(e),new Date)||w.setItem(r.A8,{animationSeenCount:0,lastAnimationTimestamp:e})}),(0,a.useEffect)(()=>(P(g),()=>{P(!1)}),[P,g]);let G=(0,a.useMemo)(()=>v&&c?"washLight":f?"default":void 0,[v,c,f]);return(0,k.jsxs)(a.Fragment,{children:[(0,k.jsx)(F.A,{popoverId:x,...t,children:({handleSendShareFlyoutButtonClick:e})=>{let n=(0,k.jsxs)(a.Fragment,{children:[(e=>{if(!D)return null;let t=A("ce_dweb_animate_share_icon");if(t.group?.startsWith("enabled")){let n=0;if(t.group.endsWith("_1d")?n=1:t.group.endsWith("_3d")?n=3:t.group.endsWith("_7d")&&(n=7),n>0&&N&&Math.floor((Date.now()-N)/864e5)<n)return null;if(t.group.includes("flashing"))return(0,k.jsx)(o.az,{"data-test-id":"closeup-share-button",children:(0,k.jsx)(o.Rp,{onTap:()=>U(e),children:(0,k.jsx)(E,{fadeOut:B,onAnimationEnd:H})})});if(t.group.includes("expanding"))return(0,k.jsx)(o.az,{"data-test-id":"closeup-share-button",children:(0,k.jsx)(o.Rp,{onTap:()=>U(e),children:(0,k.jsx)(I,{fadeOut:B,onAnimationEnd:H})})})}return null})(e),v&&!c?(0,k.jsx)(o.$n,{ref:T,accessibilityControls:t.isFlyoutOpen?x:void 0,accessibilityExpanded:t.isFlyoutOpen,accessibilityHaspopup:!0,accessibilityLabel:b._('Share', 'Closeup.SharePin.AccessibilityLabel', 'Accessible label for button to share this pin'),color:"tertiarySemiTransparent",iconEnd:"share",onClick:()=>U(e),size:"lg",tabIndex:y,text:(0,k.jsx)(o.KJ,{weight:"bold",children:b._('Share', 'Closeup.SharePin.Button', 'Button to share the current pin')})}):(0,k.jsx)(l.A,{ref:T,accessibilityControls:t.isFlyoutOpen?x:void 0,accessibilityExpanded:t.isFlyoutOpen,accessibilityHaspopup:!0,accessibilityLabel:b._('Send', 'Accessible label for button to send this pin', 'Accessible label for button to send this pin'),bgColor:G,buttonText:u,handleClick:()=>U(e),icon:"share",iconColor:d,iconOnly:c,isActive:t.isFlyoutOpen,onMouseEnter:p,onMouseLeave:h,size:v&&c?"lg":void 0,tabIndex:y,testId:"closeup-share-button"})]});return m?n:(0,k.jsx)(o.m_,{inline:!0,text:b._('Share', 'Closeup.SharePin.Icon', 'Icon for sharing the current pin'),zIndex:$,children:n})}}),(0,k.jsx)(z.X$,{anchors:{[n]:T.current},idealDirection:"down",onAnchorHover:3025===n?"complete":void 0,onAnchorTouch:"complete",placementId:12,scrollToDismiss:!0})]})}},501132(e,t,n){n.d(t,{A:()=>U});var i,a,s=n(335831),o=n(859471);n(224989);var l=n(836737),r=n(578576),d=n(363906),c=n(740441),u=n(745140),p=n(129625),h=n(268989),m=n(900565),g=n(396901),y=n(208762),f=n(892804),_=n(562615);function v(e,t,n){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let b={__style:{backgroundColor:"#000"}},x=(void 0!==i||(i=n(460744)).hash&&"c4a51cbc26011483ff5552ff99019cdc"!==i.hash&&console.error("The definition of 'AuthDesktopWebCloseupVideoEndCard_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),i);class w extends o.PureComponent{constructor(...e){super(...e),v(this,"state",{isFlyoutOpen:!1}),v(this,"handleRestartVideo",({event:e})=>{e.stopPropagation(),this.props.onRestartVideo?.({event:e}),(0,f.GV)("web.video.endcard.share",{sampleRate:1,tags:{status:"restart",variant:"enabled_send_first"}})}),v(this,"handleToggleFlyout",()=>{let{clientTrackingParams:e,pinId:t,requireAuth:n,logContextEvent:i}=this.props;(this.state.isFlyoutOpen||(0,f.GV)("web.video.endcard.share",{sampleRate:1,tags:{status:"shareSheetOpen",variant:"enabled_send_first"}}),i({event_type:101,component:179,object_id_str:t,view_type:3,view_parameter:156,element:11731,clientTrackingParams:e}),n)?n():this.setState(e=>({isFlyoutOpen:!e.isFlyoutOpen}))}),v(this,"handleFlyoutDismiss",()=>{this.setState({isFlyoutOpen:!1})}),v(this,"handleExternalSend",()=>{(0,f.GV)("web.video.endcard.share",{sampleRate:1,tags:{status:"shareSheetOpen",variant:"enabled_send_first"}})}),v(this,"renderReplayButton",()=>(0,_.jsx)(l.Rp,{accessibilityLabel:this.props.i18n._('Watch again', 'Button when pressed restarts the video', 'Button when pressed restarts the video'),onTap:this.handleRestartVideo,rounding:200,children:(0,_.jsxs)(l.az,{alignItems:"center",display:"flex",padding:2,children:[(0,_.jsx)(l.az,{marginEnd:3,children:(0,_.jsx)(l.In,{accessibilityLabel:this.props.i18n._('Watch again', 'Button when pressed restarts the video', 'Button when pressed restarts the video'),color:"inverse",icon:"arrow-clockwise",size:18})}),(0,_.jsx)(l.KJ,{color:"light",overflow:"normal",size:"400",weight:"bold",children:this.props.i18n._('Watch again', 'Clickable label when pressed restarts the video', 'Clickable label when pressed restarts the video')})]})})),v(this,"renderShareButton",()=>{let{clientTrackingParams:e,gridDescription:t,imageSrc:n,pinId:i,variant:a}=this.props;return(0,_.jsx)(l.Rp,{accessibilityLabel:this.props.i18n._('Send', 'end.video.send.icon.label', 'Clickable label when pressed opens share sheet after video is finished'),onTap:this.handleToggleFlyout,rounding:200,children:(0,_.jsxs)(l.az,{alignItems:"center",display:"flex",justifyContent:"center",padding:2,children:[(0,_.jsx)(u.default,{controllerOptions:{flyoutDisplayOptions:"media-viewer"===a?{wrapperPosition:"fixed"}:{shownWithinMasonry:!0},loggingOptions:{component:179,element:72,sendShareSurface:8,onExternalSend:this.handleExternalSend,viewType:3},isFlyoutOpen:this.state.isFlyoutOpen,onFlyoutDismiss:this.handleFlyoutDismiss,onToggleFlyout:()=>{},sendObject:{type:"pin",description:t,id:i,imageUrl:n,url:`/pin/${i}/`,clientTrackingParams:e}},iconColor:"inverse",iconOnly:!0,tabIndex:-1}),(0,_.jsx)(l.az,{children:(0,_.jsx)(l.KJ,{color:"light",overflow:"normal",size:"400",weight:"bold",children:this.props.i18n._('Send', 'end.video.send.icon.label', 'Clickable label when pressed opens share sheet after video is finished')})})]})})})}componentDidMount(){let{clientTrackingParams:e,pinId:t,logContextEvent:n}=this.props;(0,f.GV)("web.video.endcard.share",{sampleRate:1,tags:{status:"land",variant:"enabled_send_first"}}),n({event_type:13,component:179,object_id_str:t,view_type:3,view_parameter:156,element:11731,clientTrackingParams:e})}render(){let{backgroundImage:e,naturalHeight:t,naturalWidth:n,maxHeight:i,maxWidth:a,pinTitle:s}=this.props;return(0,_.jsx)(l.az,{maxHeight:i,maxWidth:a,children:(0,_.jsxs)(l._V,{alt:s||"",naturalHeight:t,naturalWidth:n,src:e,children:[(0,_.jsx)(l.az,{bottom:!0,dangerouslySetInlineStyle:b,left:!0,position:"absolute",right:!0,top:!0}),(0,_.jsx)(l.az,{alignItems:"center",direction:"column",display:"flex",height:"100%",justifyContent:"center",left:!0,maxHeight:i,maxWidth:a,position:"absolute",top:!0,width:"100%",children:(0,_.jsxs)(l.az,{position:"absolute",children:[(0,_.jsx)(l.az,{children:this.renderShareButton()}),(0,_.jsx)(l.az,{alignSelf:"center",children:this.renderReplayButton()})]})})]})})}}function S(e){let t;(0,o.useEffect)(()=>{(0,s.A)("AuthDesktopWebCloseupVideoEndCard","/app/common/react/components/video/closeup/AuthDesktopWebCloseupVideoEndCard.tsx")},[]);let{pinKey:n,variant:i}=e,a=(0,m.A)(x,n),{logContextEvent:l}=(0,p.o)(),c=(0,g.A)(),u=(0,h.A)(),{closeupWithinMasonryEnabled:f,peekCloseupEnabled:v,viewportSize:b}=(0,y._G)(),{maxHeight:S,fiftyPercentHeight:A,fiftyPercentWidth:P}=(0,r.Vc)(),{maxHeight:k}=(0,d.A)({pinKey:a,isVideo:!0});return v?t="sm"===b?A:S:f&&(t=k),(0,_.jsx)(w,{...e,closeupWithinMasonryEnabled:f,i18n:c,logContextEvent:l,maxHeight:"media-viewer"===i?"inherit":t,maxWidth:"media-viewer"===i?"inherit":P,requireAuth:u})}let A=({backgroundImage:e,onRestartVideo:t,pinTitle:n})=>{(0,o.useEffect)(()=>{(0,s.A)("AuthDesktopWebCloseupVideoEndCard","/app/common/react/components/video/closeup/AuthDesktopWebCloseupVideoEndCard.tsx")},[]);let i=(0,g.A)();return(0,_.jsx)(l.az,{"data-test-id":"video-end-card",height:"100%",width:"100%",children:(0,_.jsxs)(l._V,{alt:n||"",fit:"contain",naturalHeight:1,naturalWidth:1,src:e,children:[(0,_.jsx)(l.az,{bottom:!0,dangerouslySetInlineStyle:b,left:!0,opacity:80,position:"absolute",right:!0,top:!0}),(0,_.jsx)(l.az,{alignItems:"center",display:"flex",height:"100%",justifyContent:"center",left:!0,position:"absolute",top:!0,width:"100%",children:(0,_.jsx)(l.az,{children:(0,_.jsx)(l.Rp,{onTap:t,rounding:200,children:(0,_.jsxs)(l.az,{alignItems:"center",display:"flex",padding:2,children:[(0,_.jsx)(l.K0,{accessibilityLabel:i._('Replay', 'closeupVideo.endCard.ReplayButton', 'Button when pressed restarts the video'),icon:"arrow-clockwise",iconColor:"inverse",size:"md"}),(0,_.jsx)(l._Y,{color:"light",overflow:"normal",size:"400",children:i._('Replay', 'closeupVideo.endCard.ReplayButton', 'Button when pressed restarts the video')})]})})})})]})})};var P=n(626847),k=n(839978),C=n(570927),I=n(75975),j=n(327336),T=n(28204),E=n(711076),z=n(376195),V=n(44868),L=n(94291),R=n(998053),M=n(661399),F=n(822819),D=n(491149);n(661373);var O=n(257470);n(128895);var N=n(754737),W=n(960747);function B(e,t,n){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let K=(void 0!==a||(a=n(538884)).hash&&"7562478d60c54219d833414c881b75b3"!==a.hash&&console.error("The definition of 'AuthDesktopWebCloseupVideoNonDuplo_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),a),$=(e,t)=>{t({currentTime:e?.currentTime??0,duration:e?.duration??1})};class H extends o.Component{constructor(...e){super(...e),B(this,"state",{controls:"always"===this.props.showControls&&!this.props.disabled,fullscreen:!1,playing:!(0,P.nr)(this.props.requestContext.userAgent.browserName)&&!!this.props.autoplay&&!this.props.disabled,ready:!1,seeking:!1,showEndCard:!1,volume:this.props.muted||this.props.shouldMute?0:1,videoStartTime:this.props.videoStartTime||0}),B(this,"setVideoPwtLoadingStop",(e=!1)=>{if(!C.A)return;let{storyPinStepStopwatch:t,pinId:n}=this.props;t&&(e||t.addAnnotation("video.startup.end"),t.addBinaryAnnotation("pin.id",n,"STRING"),t.addBinaryAnnotation("video",!0,"BOOL"),t.addBinaryAnnotation("preload",e,"BOOL"),t.addSubspan({name:"perceived_video_load",endTime:C.A.now()}),t.stop()),e||(0,I.A)("video.startup.end"),(0,j.A)("perceived_video_load"),(0,T.Uy)("video"),(0,T.tL)("pin.id",n,"STRING"),(0,T.tL)("video",!0,"BOOL"),"STORY_PIN_CLOSEUP"===(0,E.R$)()&&(0,T.$Q)("image")}),B(this,"componentDidMount",()=>{let{customThumbnail:e,video:t,preferMp4:n}=this.props,{mp4:i}=t,a=t.hlsv3||t.hls||null,{thumbnail:s}=n&&i||a||{},o=(0,N._d)(e||s);o?.ready===4&&(this.setState({ready:!0}),this.props.autoplay&&this.setVideoPwtLoadingStop(!0)),document.addEventListener("fullscreenchange",this.onFullscreenChange),document.addEventListener("webkitfullscreenchange",this.onFullscreenChange),document.addEventListener("mozfullscreenchange",this.onFullscreenChange),document.addEventListener("MSFullscreenChange",this.onFullscreenChange)}),B(this,"componentWillUnmount",()=>{document.removeEventListener("fullscreenchange",this.onFullscreenChange),document.removeEventListener("webkitfullscreenchange",this.onFullscreenChange),document.removeEventListener("mozfullscreenchange",this.onFullscreenChange),document.removeEventListener("MSFullscreenChange",this.onFullscreenChange)}),B(this,"onFullscreenChange",()=>{document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||this.props.setPanelOpen(e=>!e)}),B(this,"componentDidUpdate",(e,t)=>{this.props.videoStartTime&&this.props.videoStartTime!==e.videoStartTime&&this.setState({videoStartTime:this.props.videoStartTime}),!1===e.isPlaying&&this.props.isPlaying&&this.setState({playing:!0,controls:"never"!==this.props.showControls}),e.isPlaying&&!1===this.props.isPlaying&&this.setState({playing:!1}),e.autoplay!==this.props.autoplay&&(this.setState({playing:!!this.props.autoplay}),this.props.autoplay&&this.state.ready&&this.setVideoPwtLoadingStop(!0)),e.muted!==this.props.muted&&this.setState({volume:+!this.props.muted}),"never"===this.props.showControls&&t.controls&&this.setState({controls:!1}),(t.controls||t.playing)&&this.props.disabled&&this.setState({playing:!1,controls:!1}),!t.playing&&this.state.playing&&this.props.onPlay&&this.props.onPlay(),this.props.isCloseupMediaViewerOpen&&!e.isCloseupMediaViewerOpen&&this.setState({playing:!1})}),B(this,"handleTouch",()=>{let{seeking:e}=this.state,{disabled:t}=this.props;e||t||this.setState(e=>({playing:!e.playing}))}),B(this,"handleShowControls",()=>this.setState({controls:!0})),B(this,"handleHideControls",()=>this.setState({controls:!1})),B(this,"handleReady",()=>{let{ready:e,playing:t}=this.state,{autoplay:n,disabled:i}=this.props;n&&!e&&this.setVideoPwtLoadingStop(),this.setState({ready:!0}),(0,P.nr)(this.props.requestContext.userAgent.browserName)&&!t&&n&&!i&&this.setState({playing:!0})}),B(this,"handleEnded",({event:e})=>{let{customThumbnail:t,customEndCard:n,pinId:i,setCurrentVideo:a,loop:s,onEnded:o}=this.props;e.stopPropagation(),!s&&(this.setState({playing:!1}),t&&t.endsWith(".gif")||n||(this.setState({showEndCard:!0,videoStartTime:0}),a({pinId:i,isPromoted:!1,currentTime:0})),this.state.fullscreen&&this.exitFullscreen()),o&&o(),this.props.setPanelOpen(!0)}),B(this,"handlePause",({event:e})=>{e.stopPropagation(),this.setState({playing:!1})}),B(this,"handlePlay",({event:e})=>{e.stopPropagation(),this.setState({playing:!0})}),B(this,"handleFullscreenChange",({event:e,fullscreen:t})=>{e.stopPropagation(),this.setState({fullscreen:t})}),B(this,"handlePlayheadDown",()=>{this.setState({seeking:!0})}),B(this,"handlePlayheadUp",()=>{setTimeout(()=>{this.setState({seeking:!1})},500)}),B(this,"handleRestartVideo",({event:e})=>{e.stopPropagation(),this.setState({playing:!0,showEndCard:!1})}),B(this,"handleShareRestartVideo",({event:e})=>{e.stopPropagation(),this.setState({playing:!0,showEndCard:!1})}),B(this,"handleVolumeChange",({event:e,volume:t})=>{let{shouldMute:n}=this.props;e.stopPropagation(),n||this.setState({volume:t})}),B(this,"exitFullscreen",()=>{let{document:e}=window;(e.fullscreenElement||e.webkitFullscreenElement||e.mozFullScreenElement)&&(e.exitFullscreen?e.exitFullscreen():e.webkitExitFullscreen?e.webkitExitFullscreen():e.mozCancelFullScreen?e.mozCancelFullScreen():e.msExitFullscreen&&e.msExitFullscreen())}),B(this,"requestFullscreen",()=>{let{customThumbnail:e,video:t,preferMp4:n}=this.props,{mp4:i}=t,a=t.hlsv3||t.hls||null,{thumbnail:s}=n&&i||a||{},o=(0,N._d)(e||s);o.requestFullscreen?o.requestFullscreen():o.webkitRequestFullscreen?o.webkitRequestFullscreen():o.mozRequestFullScreen?o.mozRequestFullScreen():o.msRequestFullscreen&&o.msRequestFullscreen()}),B(this,"renderCloseupVideoEndCard",(e,t,n,i)=>{let a={backgroundImage:e,naturalHeight:t,naturalWidth:n,onRestartVideo:this.handleShareRestartVideo},s={backgroundImage:e,naturalHeight:t,naturalWidth:n,onRestartVideo:this.handleRestartVideo},{clientTrackingParams:o,flyoutShareProps:l}=this.props,r={clientTrackingParams:o,gridDescription:l?l.gridDescription:"",imageSrc:l?l.imageSrc:"",pinId:l?l.pinId:"",pinKey:this.props.pin,variant:this.props.variant};return i?(0,_.jsx)(A,{...s}):(0,_.jsx)(S,{...r,...a})})}render(){let{aspectRatio:e,autoplay:t,closeupStoryPinViewability:n,contextLogData:i={component:179,is_closeup_video:!0,objectId:this.props.pinId,view:3,viewParameter:156},customThumbnail:a,isPromoted:s,loop:o,objectFit:d,preferMp4:u,preload:p,requestContext:h,showControls:m,variant:g,video:y,captions:f,isDesktop:v,videoThumbnailStartTime:b,pin:x,setProgressInfo:w,progressInfo:S,setPanelOpen:A,panelOpen:k,setMute:C,isMuted:I,closeupWithinMasonryEnabled:j,maxHeight:T,maxWidth:E,onTimeChange:z,seekTime:M,roundingOverride:F,isMainCloseupIdeaVideo:D}=this.props;i.is_closeup_video=!0;let{controls:O,fullscreen:B,playing:K,showEndCard:H,volume:U,videoStartTime:G}=this.state,q=y.hlsv3||y.hls||null;if(!q&&!y.mp4)return null;let{mp4:X}=y,Z=u&&X&&X.url||q&&[{type:"video/m3u8",src:q.url}]||void 0,{height:J,thumbnail:Y,width:Q}=u&&X||q||{},ee=a||Y,et=()=>{A&&A(!k),k&&v&&this.requestFullscreen()},en=()=>{this.setState({volume:+!!I}),C(!I)},ei=()=>{this.setState({playing:!0})},ea=()=>{this.setState({playing:!1})},es=()=>{this.setState({playing:!K})};return(0,_.jsxs)(l.n1,{height:j||"media-viewer"===g?"inherit":void 0,rounding:F,wash:!j&&"media-viewer"!==g||void 0,width:j||"media-viewer"===g?"inherit":void 0,willChangeTransform:!((0,P.nr)(h.userAgent.browserName)&&B),children:[H?this.renderCloseupVideoEndCard(ee??"",J??1,Q??1,s):(0,_.jsxs)(l.Rp,{accessibilityLabel:this.props.i18n._('Pause or play video', 'pin.closeup.video.tap', 'tap area to pause or play video'),fullHeight:j||"media-viewer"===g,onMouseEnter:"hover"===m?this.handleShowControls:void 0,onMouseLeave:"hover"===m?this.handleHideControls:void 0,onTap:this.handleTouch,rounding:200,children:[(0,_.jsx)(V.A,{playing:K,zIndexValue:99}),(0,_.jsx)(c.A,{id:"VideoWithContextLogging",children:(0,_.jsx)(W.Ay,{aspectRatio:e??(Q??1)/(J??1),backgroundColor:j?"black":r.lr,captions:f,closeupStoryPinViewability:n,contextLogData:{...i,video_id:this.props.video.id},hlsConfig:{startLevel:2},isAutoPlay:!!t,isMainCloseupIdeaVideo:D,loop:o,objectFit:d,onControlsPause:this.handlePause,onControlsPlay:this.handlePlay,onEnded:this.handleEnded,onFullscreenChange:this.handleFullscreenChange,onPlay:()=>{},onPlayError:()=>{},onPlayheadDown:this.handlePlayheadDown,onPlayheadUp:this.handlePlayheadUp,onReady:this.handleReady,onTimeChange:"storyPin"===g?z:({time:e})=>{$&&"number"==typeof X?.duration&&X.duration>0&&w&&$({currentTime:e,duration:X.duration/1e3},w)},onVolumeChange:this.handleVolumeChange,pin:x,pinKey:x,playing:K,poster:ee,preferMp4:u,preload:p,seekTime:M,src:Z,variant:g,video:u&&X||q||{},videoStartTime:G||b,volume:U})})]}),(0,_.jsx)(l.az,{onMouseEnter:"hover"===m?this.handleShowControls:void 0,onMouseLeave:"hover"===m?this.handleHideControls:void 0,children:"storyPin"!==g&&(0,_.jsx)(l.az,{bottom:!0,dangerouslySetInlineStyle:{__style:{...O?{...N.$r}:{},flexDirection:"column-reverse"}},display:"flex",height:128,maxHeight:T,maxWidth:E,paddingX:6,position:"absolute",width:"100%",zIndex:R.xx,children:(0,_.jsx)(c.A,{id:"IdeaPinVideoScrubber",children:(0,_.jsx)(L.A,{activePageIndex:0,captionsUrl:f,handleMute:en,handlePanelChange:et,handlePause:ea,handlePausePlay:es,handlePlay:ei,handleWatchAgain:this.handleRestartVideo,inMilliseconds:!1,isMuted:I,isPanelOpen:k,isPlaying:K,isStoryPin:!1,pinKey:x,progressInfo:S,showEndCard:H,showVideoControls:O,viewParameter:156})})})})]})}componentDidMount(){(0,s.A)("AuthDesktopWebCloseupVideo","/app/common/react/components/video/closeup/AuthDesktopWebCloseupVideo.tsx")}}function U(e){(0,o.useEffect)(()=>{(0,s.A)("AuthDesktopWebCloseupVideo","/app/common/react/components/video/closeup/AuthDesktopWebCloseupVideo.tsx")},[]);let{pinKey:t,pinId:n,isPromoted:i,video:a,muted:l,variant:u}=e,p=(0,m.A)(K,t),h=(0,g.A)(),f=(0,z._8)(),v=(0,k.d)(),{seekTimes:b}=(0,M.S_)(),{clientTrackingParams:x,closeupWithinMasonryEnabled:w,isCloseupMediaViewerOpen:S}=(0,y._G)(),{maxWidth:A}=(0,r.Vc)(),{appUI:P,setCurrentVideo:C}=(0,O.Y)(),{videosAutoplaying:I}=P,{organicVideosAutoplaying:j,promotedVideosAutoplaying:T}=I,E=f.locale.toLowerCase(),V=(a.mp4?.captions_urls||a.hlsv3?.captions_urls)??{},L=E&&V[E]||Object.values(V)[0]||"",R=(0,D.qJ)(),N=i?T[n]:j[n],W=parseInt((0,F.A)().t||0,10),[B,$]=(0,o.useState)(N?.currentTime||0),[U,G]=(0,o.useState)(null),[q,X]=(0,o.useState)(!0),[Z,J]=(0,o.useState)(l),{maxHeight:Y}=(0,d.A)({pinKey:p,isVideo:!0});(0,o.useEffect)(()=>{let e=B;W>0&&(e=W),b[n]&&(e=b[n]),$(e)},[b,n,W,B]);let Q=(0,o.useMemo)(()=>("default"!==u||!S)&&(!N||!N.paused),[u,N,S]);return(0,_.jsx)(c.A,{id:"CloseupVideoInner",children:(0,_.jsx)(H,{...e,captions:String(L)||"",clientTrackingParams:x,closeupWithinMasonryEnabled:w,i18n:h,isCloseupMediaViewerOpen:S,isDesktop:R,isMuted:Z,isPanelOpen:q,isPlaying:Q,maxHeight:Y,maxWidth:"media-viewer"===u?void 0:A,panelOpen:q,pin:p,progressInfo:U,requestContext:f,seekTime:b[n],setCurrentVideo:C,setMute:J,setPanelOpen:X,setProgressInfo:G,storyPinStepStopwatch:v,variant:u,videoStartTime:B})})}B(H,"defaultProps",{loop:!1,showControls:"hover"})},838084(e,t,n){n.d(t,{A:()=>i});function i(e){return e?[e["736x"],e["564x"],e["474x"],e["236x"]].find(e=>e?.url)??null:null}},17171(e,t,n){n.d(t,{A:()=>o});var i=n(647627),a=n.n(i),s=n(892804);function o(e){if("u"<typeof window||!document.head)return(0,s.GV)("load_fonts.failure",{sampleRate:1,tags:{failure_reason:"window undefined"}}),Promise.reject(Error("Window is undefined or no head on the document. Unable to load fonts"));let{head:t}=document,n=[];return e.forEach(e=>{e.styles.forEach(i=>{let s=document.querySelector(`#${e.fontFamily??""}-${i.name}`);s||((s=document.createElement("style")).setAttribute("id",`${e.fontFamily??""}-${i.name}`),t.appendChild(s),e.format&&i.fontUrl&&s&&s.sheet&&s.sheet.insertRule(`
            @font-face {
              font-family: "${e.fontFamily??""}";
              font-style: "${i.fontStyle}";
              font-weight: "${i.fontWeight}";
              src: url("${i.fontUrl}") format("${e.format}");
            }
          `,0),n.push(new(a())(e.fontFamily,{style:i.fontStyle,weight:i.fontWeight}).load()))})}),Promise.all(n).then(()=>{Promise.resolve()}).catch(e=>{(0,s.GV)("load_fonts.failure",{sampleRate:1,tags:{failure_reason:"unsuccessful load"}}),Promise.reject(e)})}},544303(e,t,n){n.d(t,{A:()=>o});var i=n(335831),a=n(859471),s=n(562615);let o=({size:e=56})=>((0,a.useEffect)(()=>{(0,i.A)("Facebook","/app/packages/gestalt-custom-svg/dynamicSVGs/Facebook.tsx")},[]),(0,s.jsxs)("svg",{display:"block",fill:"none",height:e,viewBox:"0 0 56 56",width:e,xmlns:"http://www.w3.org/2000/svg",children:[(0,s.jsx)("path",{d:"M56 28C56 12.536 43.464 0 28 0S0 12.536 0 28c0 13.975 10.24 25.56 23.625 27.66V36.094h-7.11V28h7.11v-6.169c0-7.017 4.18-10.893 10.576-10.893 3.064 0 6.268.546 6.268.546v6.891h-3.53c-3.479 0-4.564 2.159-4.564 4.373V28h7.766l-1.242 8.094h-6.524V55.66C45.761 53.56 56 41.975 56 28Z",fill:"#1877F2"}),(0,s.jsx)("path",{d:"M38.9 36.094 40.14 28h-7.765v-5.252c0-2.215 1.085-4.373 4.563-4.373h3.53v-6.89s-3.203-.547-6.267-.547c-6.396 0-10.576 3.876-10.576 10.893V28h-7.11v8.094h7.11V55.66a28.206 28.206 0 0 0 8.75 0V36.094h6.524Z",fill:"#fff"})]}))},915625(e,t,n){n.d(t,{A:()=>o});var i=n(335831),a=n(859471),s=n(562615);let o=({size:e=56})=>((0,a.useEffect)(()=>{(0,i.A)("Line","/app/packages/gestalt-custom-svg/dynamicSVGs/Line.tsx")},[]),(0,s.jsxs)("svg",{display:"block",fill:"none",height:e,viewBox:"0 0 56 56",width:e,xmlns:"http://www.w3.org/2000/svg",children:[(0,s.jsx)("path",{d:"M28 56c15.464 0 28-12.536 28-28S43.464 0 28 0 0 12.536 0 28s12.536 28 28 28Z",fill:"#00B900"}),(0,s.jsx)("path",{d:"M46.625 26.32c0-8.335-8.354-15.115-18.625-15.115-10.267 0-18.625 6.78-18.625 15.115 0 7.471 6.627 13.73 15.578 14.91.606.13 1.432.401 1.642.92.187.47.122 1.208.06 1.684l-.265 1.596c-.08.471-.373 1.843 1.615 1.003 1.988-.835 10.724-6.314 14.634-10.812 2.693-2.964 3.986-5.969 3.986-9.3Z",fill:"#fff"}),(0,s.jsx)("path",{d:"M24.215 22.293H22.91c-.201 0-.364.163-.364.364v8.115c0 .2.163.364.364.364h1.306c.2 0 .364-.163.364-.364v-8.12a.363.363 0 0 0-.364-.36ZM33.208 22.293H31.9c-.2 0-.364.163-.364.364v4.82l-3.72-5.02c-.009-.015-.018-.024-.027-.038l-.005-.005-.023-.023c-.005 0-.005-.005-.005-.005-.005-.005-.014-.01-.019-.014l-.009-.01c-.005-.004-.014-.008-.019-.013-.004-.005-.009-.005-.009-.005a.036.036 0 0 0-.019-.01c-.004 0-.009-.004-.009-.004-.005-.004-.014-.004-.019-.01-.004 0-.009-.004-.014-.004l-.023-.01c-.005 0-.01 0-.014-.004-.01 0-.014-.005-.019-.005h-.014c-.004 0-.014 0-.018-.004H26.212c-.2 0-.364.163-.364.364v8.115c0 .2.164.364.364.364h1.307c.2 0 .364-.163.364-.364v-4.82l3.724 5.03a.283.283 0 0 0 .093.089s.005 0 .005.005c.01.004.014.009.023.014.005 0 .005.004.01.004.004.005.01.005.018.01.005.004.01.004.02.009.004 0 .008.005.008.005.01.004.02.004.024.009h.004c.028.01.061.014.094.014h1.306c.201 0 .364-.163.364-.364v-8.125a.37.37 0 0 0-.368-.36ZM21.065 29.097h-3.551v-6.445c0-.2-.164-.364-.364-.364h-1.307c-.2 0-.364.163-.364.364v8.115c0 .098.037.187.103.252l.004.005.005.005c.065.06.154.102.252.102h5.217c.201 0 .364-.163.364-.364v-1.306a.358.358 0 0 0-.359-.364ZM40.422 24.323c.201 0 .364-.163.364-.364v-1.307c0-.2-.163-.364-.364-.364h-5.217a.353.353 0 0 0-.252.103l-.005.005c0 .004-.004.004-.004.004a.373.373 0 0 0-.103.252v8.115c0 .098.037.187.103.252l.004.005.005.005c.065.06.154.102.252.102h5.217c.201 0 .364-.163.364-.364v-1.306c0-.2-.163-.364-.364-.364h-3.55v-1.372h3.55c.201 0 .364-.164.364-.364v-1.307c0-.2-.163-.364-.364-.364h-3.55v-1.372h3.55v.005Z",fill:"#00B900"})]}))},149018(e,t,n){n.d(t,{A:()=>o});var i=n(335831),a=n(859471),s=n(562615);let o=({size:e=56})=>((0,a.useEffect)(()=>{(0,i.A)("Messenger","/app/packages/gestalt-custom-svg/dynamicSVGs/Messenger.tsx")},[]),(0,s.jsxs)("svg",{display:"block",fill:"none",height:e,viewBox:"0 0 56 56",width:e,xmlns:"http://www.w3.org/2000/svg",children:[(0,s.jsx)("rect",{fill:"#fff",height:"56",rx:"28",width:"56"}),(0,s.jsx)("rect",{height:"55",rx:"27.5",stroke:"#767676",strokeOpacity:".4",width:"55",x:".5",y:".5"}),(0,s.jsx)("path",{d:"M28 12c-9.012 0-16 6.604-16 15.52 0 4.664 1.912 8.696 5.024 11.48.26.232.42.56.428.912l.088 2.848c.028.908.964 1.5 1.796 1.132l3.176-1.4c.268-.12.572-.14.856-.064 1.46.4 3.012.616 4.632.616 9.012 0 16-6.604 16-15.52S37.012 12 28 12Z",fill:"url(#paint0_radial_3730_649_messenger)"}),(0,s.jsx)("path",{d:"m18.392 32.06 4.7-7.456a2.401 2.401 0 0 1 3.472-.64l3.74 2.804a.96.96 0 0 0 1.156-.004l5.048-3.832c.672-.512 1.552.296 1.104 1.012l-4.704 7.452a2.401 2.401 0 0 1-3.472.64l-3.74-2.804a.96.96 0 0 0-1.156.004l-5.048 3.832c-.672.512-1.552-.292-1.1-1.008Z",fill:"#fff"}),(0,s.jsx)("defs",{children:(0,s.jsxs)("radialGradient",{cx:"0",cy:"0",gradientTransform:"translate(18.16 43.826) scale(34.8672)",gradientUnits:"userSpaceOnUse",id:"paint0_radial_3730_649_messenger",r:"1",children:[(0,s.jsx)("stop",{stopColor:"#09F"}),(0,s.jsx)("stop",{offset:".61",stopColor:"#A033FF"}),(0,s.jsx)("stop",{offset:".935",stopColor:"#FF5280"}),(0,s.jsx)("stop",{offset:"1",stopColor:"#FF7061"})]})})]}))},930798(e,t,n){n.d(t,{A:()=>o});var i=n(335831),a=n(859471),s=n(562615);let o=({size:e=56})=>((0,a.useEffect)(()=>{(0,i.A)("Telegram","/app/packages/gestalt-custom-svg/dynamicSVGs/Telegram.tsx")},[]),(0,s.jsxs)("svg",{display:"block",fill:"none",height:e,viewBox:"0 0 56 56",width:e,xmlns:"http://www.w3.org/2000/svg",children:[(0,s.jsx)("path",{d:"M28 56C43.464 56 56 43.464 56 28C56 12.536 43.464 0 28 0C12.536 0 0 12.536 0 28C0 43.464 12.536 56 28 56Z",fill:"url(#paint0_linear_3_21)"}),(0,s.jsx)("path",{clipRule:"evenodd",d:"M12.6745 27.7045C20.837 24.1482 26.28 21.8037 29.0034 20.6709C36.7793 17.4366 38.3951 16.8748 39.4482 16.8563C39.6799 16.8522 40.1978 16.9096 40.5332 17.1818C40.8165 17.4116 40.8944 17.7221 40.9317 17.9401C40.969 18.158 41.0155 18.6544 40.9786 19.0423C40.5572 23.4698 38.7339 34.2141 37.8063 39.1729C37.4138 41.2712 36.641 41.9747 35.8928 42.0436C34.2667 42.1932 33.032 40.969 31.4571 39.9366C28.9928 38.3212 27.6006 37.3156 25.2085 35.7393C22.444 33.9175 24.2361 32.9162 25.8116 31.2799C26.2239 30.8517 33.3881 24.3352 33.5268 23.7441C33.5441 23.6701 33.5602 23.3946 33.3965 23.249C33.2328 23.1035 32.9911 23.1533 32.8168 23.1929C32.5696 23.249 28.6328 25.8511 21.0062 30.9992C19.8887 31.7665 18.8766 32.1404 17.9697 32.1208C16.97 32.0992 15.0469 31.5555 13.6172 31.0908C11.8637 30.5208 10.4701 30.2195 10.5914 29.2514C10.6547 28.7472 11.349 28.2316 12.6745 27.7045Z",fill:"white",fillRule:"evenodd"}),(0,s.jsx)("defs",{children:(0,s.jsxs)("linearGradient",{gradientUnits:"userSpaceOnUse",id:"paint0_linear_3_21",x1:"2800",x2:"2800",y1:"0",y2:"5558.47",children:[(0,s.jsx)("stop",{stopColor:"#2AABEE"}),(0,s.jsx)("stop",{offset:"1",stopColor:"#229ED9"})]})})]}))},415825(e,t,n){n.d(t,{A:()=>o});var i=n(335831),a=n(859471),s=n(562615);let o=({size:e=56})=>((0,a.useEffect)(()=>{(0,i.A)("Viber","/app/packages/gestalt-custom-svg/dynamicSVGs/Viber.tsx")},[]),(0,s.jsxs)("svg",{display:"block",fill:"none",height:e,viewBox:"0 0 56 56",width:e,xmlns:"http://www.w3.org/2000/svg",children:[(0,s.jsx)("rect",{fill:"#7360F2",height:"56",rx:"28",width:"56"}),(0,s.jsx)("path",{clipRule:"evenodd",d:"M29.362 31.327s.57.05.875-.33l.597-.75c.288-.374.984-.61 1.665-.232.902.509 2.067 1.309 2.866 2.054.44.371.542.918.242 1.495l-.002.012a6.278 6.278 0 0 1-1.243 1.53l-.012.009c-.587.489-1.261.773-1.983.538l-.013-.018c-1.296-.367-4.405-1.952-6.386-3.532-3.242-2.558-5.546-6.776-6.183-9.038l-.02-.013c-.235-.724.052-1.398.539-1.984l.01-.01a6.224 6.224 0 0 1 1.53-1.243l.012-.003c.576-.3 1.122-.198 1.494.243.49.505 1.408 1.721 2.054 2.865.378.68.141 1.377-.231 1.664l-.752.598c-.379.306-.33.876-.33.876s1.113 4.207 5.271 5.269Zm6.543-3.488a.405.405 0 0 1-.406-.403c-.018-2.44-.752-4.384-2.178-5.776-1.43-1.393-3.236-2.108-5.37-2.122a.403.403 0 0 1-.4-.408.403.403 0 0 1 .403-.402h.003c2.35.016 4.344.808 5.93 2.352 1.586 1.55 2.402 3.687 2.422 6.35a.406.406 0 0 1-.401.409h-.003Zm-2.127-.832h-.01a.405.405 0 0 1-.395-.414c.032-1.384-.364-2.503-1.208-3.425-.84-.918-1.993-1.42-3.527-1.532a.406.406 0 0 1-.374-.433.406.406 0 0 1 .433-.375c1.725.127 3.093.73 4.065 1.794.977 1.066 1.456 2.409 1.42 3.989a.406.406 0 0 1-.404.396Zm-2.077-.696a.404.404 0 0 1-.404-.386c-.068-1.373-.716-2.045-2.036-2.117a.404.404 0 1 1 .043-.808c1.744.093 2.712 1.092 2.8 2.886a.403.403 0 0 1-.383.423l-.02.002Zm9.09 4.625c-.808 6.503-5.563 6.913-6.44 7.195-.374.12-3.843.982-8.203.698 0 0-3.251 3.92-4.266 4.94-.158.159-.344.223-.469.194-.175-.043-.223-.251-.22-.553l.027-5.354v-.001c-6.35-1.764-5.98-8.394-5.908-11.864.072-3.47.724-6.315 2.661-8.227 3.48-3.152 10.65-2.681 10.65-2.681 6.054.027 8.955 1.85 9.628 2.46 2.234 1.912 3.371 6.49 2.54 13.193Zm-.87-14.817c-.796-.73-4.01-3.064-11.167-3.096 0 0-8.44-.51-12.554 3.267-2.29 2.29-3.096 5.64-3.181 9.797-.085 4.157-.195 11.944 7.311 14.056l.008.002-.005 3.221s-.047 1.306.812 1.572c1.039.322 1.648-.669 2.641-1.738a88.708 88.708 0 0 0 1.863-2.107c5.135.43 9.082-.556 9.532-.701 1.036-.337 6.902-1.088 7.857-8.876.984-8.03-.477-13.106-3.117-15.397Z",fill:"#fff",fillRule:"evenodd"})]}))},520621(e,t,n){n.d(t,{A:()=>o});var i=n(335831),a=n(859471),s=n(562615);let o=({size:e=56})=>((0,a.useEffect)(()=>{(0,i.A)("Whatsapp","/app/packages/gestalt-custom-svg/dynamicSVGs/Whatsapp.tsx")},[]),(0,s.jsxs)("svg",{display:"block",fill:"none",height:e,viewBox:"0 0 56 56",width:e,xmlns:"http://www.w3.org/2000/svg",children:[(0,s.jsx)("rect",{fill:"#25D366",height:"56",rx:"28",width:"56"}),(0,s.jsx)("path",{clipRule:"evenodd",d:"M39.206 16.65A15.75 15.75 0 0 0 27.99 12c-8.74 0-15.854 7.113-15.857 15.855a15.821 15.821 0 0 0 2.117 7.927L12 44l8.406-2.205a15.837 15.837 0 0 0 7.577 1.93h.007c8.74 0 15.853-7.114 15.856-15.857a15.76 15.76 0 0 0-4.64-11.218ZM27.99 41.047h-.005c-2.365 0-4.684-.636-6.708-1.837l-.482-.286-4.988 1.309 1.331-4.864-.313-.499a13.146 13.146 0 0 1-2.015-7.014c.003-7.266 5.915-13.178 13.185-13.178a13.09 13.09 0 0 1 9.318 3.865 13.098 13.098 0 0 1 3.856 9.324c-.003 7.267-5.915 13.18-13.179 13.18Zm7.23-9.871c-.397-.199-2.345-1.157-2.708-1.289-.364-.132-.628-.198-.891.198-.264.397-1.024 1.29-1.255 1.554-.231.264-.462.297-.858.099-.396-.199-1.673-.617-3.187-1.966-1.178-1.051-1.973-2.348-2.204-2.745-.231-.397-.024-.611.173-.808.178-.178.397-.463.595-.695.198-.23.264-.396.396-.66.132-.265.066-.496-.033-.695-.098-.198-.89-2.148-1.221-2.941-.322-.773-.649-.668-.892-.68a16.01 16.01 0 0 0-.759-.014c-.264 0-.693.099-1.057.495-.363.397-1.387 1.356-1.387 3.305 0 1.95 1.42 3.835 1.618 4.1.199.264 2.794 4.265 6.769 5.982.945.409 1.683.653 2.259.835.948.302 1.812.26 2.495.157.76-.114 2.344-.958 2.674-1.884.33-.925.33-1.719.23-1.884-.098-.166-.362-.266-.758-.464Z",fill:"#fff",fillRule:"evenodd"})]}))},556971(e,t,n){n.d(t,{A:()=>l});var i=n(335831),a=n(859471),s=n(625277),o=n(562615);let l=({size:e=56})=>{(0,a.useEffect)(()=>{(0,i.A)("X","/app/packages/gestalt-custom-svg/dynamicSVGs/X.tsx")},[]);let{isDarkMode:t}=(0,s.D2)();return(0,o.jsxs)("svg",{display:"block",fill:"none",height:e,viewBox:"0 0 56 56",width:e,xmlns:"http://www.w3.org/2000/svg",children:[(0,o.jsx)("rect",{fill:t?"white":"#111111",height:"56",rx:"28",width:"56"}),(0,o.jsx)("path",{d:"M30.3055 25.8561L40.505 14H38.088L29.2318 24.2945L22.1584 14H14L24.6964 29.5671L14 42H16.4171L25.7695 31.1287L33.2396 42H41.3979L30.3049 25.8561H30.3055ZM26.995 29.7042L25.9112 28.1541L17.288 15.8196H21.0005L27.9595 25.7739L29.0433 27.324L38.0892 40.2632H34.3767L26.995 29.7048V29.7042Z",fill:t?"#111111":"white"})]})}},120093(e,t,n){n.d(t,{A:()=>l});var i=n(335831),a=n(859471),s=n(43333),o=n(562615);function l({alt:e,children:t,color:n,elementTiming:l,fetchPriority:r,isActive:d=!1,naturalHeight:c,naturalWidth:u,onLoad:p,src:h,fit:m="none",srcSet:g,...y}){let f,_;return(0,a.useEffect)(()=>{(0,i.A)("ImageWithPerfTiming","/app/packages/pwt-logger/ImageWithPerfTiming.tsx")},[]),f=(0,a.useRef)(null),_=(0,a.useRef)(null),(0,a.useEffect)(()=>{if(h!==f.current||d&&d!==_.current){f.current=h??null;let e=document.querySelector(`img[src="${h}"]`)||null;e?.complete&&p()}_.current=d},[h,p,d]),(0,o.jsx)(s.A,{...y,alt:e,color:n,elementTiming:l,fetchPriority:r,fit:m,naturalHeight:c,naturalWidth:u,onLoad:p,src:h,srcSet:g,children:t})}},244408(e,t,n){n.d(t,{A:()=>i});let i=(0,n(859471).createContext)(null)},495618(e,t,n){n.d(t,{A:()=>i});let i=(0,n(859471).createContext)(null)},591490(e,t,n){n.d(t,{A:()=>x});var i=n(859471),a=n(767216),s=n(594555),o=n(532259),l=n(251954),r=n(291982),d=n(45738),c=n(850855),u=n(863892),p=n(931464),h=n(31710),m=n(290251),g=n(132460),y=n(570927);let f=(0,o.lo)("PwtStopwatch"),_=(e,t)=>{if(y.A){if("start"===t.type&&!e.isTiming){let{name:n,startTime:i,navigationType:a}=t;return(0,s.DM)(`TIMING.${n}`),{isTiming:!0,name:n,isSampled:t.isSampled,startTime:"number"==typeof i?i:y.A.now(),metricId:{type:"stopwatch",name:n,navigationType:a},pwtStaticContext:t.pwtStaticContext,annotations:e.annotations,binaryAnnotations:e.binaryAnnotations,spans:e.spans,traceId:e.traceId,spanNameUpdates:e.spanNameUpdates}}if(!e.isTiming)if(t.bypassIsTimingCheck)f("allowing action while stopwatch is not actively timing (bypassIsTimingCheck is set to true)",t);else{let n=t.name||e.name;return f("ignoring action - stopwatch is not actively timing",t),(0,s.DM)(`WARN.${n}.noTiming.${t.type}`),e}if("annotate"===t.type){let n=y.A.now();return f(`adding annotation {${t.label}: ${n}}`),{...e,annotations:e.annotations.concat([{label:t.label,timestamp:n}])}}if("binaryAnnotate"===t.type)return f(`adding binary annotation {${t.name}: ${String(t.value)}}`),{...e,binaryAnnotations:{...e.binaryAnnotations,...{[t.name]:{value:t.value,type:t.annotationType}}}};if("binaryAnnotateOperation"===t.type){let{value:n,type:i}=t.binaryAnnotationValueAndType;if(!e.binaryAnnotations[t.name])return{...e,binaryAnnotations:{...e.binaryAnnotations,...{[t.name]:{value:n,type:i}}}};{let a=e.binaryAnnotations[t.name].value||0;return f(`operating on binary annotation {
          name: ${t.name}
          pervious value: ${String(a)}
          operand: ${String(n)}
        }`),{...e,binaryAnnotations:{...e.binaryAnnotations,...{[t.name]:{value:n?t.operation(a,n):a,type:i}}}}}}if("addSubspan"===t.type){f(`adding subspan {${t.name}}`),-1!==e.spans.findIndex(e=>e.name===t.name)&&f(`WARNING: adding duplicate subspan name {${t.name}}`);let n=t.id||(0,g.A)();-1!==e.spans.findIndex(e=>e.id===n)&&f(`WARNING: adding duplicate subspan id {${t.name}: ${n}}`);let i=0;return t.startTime?i=t.startTime:e.startTime?i=e.startTime:f(`WARNING: adding subspan {${t.name}} without start time`),{...e,spans:[...e.spans,{name:t.name,id:n,startTime:i,endTime:t.endTime||1/0,annotationMap:{...t.annotations},binaryAnnotationMap:{...t.binaryAnnotations},parentId:t.parentId}]}}if("subspanStart"===t.type){f(`starting subspan {${t.name}}`),-1!==e.spans.findIndex(e=>e.name===t.name)&&f(`WARNING: starting duplicate subspan name {${t.name}}`);let n=t.id||(0,g.A)();-1!==e.spans.findIndex(e=>e.id===n)&&f(`WARNING: starting duplicate subspan id {${t.name}: ${n}}`);let i=t.parentName?e.spans.find(e=>e.name===t.parentName)?.id:null;return{...e,spans:[...e.spans,{name:t.name,id:n,parentId:t.parentId||i,startTime:y.A.now(),endTime:1/0,annotationMap:{...t.annotations},binaryAnnotationMap:{...t.binaryAnnotations}}]}}if("subspanStop"===t.type){f(`stopping subspan {${t.name}}`),!t.id&&e.spans.filter(e=>e.name===t.name).length>1&&(0,s.vV)("duplicate_subspan_stop_name",{name:t.name,type:t.type});let n=t.id?e.spans.findIndex(e=>e.id===t.id):e.spans.findIndex(e=>e.name===t.name);return n>-1?(e.spans[n].endTime=y.A.now(),t.annotations&&(e.spans[n].annotationMap={...e.spans[n].annotationMap,...t.annotations}),t.binaryAnnotations&&(e.spans[n].binaryAnnotationMap={...e.spans[n].binaryAnnotationMap,...t.binaryAnnotations})):(0,s.vV)("invalid_subspan_stop_name",{name:t.name}),e}if("subspanUpdateName"===t.type){e.spans.filter(e=>e.name===t.currentName).length>1&&(0,s.vV)("duplicate_subspan_stop_name",{name:t.currentName,type:t.type});let n=e.spans.findIndex(e=>e.name===t.currentName);return n>-1?t.updateWhenStopwatchCompletes?e.spanNameUpdates=[...e.spanNameUpdates,{currentName:t.currentName,newName:t.newName}]:(f(`renaming subspan {${t.currentName}} to {${t.newName}}`),e.spans[n].name=t.newName):(0,s.vV)("no_subspan_found_to_rename",{name:t.currentName}),e}if("stop"===t.type&&e.isTiming){let{startTime:n,metricId:i,pwtStaticContext:a,annotations:s,binaryAnnotations:o,isSampled:p,spans:m,traceId:_}=e;if(t.stopwatchPerformanceObserver&&t.stopwatchPerformanceObserver.disconnect(),p){let l=t.stopTime||y.A.now(),p=[...m.map(t=>{t.endTime===1/0&&(t.endTime=l);let n=e.spanNameUpdates.findIndex(e=>t.name===e.currentName);return n>-1&&(f(`renaming subspan {${t.name}} to {${e.spanNameUpdates[n].newName}}`),t.name=e.spanNameUpdates[n].newName,e.spanNameUpdates=e.spanNameUpdates.filter(e=>e.newName!==t.name)),t})];if(t.manualAndResourceSpans||0===m.length){let e=(0,g.A)();p.push({name:"network_resources",id:e,startTime:n,endTime:l,annotationMap:{},binaryAnnotationMap:{},parentId:null},...(t.customStopwatchBuffer||[]).map(t=>(0,u.A)((0,d.B)(t,[]),e)).filter(Boolean))}let v={type:"COMPLETE",metricId:i,traceId:_,startTime:n,endTime:l,spans:p,annotationMap:{...(0,h.A)(s)},binaryAnnotationMap:(0,r.jp)({metricId:i,pwtStaticContext:a,binaryAnnotations:o,performanceResourceTimings:t.customStopwatchBuffer||[],type:"COMPLETE",stopwatchVersion:1})};(0,c.A)({metricId:i,pwtStaticContext:a,result:v})}return(0,l.EG)(),{isTiming:!1,name:e.name,annotations:[],binaryAnnotations:{},spans:[],traceId:(0,g.A)(),spanNameUpdates:[]}}if("error"===t.type){let{error:n,stopwatchPerformanceObserver:i}=t;return n&&(0,s.vV)(n),i&&i.disconnect(),(0,l.EG)(),{isTiming:!1,name:e.name,annotations:[],binaryAnnotations:{},spans:[],traceId:(0,g.A)(),spanNameUpdates:[]}}if("abort"===t.type&&e.isTiming){t.stopwatchPerformanceObserver&&t.stopwatchPerformanceObserver.disconnect();let n=t.reason||"",{startTime:i,metricId:a,pwtStaticContext:s,binaryAnnotations:o,traceId:d}=e,u={type:"ABORT",traceId:d,startTime:i,endTime:y.A.now(),spans:[],annotationMap:{},binaryAnnotationMap:(0,r.jp)({metricId:a,pwtStaticContext:s,binaryAnnotations:o,performanceResourceTimings:t.customStopwatchBuffer||[],type:"ABORT",stopwatchVersion:1}),reason:n};return(0,c.A)({metricId:a,pwtStaticContext:s,result:u}),(0,l.EG)(),{isTiming:!1,name:e.name,annotations:[],binaryAnnotations:{},spans:[],traceId:d,spanNameUpdates:[]}}}return e};var v=n(899738),b=n(562615);let x=({name:e,sampleRate:t,abortOnUnloadOrClientNavigation:n=!0,navigationType:o,manualAndResourceSpans:r=!1})=>{let{Provider:d,getMaybe:c}=(0,a.A)(`Stopwatch_${e}`);return{Provider:function({children:a}){let c=(({name:e,sampleRate:t,navigationType:n,manualAndResourceSpans:a=!1})=>{let s=(0,p.A)(),o=(0,i.useRef)([]),r=(0,i.useRef)(null),d=(0,i.useRef)(null);null===d.current&&(d.current=(0,l.Qr)());let[c,u]=(0,i.useReducer)(_,{isTiming:!1,name:e,annotations:[],binaryAnnotations:{},spans:[],traceId:d.current,spanNameUpdates:[]});return s?{isTiming:c.isTiming,name:c.name,start:i=>(window.PerformanceObserver&&(o.current=[],r.current=(0,m.A)({entryTypes:["resource"]},e=>{o.current=o.current.concat(e.getEntries()),o.current.length>1e3&&(o.current=o.current.slice(-1e3))})),u({type:"start",startTime:i,name:e,navigationType:n,pwtStaticContext:s,isSampled:!t||Math.random()<t})),stop:e=>u({type:"stop",stopTime:e,stopwatchPerformanceObserver:r.current,customStopwatchBuffer:o.current,manualAndResourceSpans:a}),error:e=>{u({type:"error",stopwatchPerformanceObserver:r.current,error:e})},abort:e=>u({type:"abort",stopTime:y.A?.now(),stopwatchPerformanceObserver:r.current,customStopwatchBuffer:o.current,reason:e}),annotate:(e,t,n=!1)=>u({type:"annotate",label:e,parentId:t,bypassIsTimingCheck:n}),binaryAnnotate:(e,t,n,i,a=!1)=>u({type:"binaryAnnotate",name:e,value:t,annotationType:n,parentId:i,bypassIsTimingCheck:a}),binaryAnnotateOperation:({name:e,binaryAnnotationValueAndType:t,operation:n,parentId:i,bypassIsTimingCheck:a=!1})=>u({type:"binaryAnnotateOperation",name:e,binaryAnnotationValueAndType:t,operation:n,parentId:i,bypassIsTimingCheck:a}),addSubspan:({name:e,startTime:t,endTime:n,annotations:i={},binaryAnnotations:a={},parentId:s=null,id:o=null,bypassIsTimingCheck:l=!1})=>u({type:"addSubspan",name:e,startTime:t,endTime:n,annotations:i,binaryAnnotations:a,parentId:s,id:o,bypassIsTimingCheck:l}),subspanStart:({name:e,annotations:t={},binaryAnnotations:n={},parentId:i=null,parentName:a=null,id:s=null,bypassIsTimingCheck:o=!1})=>u({type:"subspanStart",name:e,annotations:t,binaryAnnotations:n,parentId:i,parentName:a,id:s,bypassIsTimingCheck:o}),subspanStop:({name:e,annotations:t,binaryAnnotations:n,id:i,parentId:a,bypassIsTimingCheck:s=!1})=>u({type:"subspanStop",name:e,annotations:t,binaryAnnotations:n,id:i,parentId:a,bypassIsTimingCheck:s}),subspanUpdateName:({currentName:e,newName:t,bypassIsTimingCheck:n,updateWhenStopwatchCompletes:i=!0})=>u({type:"subspanUpdateName",currentName:e,newName:t,bypassIsTimingCheck:n,updateWhenStopwatchCompletes:i}),getSpans:(e,t)=>c.spans.filter(n=>n[e]===t),getTraceId:()=>c.traceId}:null})({name:e,sampleRate:t,navigationType:o,manualAndResourceSpans:r}),u=(0,v.A)(),h=u?u.time:0,g=(0,i.useRef)("NotStarted"),f=c?.isTiming,x=(0,i.useCallback)(t=>{"Started"===g.current?(g.current="Stopped",c?.abort(t)):(0,s.DM)(`WARN.${e}.noTiming.abort`)},[c]),w=(0,i.useCallback)((e,t)=>{c?.annotate(e,t)},[c]),S=(0,i.useCallback)((e,t,n,i)=>{c?.binaryAnnotate(e,t,n,i)},[c]),A=(0,i.useCallback)(({name:e,binaryAnnotationValueAndType:t,operation:n,parentId:i,bypassIsTimingCheck:a})=>{c?.binaryAnnotateOperation({name:e,binaryAnnotationValueAndType:t,operation:n,parentId:i,bypassIsTimingCheck:a})},[c]),P=(0,i.useCallback)(({name:e,startTime:t,endTime:n,annotations:i,binaryAnnotations:a,parentId:s,id:o,bypassIsTimingCheck:l})=>{c?.addSubspan({name:e,startTime:t,endTime:n,annotations:i,binaryAnnotations:a,parentId:s,id:o,bypassIsTimingCheck:l})},[c]),k=(0,i.useCallback)(({name:e,annotations:t,binaryAnnotations:n,parentId:i,parentName:a,id:s,bypassIsTimingCheck:o})=>{c?.subspanStart({name:e,annotations:t,binaryAnnotations:n,parentId:i,parentName:a,id:s,bypassIsTimingCheck:o})},[c]),C=(0,i.useCallback)(({name:e,annotations:t,binaryAnnotations:n,id:i,parentId:a,bypassIsTimingCheck:s})=>{c?.subspanStop({name:e,annotations:t,binaryAnnotations:n,id:i,parentId:a,bypassIsTimingCheck:s})},[c]),I=(0,i.useCallback)(({currentName:e,newName:t,bypassIsTimingCheck:n,updateWhenStopwatchCompletes:i})=>{c?.subspanUpdateName({currentName:e,newName:t,bypassIsTimingCheck:n,updateWhenStopwatchCompletes:i})},[c]),j=(0,i.useCallback)((e,t)=>c?c.getSpans(e,t):[],[c]),T=(0,i.useCallback)(()=>c?c.getTraceId():"",[c]),E=(0,i.useCallback)(t=>{"Started"===g.current?(g.current="Stopped",c?.error(t)):(0,s.DM)(`WARN.${e}.noTiming.error`)},[c]),z=(0,i.useCallback)(e=>{"Started"===g.current&&c?.abort("duplicated_init_stopwatch_action"),g.current="Started",c?.start(e)},[c]),V=(0,i.useCallback)(e=>{"NotStarted"===g.current&&(g.current="Started",c?.start(e))},[c]),L=(0,i.useCallback)(t=>{"Started"===g.current?(g.current="Stopped",c?.stop(t)):(0,s.DM)(`WARN.${e}.noTiming.stop`)},[c]);(0,i.useEffect)(()=>()=>{n&&x("unloadOrClientNavigation")},[h]);let R=(0,i.useMemo)(()=>({name:e,isTiming:f,abort:x,addAnnotation:w,addBinaryAnnotation:S,binaryAnnotationOperation:A,addSubspan:P,subspanStart:k,subspanStop:C,getSpans:j,getTraceId:T,updateSubspanName:I,stop:L,error:E,start:z,startOnce:V}),[f,x,w,S,A,P,k,C,j,T,I,L,E,z,V]);return(0,b.jsx)(d,{value:R,children:a})},get:c}}},839978(e,t,n){n.d(t,{d:()=>o,t:()=>s});let{Provider:i,get:a}=(0,n(591490).A)({name:"story_pin_step",sampleRate:1}),s=i,o=a},899738(e,t,n){n.d(t,{A:()=>s});var i=n(859471),a=n(244408);function s(){return(0,i.use)(a.A)}},931464(e,t,n){n.d(t,{A:()=>s});var i=n(859471),a=n(495618);function s(){return(0,i.use)(a.A)}},44868(e,t,n){n.d(t,{A:()=>c});var i=n(335831),a=n(859471),s=n(836737),o=n(94024),l=n(538346),r=n(998053),d=n(562615);function c({playing:e,zIndexValue:t}){return(0,a.useEffect)(()=>{(0,i.A)("PausePlayOverlay","/app/packages/story-pin/Closeup/PausePlayOverlay.tsx")},[]),(0,d.jsxs)(a.Fragment,{children:[(0,d.jsx)(l.A,{unsafeCSS:"#story-pin-closeup-pause-play-overlay svg { filter: drop-shadow( 0px 0px 8px rgba(0,0,0,0.1));}"}),(0,d.jsx)(s.az,{alignItems:"center",bottom:!0,dangerouslySetInlineStyle:{__style:{pointerEvents:"none"}},"data-test-id":"story-pin-closeup-pause-play-overlay",display:"flex",id:"story-pin-closeup-pause-play-overlay",justifyContent:"center",left:!0,opacity:80,position:"absolute",right:!0,rounding:r.Tx,top:!0,zIndex:t?new s.rk(t):o.Lc,children:!e&&(0,d.jsx)(s.In,{accessibilityLabel:"Play",color:"light",icon:"play",size:48})})]})}},94291(e,t,n){n.d(t,{A:()=>w});var i,a=n(335831),s=n(859471);n(825193);var o=n(836737),l=n(900565),r=n(396901),d=n(659630),c=n(23410),u=n(998053),p=n(661399),h=n(798923),m=n(488265),g=n(491149);n(661373);var y=n(855149),f=n(208762),_=n(562615);let v=()=>{},b=({accessibilityLabel:e,dataTestId:t,disable:n,handleTap:i,icon:a})=>(0,_.jsx)(o.az,{"data-test-id":t,opacity:n?50:void 0,children:(0,_.jsx)(o.Rp,{disabled:n,onTap:i,children:(0,_.jsx)(o.In,{accessibilityLabel:e,color:"light",icon:a,size:16})})}),x=(void 0!==i||(i=n(475616)).hash&&"2f810e287a1c756ac33896e516afe9a2"!==i.hash&&console.error("The definition of 'IdeaPinVideoScrubberDuplo_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),i);function w({activePageIndex:e,handlePanelChange:t,handlePlay:n,handlePause:i,handlePausePlay:w,handleMute:S,handleVideoScrubbingNewPage:A,handleWatchAgain:P,inMilliseconds:k,isPlaying:C,isMuted:I,isPanelOpen:j,pinKey:T,progressInfo:E,showEndCard:z,showVideoControls:V=!1,viewParameter:L,isStoryPin:R=!0,captionsUrl:M=""}){(0,s.useEffect)(()=>{(0,a.A)("IdeaPinVideoScrubber","/app/packages/story-pin/Closeup/VideoScrubber/IdeaPinVideoScrubber.tsx")},[]);let F=(0,l.A)(x,T),D=(0,r.A)(),{currentTime:O}=E||{},{seekTimes:N}=(0,p.S_)(),{closeupWithinMasonryEnabled:W}=(0,f._G)(),B=(0,y.y)(),K=(0,g.qJ)(),{captionsEnabled:$}=B,H=(0,m.A)(),U=[5,6,2],G=(F?.storyPinData?.pages??[]).filter(e=>void 0===e.layout||!U.includes(e.layout)),q=0===G.length?1:G.length,X=G[e],Z=X?.shouldMute??!1,J=Object.keys(N).includes(F?.entityId??"")&&N[F?.entityId??""]?N[F?.entityId??""]:O,Y=(0,s.useMemo)(()=>G.map(e=>{let t=e.blocks?.find(e=>"StoryPinVideoBlock"===e.__typename&&3===e.blockType),n=t?.__typename==="StoryPinVideoBlock"&&(t?.videoDataV2?.videoListMobile?.vHLSV3MOBILE?.duration||t?.videoDataV2?.videoList720P?.v720P?.duration);return n?{duration:n,isVideo:!0}:{duration:d.L9,isVideo:!1}}),[G]),Q=[{duration:E?.duration||0,isVideo:!0}],ee=R?Y:Q,et=X?.blocks?.[0],en=et?.__typename==="StoryPinVideoBlock"&&et?.videoDataV2?.videoListMobile?.vHLSV3MOBILE?.captionsUrls,ei=!1;(en&&0!==Object.keys(en).length||M)&&(ei=!0);let ea=(0,s.useMemo)(()=>ee.reduce((e,t)=>e+(t.duration||0),0)/(R?1e3:1),[ee,R]),es=(0,s.useMemo)(()=>ee.filter((t,n)=>n<e).reduce((e,t)=>e+(t.duration||0),0)/1e3,[ee,e]),eo=ee.length>0&&ee[e]?.isVideo?O??0:(O??0)*5+(es??0),el=D._('Hide captions', 'gestalt.video.accessibilityHideCaptionsLabel', 'ARIA label for hide captions button'),er=D._('Show captions', 'gestalt.video.accessibilityShowCaptionsLabel', 'ARIA label for show captions button');return(0,_.jsxs)(o.az,{alignContent:"evenly",alignItems:"baseline",dangerouslySetInlineStyle:{__style:{gap:"18.5px",pointerEvents:"auto"}},direction:"column",display:"flex",justifyContent:"between",width:"100%",children:[(0,_.jsxs)(o.az,{alignItems:"center",dangerouslySetInlineStyle:{__style:{opacity:V||!C?1:0,transition:"all .1s"}},direction:"row",display:"flex",justifyContent:"between",width:"99%",children:[(0,_.jsxs)(o.so,{alignItems:"center",direction:"row",gap:5,children:[(0,_.jsx)(b,{accessibilityLabel:C?D._('Pause', 'closeup.IdeaPinVideo.Pause', 'Pause button on Idea Pin video'):D._('Play', 'closeup.IdeaPinVideo.Play', 'Play button on Idea Pin video'),dataTestId:`story-pin-closeup-${C?"pause":"play"}`,handleTap:z&&P?P:w,icon:C?"pause":"play"}),E&&(0,_.jsx)(o.Rp,{children:(0,_.jsxs)(o.az,{"aria-label":`${D._('Video duration', 'closeup.IdeaPinVideo.durationLabel', 'Screen reader label for video duration display')}: ${(0,u.iz)(eo)} of ${(0,u.iz)(ea)}`,"data-test-id":"time-display",children:[(0,_.jsx)(o.KJ,{align:"end",color:"inverse",inline:!0,overflow:"normal",size:"300",weight:"bold",children:`${(0,u.iz)(eo)}`})," ",(0,_.jsx)(o.az,{display:"inlineBlock",opacity:60,children:(0,_.jsx)(o.KJ,{align:"end",color:"inverse",inline:!0,overflow:"normal",size:"300",weight:"bold",children:`/ ${(0,u.iz)(ea)}`})})]})})]}),(0,_.jsxs)(o.so,{direction:"row",gap:5,children:[ei&&(0,_.jsx)(b,{accessibilityLabel:$?er:el,dataTestId:`closed-captions-button-${$?"disable":"enable"}`,handleTap:()=>{let e=K?"desktop_pin_page":"mweb_pin_page";$?(0,h.PM)(`${e}.closed_captions_button.toggle_off`):(0,h.PM)(`${e}.closed_captions_button.toggle_on`),H({action:"click",item:"closed-captions-button"}),B.setCaptionsEnabled(!$)},icon:$?"captions-fill":"captions"}),(0,_.jsx)(b,{accessibilityLabel:I?D._('Unmute', 'closeup.IdeaPinVideo.unmute', 'Unmute button on Idea Pin video'):D._('Mute', 'closeup.IdeaPinVideo.mute', 'Mute button on Idea Pin video'),dataTestId:`story-pin-closeup-${I?"unmute":"mute"}`,disable:Z,handleTap:S,icon:I?"volume-mute":"volume"}),t&&!W&&(0,_.jsx)(b,{accessibilityLabel:j?D._('Maximize', 'closeup.IdeaPinVideo.maximize', 'Maximize button on Idea Pin video'):D._('Minimize', 'closeup.IdeaPinVideo.minimize', 'Minimize button on Idea Pin video'),dataTestId:`story-pin-closeup-${j?"maximize":"minimize"}`,handleTap:t||v,icon:j?"maximize":"minimize"})]})]}),(0,_.jsx)(c.A,{accessibilityValueNow:eo,activePageCurrentTime:J,activePageIndex:e,duration:ea,handlePause:i,handlePlay:n,handleVideoScrubbingNewPage:A,inMilliseconds:k,isPlaying:C,pageCount:q,pageDurations:ee,pinKey:F,progressInfo:E,shouldShowPlayhead:!0,showEndCard:z,showVideoControls:V,videoDurations:ee,viewParameter:L})]})}},23410(e,t,n){n.d(t,{A:()=>w});var i,a=n(335831),s=n(859471);n(825193);var o=n(836737),l=n(233944),r=n(900565),d=n(396901),c=n(659630),u=n(376195);let p="washLight";var h=n(562615);function m({pillHeight:e,scrubberWidth:t}){return(0,s.useEffect)(()=>{(0,a.A)("PaginationProgressPill","/app/packages/story-pin/Closeup/VideoScrubber/PaginationProgressPill.tsx")},[]),(0,h.jsx)(o.az,{dangerouslySetInlineStyle:{__style:{backgroundColor:"rgba(255,255,255,0.24)"}},display:"flex",flex:"grow",height:e,overflow:"hidden",rounding:"pill",children:(0,h.jsx)(o.az,{color:p,dangerouslySetInlineStyle:{__style:{width:t}},"data-test-id":"video-progress-bar",height:"100%",rounding:"pill"})})}var g=n(998053),y=n(661399),f=n(491149);n(661373);let _=()=>{},v=(void 0!==i||(i=n(84381)).hash&&"6a1efce65e0b388d5f09f256d4756b8b"!==i.hash&&console.error("The definition of 'Pagination_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),i),b=({accessibilityValueMax:e,accessibilityValueNow:t,children:n,setHoveringChange:i,handleMouseDown:a,handleMouseLeave:s,handleTouchStart:l,playhead:r,isPlaying:c,showVideoControls:u})=>{let p=(0,d.A)(),m=!(0,f.qJ)();return(0,h.jsx)(o.az,{ref:r,alignItems:"center","aria-label":p._('Video scrubber progress bar', 'ideaPin.closeupvideo.videoScrubberLabel', 'Accessibility label for video scrubber progress bar on video idea pins.'),"aria-valuemax":e,"aria-valuemin":0,"aria-valuenow":t,"aria-valuetext":(0,g.iz)(t),dangerouslySetInlineStyle:{__style:{pointerEvents:"auto",touchAction:"none"}},"data-test-id":"bullet-video-progress-bar",display:"flex",flex:"grow",justifyContent:m?"center":"start",marginBottom:6*!m,minHeight:"8px",onFocus:i(!0),onMouseDown:a,onMouseLeave:s,onMouseOver:i(!0),onTouchEnd:e=>e.preventDefault(),onTouchStart:l,opacity:u||!c?100:0,paddingY:6*!!m,position:"relative",role:"progressbar",width:"100%",children:n})},x=({isRTL:e,isSeeking:t,scrubberWidth:n})=>(0,h.jsx)(o.az,{dangerouslySetInlineStyle:{__style:e?{right:n}:{left:n}},"data-test-id":"video-progress-bar-playhead",position:"relative",children:(0,h.jsx)(o.az,{color:p,height:4,position:"absolute",rounding:"pill",children:(0,h.jsx)(o.az,{color:"washLight",dangerouslySetInlineStyle:{__style:{marginTop:t?-8:-6}},height:t?16:12,marginStart:-2,rounding:"circle",width:t?16:12})})});function w({accessibilityValueNow:e,activePageIndex:t,activePageCurrentTime:n,pageCount:i,progressInfo:d,showEndCard:g,duration:w=0,pageDurations:S=[],handlePlay:A=_,handlePause:P=_,handleVideoScrubbingNewPage:k=_,inMilliseconds:C,videoDurations:I=[],viewParameter:j,isInactiveStreamPin:T=!1,isPlaying:E=!1,setVideoProgress:z,shouldShowPlayhead:V=!1,showVideoControls:L=!0,pinKey:R}){(0,s.useEffect)(()=>{(0,a.A)("Pagination","/app/packages/story-pin/Closeup/VideoScrubber/Pagination.tsx")},[]);let M=(0,r.A)(v,R),F=!(0,f.qJ)(),D=(0,s.useRef)(null),{isRTL:O}=(0,u._8)(),[N,W]=(0,s.useState)(!1),[B,K]=(0,s.useState)(E),[$,H]=(0,s.useState)(),U=(0,l.A)(),[G,q]=(0,s.useState)(!1),{clearSeekTime:X,updateSeekTime:Z}=(0,y.d1)(),J=(0,s.useCallback)((e,n)=>{if(!T&&n<=i){if(n!==t&&k(n),z){let{isVideo:t}=I[n];z({currentTime:e/1e3,duration:t?d?.duration??1:d?.duration??5,pinId:M?.entityId})}Z(e/1e3,M?.entityId??"")}U({event_type:101,view_type:3,view_parameter:j,component:14302})},[t,k,T,U,i,M,d?.duration,z,Z,I,j]),Y=S.map(e=>`${(e.duration||0)/w/10}%`),Q=(0,s.useMemo)(()=>{let e=0;return S.map(({duration:t})=>{let n=t+e,i={min:e,max:n};return e=n,i})},[S]),ee=N?"0 1.2px":"0 1px",et=e=>()=>W(e),en=(0,s.useCallback)(e=>{if(!D.current)return;let{left:t=0,right:n=0,width:i=0}=D.current.getBoundingClientRect(),a=(O?Math.max(0,Math.min((n-e)/i,1)):Math.max(0,Math.min((e-t)/i,1)))*w*1e3,s=Q.findIndex(e=>a>=e.min&&a<=e.max),o=-1===s?0:s;J(a-Q[o].min,o)},[w,J,Q,O]),ei=(0,s.useCallback)(()=>{G||K(E||g),q(!0)},[G,K,E,g]),ea=(0,s.useCallback)(e=>{ei(),E&&P(),en(e.pageX)},[ei,E,P,en]),es=(0,s.useCallback)(e=>{G&&en(e.pageX)},[en,G]),eo=(0,s.useCallback)(e=>{if(G){e.preventDefault();let t=Array.from(e.changedTouches).find(e=>e.identifier===$);t&&en(t.pageX)}},[G,en,$]),el=(0,s.useCallback)(()=>{et(!1),H(void 0),q(!1),B&&A()},[A,B]),er=(0,s.useCallback)(e=>{Array.from(e.changedTouches).find(e=>e.identifier===$)&&(et(!1),H(void 0),q(!1),X()),B&&A()},[X,A,B,$]);return(0,s.useEffect)(()=>(G&&!T&&(window.addEventListener("mousemove",es),window.addEventListener("mouseup",el),window.addEventListener("touchmove",eo),window.addEventListener("touchend",er)),()=>{window.removeEventListener("mousemove",es),window.removeEventListener("mouseup",el),window.removeEventListener("touchmove",eo),window.removeEventListener("touchend",er)}),[es,el,er,eo,T,G,en,B,$]),(0,h.jsx)(b,{accessibilityValueMax:w,accessibilityValueNow:e,handleMouseDown:ea,handleMouseLeave:()=>{et(!1)},handleTouchStart:e=>{ei(),et(!0);let t=e.changedTouches[0];H(t.identifier),en(t.pageX)},isPlaying:E,playhead:D,setHoveringChange:et,showVideoControls:L,children:Array(i).fill(void 0).map((e,a)=>{let s=d?.currentTime??0,l=d?.duration??c.je,r=I[a],u=`${r?.isVideo&&C?Math.floor(1e4*(n??s)/(r.duration/1e3))/100:s/l*100}%`;return(0,h.jsx)(o.az,{dangerouslySetInlineStyle:{__style:{margin:ee}},flex:"grow",width:Y.length===i?Y[a]:"auto",children:(0,h.jsx)(o.az,{dangerouslySetInlineStyle:{__style:{transition:"all .1s"}},"data-test-id":"idea-pin-video-progress-bar",rounding:"pill",children:a<t||g?(0,h.jsx)(o.az,{color:p,height:4,rounding:"pill"}):t===a&&d?(0,h.jsxs)(o.so,{alignItems:"center",flex:"grow",children:[V&&(L||N||G||F)&&(0,h.jsx)(x,{isRTL:O,isSeeking:G,scrubberWidth:u}),(0,h.jsx)(m,{pillHeight:4,scrubberWidth:u})]}):(0,h.jsx)(o.az,{color:p,dangerouslySetInlineStyle:{__style:{opacity:.24}},height:4,rounding:"pill"})})},`${M?.entityId}-${a}`)})})}},781871(e,t,n){n.d(t,{$$:()=>c,Gl:()=>h,VH:()=>p,WZ:()=>u,zD:()=>d});var i=n(859471),a=n(17171),s=n(998053),o=n(225974),l=n(119795);let r=(e,t)=>{let n=(0,s.hm)(e,t);return`${n.y}px ${n.x}px`},d=({alignment:e,verticalAlignment:t})=>{let n={alignItems:"flex-start",display:"flex",height:"100%",justifyContent:"start",textAlign:"left",width:"100%"};return 1===t?n.alignItems="center":2===t&&(n.alignItems="flex-end"),1===e&&(n.justifyContent="center",n.textAlign="center"),n},c=({fontSize:e,hexColor:t,highlightColor:n,letterSpacing:i,lineHeight:a,name:s})=>({fontSize:e,letterSpacing:i,color:t,fontFamily:s,margin:0,maxHeight:"100%",textShadow:!n&&t&&"#ffffff"===t.toLowerCase()?"0px 1px 4px rgba(0, 0, 0, 0.2)":void 0,wordBreak:"break-word",...n?{backgroundColor:n,borderRadius:e/5,padding:r(e,a)}:{}}),u=({fontSize:e,hasText:t,highlightColor:n,lineHeight:i})=>({...n?{backgroundColor:t?n:void 0,borderRadius:e/5,padding:r(e,i)}:{}}),p=({letterSpacing:e,lineHeight:t,name:n,url:i})=>({fontFamily:n,fontGroup:"",fontOverrides:{letterSpacing:e,lineHeight:t,textTransform:!1},format:"truetype",defaultStyle:0,styles:[{name:"Regular",fontStyle:"",fontWeight:"normal",fontUrl:i}]});function h({hasPin:e,pages:t,limitToSingleFont:n}){let[r,d]=(0,i.useState)(!1),[c,u]=(0,i.useState)(()=>!!e&&(0,o.UQ)(t)),h=()=>{let e=t.reduce((e,t)=>{let i=t?.blocks?.filter(e=>[s.Nc.PARAGRAPH,s.Nc.HEADING].includes(e.type))||[];return n&&i.length>1&&(i=[i[0]]),i.forEach(t=>{let n=t.style?.font||s.xP.font,{name:i=""}=n;e[i]||(e[i]=n)}),e},{});if(Object.keys(e).length>0){let t=Object.keys(e).map(t=>{let n=e[t];return p({letterSpacing:n.letter_spacing,lineHeight:n.line_height,name:n.name,url:n.url})});(0,a.A)(t),d(!0)}};return(0,l.A)(()=>{h()}),(0,l.A)(()=>{c||h()}),(0,i.useEffect)(()=>{c||u((0,o.UQ)(t))},[c,t]),{fontsLoaded:r,mediaDataReceived:c}}},411923(e,t,n){n.d(t,{A:()=>i});function i({currentTime:e,endTime:t,startTime:n}){return"number"!=typeof n||"number"!=typeof t||!(n>=0)||!(t>0)||!(n<t)||n<=e&&e<=t}},225974(e,t,n){n.d(t,{M4:()=>o,UQ:()=>l,Zy:()=>s});var i=n(998053);function a(e,t,n){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let s=(e,t)=>{let n=/^\d{1,3}\.\d{1,3}(?:\.\d{1,6})?$/;if(!e?.match(n)||!t?.match(n))return null;let i=e?.split("."),a=t?.split("."),s=Math.max((i??"").length,(a??"").length);for(let e=0;e<s;e+=1){let t=e<(i?.length??0)?parseInt(i?.[e]??"",10):0,n=e<(a?.length??0)?parseInt(a?.[e]??"",10):0;if(t<n)return -1;if(t>n)return 1}return 0};class o{constructor(e,t,n){if(a(this,"start",Date.now()),a(this,"paused",!1),this.onProgress=e,this.onComplete=t,this.duration=n,this.remaining=n,"u"<typeof window)return;this.intervalId=window.setInterval(()=>{let e=this.paused?this.duration-this.remaining:this.duration-this.remaining+(Date.now()-this.start);this.onProgress(e/this.duration)},500),this.resume()}currentTime(){return this.duration-this.remaining}pause(){this.paused=!0,window.clearTimeout(this.timerId),this.remaining-=Date.now()-this.start;let e=this.duration-this.remaining;this.onProgress(e/this.duration)}resume(){this.paused=!1,this.start=Date.now(),window.clearTimeout(this.timerId),this.timerId=window.setTimeout(this.onComplete,this.remaining)}clear(){window.clearTimeout(this.timerId),window.clearInterval(this.intervalId)}}function l(e){return e.some(e=>(e?.blocks??[]).some(e=>e.type===i.Nc.IMAGE&&!!e.image||e.type===i.Nc.VIDEO&&(!!e.video||!!e.video_signature)))}},852758(e,t,n){n.d(t,{A:()=>i});function i(e){try{return decodeURIComponent(e)}catch{return null}}},5246(e,t,n){n.d(t,{A:()=>a});var i=n(859471);let a=e=>{let t=(0,i.useRef)(null);return(0,i.useEffect)(()=>{t.current=e},[e]),t.current}},567787(e,t,n){n.d(t,{A:()=>a,_:()=>i});let i=()=>{let e,t="u">typeof window?window.navigator?.connection?.effectiveType:void 0,n=!window?.devicePixelRatio||window.devicePixelRatio<=1?"1x":"2x";return t?"4g"===t?e="40-80":(n="1x",e="0-1"):e="unknown",{downloadSpeedGroup:e,screenDimension:n}};function a(e){let{vHLSV3MOBILE:t,...n}=e,a=function({vEXP3:e,vEXP4:t,vEXP5:n,vEXP6:a,vEXP7:s,v720P:o}){let{downloadSpeedGroup:l,screenDimension:r}=i(),d={"1x":e,"2x":n},c={"1x":s,"2x":s};return({unknown:d,"0-1":d,"1-5":{"1x":t,"2x":n},"5-10":{"1x":n,"2x":n},"10-20":{"1x":a,"2x":a},"20-40":c,"40-80":c,"80_or_above":c})[l][r]||o||void 0}(n),s=t||void 0;return a?{hlsv3:s,mp4:a}:{hlsv3:s}}},393652(e,t,n){n.d(t,{A:()=>l,Q:()=>r});var i=n(859471),a=n(767216),s=n(562615);let{Provider:o,get:l}=(0,a.A)("CloseupAnimations");function r({children:e}){let[t,n]=(0,i.useState)(!1),[a,l]=(0,i.useState)(!1),r=(0,i.useMemo)(()=>({isShowingShareButton:t,setIsShowingShareButton:n,isShowingVisualSearchButton:a,setIsShowingVisualSearchButton:l}),[t,a]);return(0,s.jsx)(o,{value:r,children:e})}},412848(e,t,n){n.d(t,{K:()=>l,i:()=>r});var i=n(335831),a=n(859471),s=n(562615);let o=(0,a.createContext)({closeupBodyWidth:0,isCollageOverlayOpen:!1,isRelatedPins10PercentVisible:!1,setCloseupBodyWidth:()=>{},setIsCollageOverlayOpen:()=>{},setIsRelatedPins10PercentVisible:()=>{}});function l(){let e=(0,a.use)(o);if(!e)throw Error("useCloseupBodyContext must be used within CloseupBodyContextProvider");return e}function r({children:e}){(0,a.useEffect)(()=>{(0,i.A)("Context","/app/www/closeup/desktop/CloseupBody/Context.tsx")},[]);let[t,n]=(0,a.useState)(0),[l,r]=(0,a.useState)(!1),[d,c]=(0,a.useState)(!1),u=(0,a.useMemo)(()=>({closeupBodyWidth:t,setCloseupBodyWidth:n,isCollageOverlayOpen:l,setIsCollageOverlayOpen:r,isRelatedPins10PercentVisible:d,setIsRelatedPins10PercentVisible:c}),[t,l,d]);return(0,s.jsx)(o,{value:u,children:e})}},747791(e,t,n){n.d(t,{A:()=>l});let i={WebkitMaskImage:"-webkit-radial-gradient(white, black)"},a=e=>`${e??0}px`,s=({topLeft:e,topRight:t,bottomRight:n,bottomLeft:i})=>`${a(e)} ${a(t)} ${a(n)} ${a(i)}`,o=({additionalPadding:e=0}={})=>({borderRadius:s({topLeft:24+e,topRight:24+e,bottomRight:24+e,bottomLeft:24+e}),borderRadiusNumeric:24+e});function l({additionalPadding:e,isSideBySide:t,isPadded:n,isRTL:a,closeupWithinMasonryEnabled:l=!1,blendedUIEnabled:r=!1}){let d={additionalPadding:e};if(r)return{borderStyle:{...i,borderRadius:"unset"},borderRadiusNumeric:0};if(l)return{borderStyle:{...i,borderRadius:"24px"},borderRadiusNumeric:24};if(t){let{borderRadius:e,borderRadiusNumeric:t}=(({getterOptions:e,isPadded:t,isRTL:n})=>t?o(e):n?(({additionalPadding:e=0}={})=>({borderRadius:s({topLeft:0,topRight:32+e,bottomRight:32+e,bottomLeft:0}),borderRadiusNumeric:32+e}))(e):(({additionalPadding:e=0}={})=>({borderRadius:s({topLeft:32+e,topRight:0,bottomRight:0,bottomLeft:32+e}),borderRadiusNumeric:32+e}))(e))({isPadded:n,isRTL:a,getterOptions:d});return{borderStyle:{...i,borderRadius:e},borderRadiusNumeric:t}}{let{borderRadius:e,borderRadiusNumeric:t}=(n?o:({additionalPadding:e=0}={})=>({borderRadius:s({topLeft:32+e,topRight:32+e,bottomRight:0,bottomLeft:0}),borderRadiusNumeric:32+e}))(d);return{borderStyle:{...i,borderRadius:e},borderRadiusNumeric:t}}}},128895(e,t,n){var i;let a;n.d(t,{hh:()=>s});let s=new Set([...(i=new Map([["DEFAULT",new Set(["button"])],["story_pin",new Set(["video"])],["product_detail_page",new Set(["description","shopButton","thumbnailsLoaded"])],["product_detail_page_plus",new Set(["description","shopButton","thumbnailsLoaded"])]]),a=new Set,i.forEach(e=>{a=new Set([...a,...e])}),a),"image","resource"])},91182(e,t,n){n.d(t,{A:()=>o});var i=n(335831),a=n(859471),s=n(562615);function o({children:e,dir:t="auto"}){return(0,a.useEffect)(()=>{(0,i.A)("SafeTextDirection","/app/www/storyPins/utility/SafeTextDirection.tsx")},[]),(0,s.jsx)("div",{"data-test-id":"safeTextDirection",dir:t,children:e})}},388657(e,t,n){n.d(t,{V:()=>a});let i=RegExp("^[^A-Za-z--A-Za-z----]*[---]");function a(e){return i.test(e||"")?"rtl":"ltr"}},960747(e,t,n){n.d(t,{Ay:()=>C});var i,a=n(335831),s=n(859471);n(224989);var o=n(836737),l=n(129625),r=n(105321),d=n(900565),c=n(134775),u=n(376195),p=n(254332),h=n(855149),m=n(754737),g=n(795822),y=n(562615);function f(e,t,n){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let _=(0,g.A)(()=>Promise.all([n.e("91796"),n.e("44175"),n.e("57120")]).then(n.bind(n,712459)),void 0,e=>712459,"app-www-video-VideoWrapper",e=>["91796","44175","57120"]),v=[0,.25,.5,.75,.95,.97],b=[0,.5,.8,.99,1],x={rootMargin:"-64px 0px 0px 0px",threshold:[...m.o8]},w=Object.freeze({LOADING:0,PLAYING:1,PAUSED:2,STALLING:3}),S=(void 0!==i||(i=n(430004)).hash&&"93ed23334d5bac81ac8410f05c4f2031"!==i.hash&&console.error("The definition of 'VideoWithContextLogging_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),i);function A(){return new Date().getTime()}function P(e){return!!e.volume&&e.volume>0}class k extends s.Component{constructor(e){super(e),f(this,"videoWrapperRef",(0,s.createRef)()),f(this,"loggedQuartiles",new Set),f(this,"handleWindowResize",()=>{if(!this.fullscreen){let e=this.getDimensions(),{height:t,width:n}=this.currentInterval;e.height!==t||e.width!==n?this.startNewInterval(e):(this.currentInterval.windowHeight=e.windowHeight,this.currentInterval.windowWidth=e.windowWidth)}}),f(this,"handlePlayheadDown",({event:e})=>{let{onPlayheadDown:t}=this.props;this.setState({seeking:!0}),t&&t({event:e})}),f(this,"handlePlayheadUp",({event:e})=>{let{onPlayheadUp:t}=this.props;this.setState({seeking:!1}),t&&t({event:e})}),f(this,"handleLoop",()=>{this.videoTime=0}),f(this,"handlePlaying",e=>{this.logVideoStart(),this.props.onPlaying&&this.props.onPlaying(e)}),f(this,"handleTimeChange",e=>{let{seeking:t,ready:n}=this.state;if(!this.currentInterval.videoDuration)return;let i=1e3*e.time,a=function(e,t,n,i){if(e>t||n<=0)return null;for(let a of i){let i=a*n;if(e<=i&&t>i)return a}return null}(this.videoTime,i,this.currentInterval.videoDuration,v);if("number"==typeof a&&this.props.playing&&!t&&n){let e=A();this.loggedQuartiles.has(a)||(this.logVideoEvent(6906,{...this.currentInterval,startTime:e,endTime:e,videoStartTime:0,videoEndTime:0,quartile:Math.floor(4*a),quartilePercentValue:a}),this.loggedQuartiles.add(a))}this.videoTime=i,this.props.onTimeChange&&this.props.onTimeChange(e)}),f(this,"handleDurationChange",e=>{this.currentInterval.videoDuration=1e3*e.duration,this.props.onDurationChange&&this.props.onDurationChange(e)}),f(this,"handleReady",e=>{let{ready:t}=this.state;t||this.setState({ready:!0}),this.props.onReady&&this.props.onReady(e)}),f(this,"handleEnded",e=>{this.logFourthQuartileEvent(),this.props.loop&&(this.startNewInterval(),this.currentInterval.videoStartTime=0),this.props.onEnded&&this.props.onEnded(e)}),f(this,"handleVisibilityChange",e=>{if(0===e.length)return;let t=function(e){for(let t=0;t<b.length;t+=1){let n=b[t],i=b[t+1];if(null==i||n<=e&&e<i)return n}return null}(Number.parseFloat(e.slice(-1)[0].intersectionRatio.toFixed(2)));"number"==typeof t&&(this.visible=t>=.5),null==t||t===this.currentInterval.viewability||this.fullscreen||(0===t?this.startNewInterval({viewability:t,playbackState:w.PAUSED}):this.startNewInterval({viewability:t}))}),f(this,"handleFullscreenChange",({event:e,fullscreen:t})=>{if(t){let{height:e,width:t}=window.screen;this.startNewInterval({height:e,width:t,windowHeight:e,windowWidth:t})}else t||this.startNewInterval(this.getDimensions());this.fullscreen=t,this.props.onFullscreenChange&&this.props.onFullscreenChange({event:e,fullscreen:t})}),f(this,"handleClose",()=>{this.startNewInterval()}),this.state={ready:!1,seeking:!1,started:!1};let t=A();this.handleWindowResize=(0,r.A)(this.handleWindowResize,1e3),this.currentInterval={videoDuration:0,startTime:t,endTime:t,videoStartTime:0,videoEndTime:0,isAudible:P(e),playbackState:this.getPlaybackState(e,this.state),quartile:-1,quartilePercentValue:0,height:null,width:null,windowHeight:null,windowWidth:null,viewability:null},this.videoTime=0,this.fullscreen=!1,this.visible=null}componentDidMount(){(0,a.A)("VideoWithContextLogging","/app/www/video/VideoWithContextLogging.tsx"),this.currentInterval={...this.currentInterval,...this.getDimensions()},window.addEventListener("resize",this.handleWindowResize),window.addEventListener("beforeunload",this.handleClose)}componentDidUpdate(e,t){let n={};P(e)&&!P(this.props)?n.isAudible=!1:!P(e)&&P(this.props)&&(n.isAudible=!0);let i=this.getPlaybackState(this.props,this.state);this.getPlaybackState(e,t)!==i&&(n.playbackState=i),Object.keys(n).length>0&&this.startNewInterval(n)}componentWillUnmount(){window.removeEventListener("resize",this.handleWindowResize),window.removeEventListener("beforeunload",this.handleClose),this.startNewInterval()}getPlaybackState(e,t){return t.ready?e.playing&&!t.seeking?w.PLAYING:w.PAUSED:w.LOADING}getDimensions(){let e,t;if(this.videoWrapperRef.current){let n=this.videoWrapperRef.current;n.clientHeight&&n.clientWidth&&(e=n.clientHeight,t=n.clientWidth)}return{height:e,width:t,windowHeight:window.innerHeight,windowWidth:window.innerWidth}}logVideoEvent(e,t){let{closeupStoryPinViewability:n,contextLogData:i,logContextEvent:a,playing:s,surface:o}=this.props,{seeking:l}=this.state,{height:r,width:d,windowHeight:c,windowWidth:u,viewability:p,...h}=t,{playbackState:m}=h;if((m!==w.LOADING||6904!==e)&&(m!==w.PAUSED&&m!==w.STALLING||6904!==e)&&null!=r&&null!=d&&null!=c&&null!=u&&null!=p){let t={...h,gridAutoplay:6904===e&&s&&!l&&("AuthHomefeed"===o||"SearchItem"===o||"RelatedPinGrid"===o||"PdpRelatedPinGrid"===o),height:r,width:d,windowHeight:c,windowWidth:u,viewability:n||p};a({event_type:e,...function(e){let{eventData:{videoEvent:{gridAutoplay:t,videoDuration:n,startTime:i,endTime:a,videoStartTime:s,videoEndTime:o,isAudible:l,height:r,width:d,playbackState:c,quartile:u,quartilePercentValue:p,windowHeight:h,windowWidth:m,viewability:g}},component:y,objectId:f,view:_,viewParameter:v,...b}=e;return{component:y,object_id_str:f,view_type:_,view_parameter:v,aux_data:{...b},event_data:{videoEventData:{gridAutoplay:t,videoDuration:n?Math.floor(n):0,time:i,endTime:a,videoTime:s?Math.floor(s):0,endVideoTime:o?Math.floor(o):0,isAudible:l,height:r,width:d,playbackState:c,quartile:u,quartilePercentValue:p,windowHeight:h,windowWidth:m,viewability:g}}}}({...i,view:this.fullscreen?108:i.view,eventData:{videoEvent:t}})})}}logFourthQuartileEvent(){if(!this.loggedQuartiles.has(1)){let e=A();this.logVideoEvent(6906,{...this.currentInterval,startTime:e,endTime:e,videoStartTime:0,videoEndTime:0,quartile:4,quartilePercentValue:1}),this.loggedQuartiles.add(1)}}logVideoStart(){if(this.state.started)return;let{contextLogData:e,setVideoPlayed:t}=this.props;t(e.objectId),this.setState({started:!0})}startNewInterval(e){let t=A();this.logVideoEvent(6904,{...this.currentInterval,endTime:t,videoEndTime:this.videoTime}),this.currentInterval={...this.currentInterval,...e,startTime:t,videoStartTime:this.videoTime,endTime:-1,videoEndTime:-1}}render(){let{rootMargin:e,surface:t,aspectRatio:n,backgroundColor:i,captions:a,contextLogData:s,controls:l,fallback:r,hlsConfig:d,isAutoPlay:u,loop:h,objectFit:m,onLoadedChange:g,onControlsPause:f,onControlsPlay:v,onSeek:b,onVolumeChange:w,pin:S,playbackRate:A,playing:P,playsInline:k,poster:C,preload:I,seekTime:j,src:T,videoStartTime:E,volume:z,variant:V,setVideoRef:L,isMainCloseupIdeaVideo:R}=this.props,{seeking:M}=this.state;return void 0!==e&&(x.rootMargin=t?(0,p.W)(t):e),(0,y.jsx)(c.A,{onVisibilityChange:this.handleVisibilityChange,options:x,children:e=>(0,y.jsx)(o.az,{ref:t=>{e.current=t,this.videoWrapperRef.current=t},height:"inherit",children:(0,y.jsx)(_,{aspectRatio:n,backgroundColor:i,captions:a,contextLogData:s,controls:l,fallback:r,hlsConfig:d,isAutoPlay:u,isMainCloseupIdeaVideo:R,loop:h,objectFit:m,onControlsPause:f,onControlsPlay:v,onDurationChange:this.handleDurationChange,onEnded:this.handleEnded,onFullscreenChange:this.handleFullscreenChange,onLoadedChange:g,onLoop:this.handleLoop,onPlay:()=>{},onPlayError:()=>{},onPlayheadDown:this.handlePlayheadDown,onPlayheadUp:this.handlePlayheadUp,onPlaying:this.handlePlaying,onReady:this.handleReady,onSeek:b,onTimeChange:this.handleTimeChange,onVolumeChange:w,pinKey:S,playbackRate:A,playing:!M&&P,playsInline:k,poster:C,preload:I,seekTime:j,setVideoRef:L,src:T,variant:V,videoStartTime:E,visible:this.visible,volume:z})})})}}function C(e){(0,s.useEffect)(()=>{(0,a.A)("VideoWithContextLogging","/app/www/video/VideoWithContextLogging.tsx")},[]);let{pinKey:t}=e,n=(0,d.A)(S,t),{logContextEvent:i}=(0,l.o)(),{setVideoPlayed:o}=(0,h.y)(),r=(0,u._8)();return(0,y.jsx)(k,{...e,logContextEvent:i,pin:n,requestContext:r,setVideoPlayed:o})}f(k,"defaultProps",o.Ce.defaultProps)},754737(e,t,n){n.d(t,{$r:()=>a,_d:()=>s,o8:()=>i});let i=[0,.01,.02,.03,.04,.05,.06,.07,.08,.09,.1,.11,.12,.13,.14,.15,.16,.17,.18,.19,.2,.21,.22,.23,.24,.25,.26,.27,.28,.29,.3,.31,.32,.33,.34,.35,.36,.37,.38,.39,.4,.41,.42,.43,.44,.45,.46,.47,.48,.49,.5,.51,.52,.53,.54,.55,.56,.57,.58,.59,.6,.61,.62,.63,.64,.65,.66,.67,.68,.69,.7,.71,.72,.73,.74,.75,.76,.77,.78,.79,.8,.81,.82,.83,.84,.85,.86,.87,.88,.89,.9,.91,.92,.93,.94,.95,.96,.97,.98,.99,1],a={backgroundImage:"linear-gradient(to top, rgba(0, 0, 0, .4), rgba(0, 0, 0, 0))",pointerEvents:"none",bottom:0},s=e=>e&&document.querySelector(`video[poster="${e}"]`)||null}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/63060-77483b0c56c7ee32.mjs.map