(self.modernJsonp=self.modernJsonp||[]).push([["15029"],{412442(e,t,n){n.r(t),n.d(t,{default:()=>i});let r={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CSSCarouselModule_parentPin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{args:null,kind:"FragmentSpread",name:"ItemRep_parentPin"}],type:"Pin",abstractKey:null};r.hash="d1542775568248acbce5a79453f4dffb";let i=r},827932(e,t,n){var r,i;n.r(t),n.d(t,{default:()=>o});let a={argumentDefinitions:[{defaultValue:!0,kind:"LocalArgument",name:"skipUnauthFragment"}],kind:"Fragment",metadata:null,name:"CSSCarouselModule_story",selections:[{alias:null,args:null,concreteType:"StoryAction",kind:"LinkedField",name:"action",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"location",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"contentIds",storageKey:null},{alias:null,args:null,concreteType:"StoryDisplayOptions",kind:"LinkedField",name:"displayOptions",plural:!1,selections:[{alias:null,args:null,concreteType:"StoryContentDisplay",kind:"LinkedField",name:"contentDisplay",plural:!1,selections:[{alias:null,args:null,concreteType:"StoryContentVisibleItemCount",kind:"LinkedField",name:"contentVisibleItemCount",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"mobile",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"web",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"itemWidthHeightRatio",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"objects",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:"images_236x",args:[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:[i],storageKey:'images(spec:"236x")'},{args:[{kind:"Variable",name:"skipUnauthFragment",variableName:"skipUnauthFragment"}],kind:"FragmentSpread",name:"ItemRep_pin"}],type:"Pin",abstractKey:null}],storageKey:null},{alias:"storyId",args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"storyType",storageKey:null},{alias:"storyTitle",args:null,concreteType:"StoryText",kind:"LinkedField",name:"title",plural:!1,selections:[r],storageKey:null},{args:null,kind:"FragmentSpread",name:"ItemRep_story"},{args:null,kind:"FragmentSpread",name:"useCarouselModuleLogic_story"},{args:null,kind:"FragmentSpread",name:"HeaderModule_story"}],type:"Story",abstractKey:null};a.hash="dee347ef77ae345e076b08494d4b664f";let o=a},31737(e,t,n){n.d(t,{A:()=>v});var r,i,a=n(335831),o=n(859471);n(825193);var s=n(836737),l=n(129625),d=n(939359),c=n(900565),u=n(909901),p=n(237745),h=n(92760),m=n(799445),f=n(994341),g=n(491149),_=n(904396),x=n(562615);let b=(void 0!==r||(r=n(412442)).hash&&"d1542775568248acbce5a79453f4dffb"!==r.hash&&console.error("The definition of 'CSSCarouselModule_parentPin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),r),y=(void 0!==i||(i=n(827932)).hash&&"dee347ef77ae345e076b08494d4b664f"!==i.hash&&console.error("The definition of 'CSSCarouselModule_story' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),i);function v({accessibilityLabelledBy:e,auxData:t,component:n,contentVisibleItemCountOverride:r,disableHeader:i,getProductTagAuxData:v,headerDisplayOptions:w,heading:A,itemRepSiblingNodeFactories:S,items:P,itemWidth:j,itemWidthHeightRatio:k,parentPinKey:I,renderItem:C,saveButtonOptions:T,showBorder:M,showMarkers:z=!1,showNavigationButtons:E=!0,storyKey:H,subtitle:F,surface:R,view:D=3,viewParameter:L,width:O}){(0,o.useEffect)(()=>{(0,a.A)("CSSCarouselModule","/app/packages/StructuredFeed/ModuleReps/CarouselModule/CSSCarouselModule.tsx")},[]);let{logContextEvent:N}=(0,l.o)(),B=(0,g.Ay)(),U=(0,g.bh)(B),W=(0,c.A)(b,I),K=(0,c.A)(y,H),V=K?.objects?[...K.objects]:[],$=V.map(e=>"Pin"===e.__typename?e.entityId:null),Y=(0,o.useMemo)(()=>{let e=K?.storyType?{story_type:K.storyType}:void 0;return e&&t?{...t,...e}:e??t},[K?.storyType,t]),J=U?236:175,q=j??J,G=K.displayOptions?.contentDisplay?.itemWidthHeightRatio??k??1,{web:X,mobile:Q}=K.displayOptions?.contentDisplay?.contentVisibleItemCount??{},Z=r??(U?X:Q),ee=!i&&(K?.storyTitle||A||F),{showModuleBorder:et,showExtraSmallSubtitle:en,headerMarginBottom:er,isFixedWidthSlides:ei,moduleBorderStyle:ea}=(0,m.A)({storyKey:K,styleOverrides:{showModuleBorder:M}}),eo=!ei&&!!Z&&!j,es=eo?"100%":q,el=(0,o.useCallback)(({currentIndex:e,nextIndex:t})=>{if(void 0===e||e===t)return;let r=Number($?.[e]);N({aux_data:Y,event_type:108,component:n,view_type:D,view_parameter:L,event_data:{pinCarouselSlotEventData:{carouselSlotId:Number.isFinite(r)?r:void 0,carouselSlotIndex:e,toCarouselSlotIndex:t}}})},[Y,n,$,N,D,L]),ed=(0,o.useCallback)(({item:e,index:t})=>{let r=()=>{let r;if(C)return C({item:e,index:t});if(t===V.length-1&&K.action?.text&&K.action?.url&&(r=K.action,r?.text&&r?.url&&h.$$.has(r?.location))){let t="Pin"===e.__typename&&e.images_236x?.url;return t&&(0,x.jsx)(u.A,{auxData:Y,buttonText:K.action?.text,component:n,contentIds:K.contentIds??void 0,element:179,imageWidth:es,previewImageSrc:t,storyId:K.storyId??"",storyType:K.storyType,url:K.action.url,view:D,viewParameter:L})}let i="Pin"===e.__typename?v?.(e):void 0;return(0,x.jsx)(p.A,{auxData:{...i,...Y},boardKey:null,component:n,imageWidth:es,isInDesktopCarousel:U,isInMobileCarousel:!U,item:null,itemWidthHeightRatio:G,parentPinKey:W,pinKey:"Pin"===e.__typename?e:null,productTagParentPinId:W?.entityId,relatedInterestKey:null,saveButtonOptions:T,slotIndex:t,storyKey:K,surface:R,view:D,viewParameter:L})},i=S?.[t];if(i){let e=r();return(0,x.jsx)(_.e,{children:t=>(0,x.jsx)(s.az,{position:"relative",children:(0,x.jsxs)(o.Fragment,{children:[e,i(t)]})})})}return r()},[V.length,n,v,U,S,es,G,Y,W,C,T,K,R,D,L]);return(0,x.jsxs)(s.az,{borderColor:et?"decorative":void 0,borderWidth:et?ea:void 0,dangerouslySetInlineStyle:{__style:{"--carousel-item-width":`${q}px`,"--story-item-width-height-ratio":`${1/G}`,...eo&&{"--carousel-item-count":`${Z}`}}},direction:"column",display:"flex",rounding:et?400:void 0,width:O??"100%",children:[ee&&(0,x.jsx)(s.az,{marginStart:6,marginTop:4,children:(0,x.jsx)(f.A,{auxData:Y,headerDisplayOptions:w,marginBottomOverride:er,showExtraSmallSubtitle:en,storyKey:K,view:D,viewParameter:L})}),(0,x.jsx)(s.az,{position:"relative",children:(0,x.jsx)(d.A,{accessibilityLabelledBy:e,items:P??V,mode:"multi",onIndexChange:el,renderItem:ed,showNavigationButtons:E,showScrollMarkers:z})})]})}},603909(e,t,n){n.d(t,{A:()=>p});var r=n(679902),i=n(76501),a=n(321571),o=n(421752),s=n(14143),l=n(892804),d=n(775816),c=n(315718),u=n(916244);let p=function(){let e=(0,i.A)();if(e?.isAuthenticated&&!function(){let e=(0,i.A)(),t=window.location.pathname.startsWith("/settings/notifications"),n=window.location.pathname.startsWith("/reports-and-violations/"),r=window.location.pathname.startsWith("/email/subscription")||window.location.pathname.startsWith("/email/remove")||t,a=window.location.pathname.startsWith("/pin/create/"),o="/pin-builder/"===window.location.pathname&&/url=/.test(window.location.href),{userAgent:s}=e||{userAgent:{isMobile:!1,isTablet:!1}};return s.isMobile||s.isTablet?r||n:a||o||r||n}()){var t,n;let i,p,{viewType:h,viewParameter:m}=(0,d.Cs)()??{},f=(0,c.uy)(window);t={data:{appVersion:(0,u.A)(),auxData:{pwa_type:f&&"unknown"!==f?f:void 0,stage:e.stage??"unknown"},browser:e.userAgent.browserType,clientUUID:(0,r.A)(),event_type:7137,time:1e6*Date.now(),unauth_id:e.unauthId,view_type:h,view_parameter:m}},n=e.isAuthenticated,i=a.A.create("ActiveUserResource",t),p=3e4,i.callCreate().catch(e=>{let r,a=e.message;if(a&&"object"==typeof a){"_t_message"in a&&delete a._t_message;try{r=JSON.stringify(a)}catch(e){r="Unable to serialize error message"}}else r=a;(0,l.GV)("webapp.metrics.dau.errors",{sampleRate:1,tags:{message:r,browser:t.data.browser,error_code:(0,s.A)(e,"api_error_code")||"unknown",is_auth:n}}),setTimeout(()=>{p>o.Qv||(p*=2,i.callCreate())},p)})}}},212178(e,t,n){function r(e){return[0,24,21,26].includes(e)}function i({articleType:e,id:t,title:n}){let r=n.toLowerCase().replace(/[.,\/#!?$%\^&\*+;:{}=\-_`~()\â€™'"]/g,"").trim().replace(/\s+/g,"-");return"today"===e?`/today/shop/${r}/${t}/`:`/discover/article/${r}/${t}/`}n.d(t,{I:()=>r,k:()=>i})},437750(e,t,n){n.d(t,{E2:()=>r,I0:()=>l,KU:()=>p,N9:()=>a,Rv:()=>o,X9:()=>i,Yl:()=>u,hh:()=>d,t8:()=>s});let r=e=>{let t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t&&[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]},i=(e,t,n)=>.2126*(e/255)**2.2+.7151*(t/255)**2.2+.0721*(n/255)**2.2,a=e=>{let t=e.replace("#","");return(299*parseInt(t.substr(0,2),16)+587*parseInt(t.substr(2,2),16)+114*parseInt(t.substr(4,2),16))/1e3<155},o=({hexColor:e,saturationMultiplier:t,brightnessMultiplier:n,minSaturationClamp:i,mixVal:a=1,minBrightnessClamp:o=0})=>{let s=r(e);null===s&&(s=[229,229,224]);let l=((e,t,n)=>{let r=Math.max(e/=255,t/=255,n/=255),i=r-Math.min(e,t,n),a=0;return 0!==i&&(a=(r===e?(t-n)/i+6*(t<n):r===t?(n-e)/i+2:(e-t)/i+4)*60)<0&&(a+=360),{h:a,s:0===r?0:i/r,b:r}})(...s),d=(e,t,n)=>Math.max(t,Math.min(e,n));l.s=d(l.s*(1+t),i,1),l.b=d(l.b*(1+n),o,1);let c=(({h:e,s:t,b:n})=>{let r=n*t,i=r*(1-Math.abs(e/60%2-1)),a=n-r,o=0,s=0,l=0;return e<60?(o=r,s=i):e<120?(o=i,s=r):e<180?(s=r,l=i):e<240?(s=i,l=r):e<300?(o=i,l=r):(o=r,l=i),{r:Math.round((o+a)*255),g:Math.round((s+a)*255),b:Math.round((l+a)*255)}})({...l}),u=e=>({r:Math.round(c.r*a+e*(1-a)),g:Math.round(c.g*a+e*(1-a)),b:Math.round(c.b*a+e*(1-a))}),p=u(0),h=u(255);return[[p.r,p.g,p.b],[h.r,h.g,h.b]]};function s(e){if("string"!=typeof e)return{r:0,g:0,b:0,a:0};let t=e.trim(),n="rgba"===t.slice(0,4).toLowerCase(),r=!n&&"rgb"===t.slice(0,3).toLowerCase();if(!n&&!r)return{r:0,g:0,b:0,a:0};let i=t.indexOf("("),a=t.indexOf(")",i);if(-1===i||-1===a)return{r:0,g:0,b:0,a:0};let o=t.slice(i+1,a).split(",").map(e=>e.trim());if(n&&4!==o.length||r&&3!==o.length)return{r:0,g:0,b:0,a:0};let[s,l,d,c]=o,u=Number(s),p=Number(l),h=Number(d),m=n?Number(c):1;return[u,p,h].some(e=>Number.isNaN(e))||n&&Number.isNaN(m)?{r:0,g:0,b:0,a:0}:{r:u,g:p,b:h,a:m}}function l(e,t){let n=e.a+t.a*(1-e.a);return 0===n?{r:0,g:0,b:0,a:0}:{r:Math.round((e.r*e.a+t.r*t.a*(1-e.a))/n),g:Math.round((e.g*e.a+t.g*t.a*(1-e.a))/n),b:Math.round((e.b*e.a+t.b*t.a*(1-e.a))/n),a:n}}let d=e=>`rgba(${e.r}, ${e.g}, ${e.b}, ${e.a})`,c=e=>e.toString(16).padStart(2,"0"),u=(e,t)=>{let n=r(e);if(!n)throw Error(`Invalid hex color: ${e} for lightenHexByPercentage`);let[i,a,o]=n,s=Math.max(0,Math.min(100,t))/100,l=Math.round(i+(255-i)*s),d=Math.round(a+(255-a)*s),u=Math.round(o+(255-o)*s);return`#${c(l)}${c(d)}${c(u)}`},p=(e,t)=>d(((e,t)=>{let n=r(e);if(!n)throw Error(`Invalid hex color: ${e} for hexToRgba`);let[i,a,o]=n;return{r:i,g:a,b:o,a:Math.max(0,Math.min(1,t))}})(e,t))},33396(e,t,n){n.d(t,{A:()=>h});var r=n(335831),i=n(859471),a=n(836737),o=n(254762),s=n(625277),l=n(259628);let d="0px 0px 8px rgba(0, 0, 0, 0.1)";var c=n(376195),u=n(297178),p=n(562615);function h({children:e,footerConfig:t,headerConfig:n,height:h,hideOnScroll:m,hideOnScrollState:{isHidden:f,updateHiddenState:g},isFooterHidden:_,noPadding:x,paddingX:b,paddingY:y=3,type:v,zIndex:w,isStoryPin:A}){let S,P;(0,i.useEffect)(()=>{(0,r.A)("FixedContent","/app/packages/layout/FixedContent.tsx")},[]);let{headerLimitedOverflow:j,ignoreObstructions:k,zIndexForGestaltBug:I}=n||{},{appUpsellFooterConfig:C,footerInLego:T,navFooterConfig:M}=t||{},z=!!C,E="header"===v?"top":"bottom",{isDarkMode:H}=(0,s.D2)(),{isRTL:F}=(0,c._8)(),{mWebCloseupRedesignEnabled:R}=(0,o.A)(),D=(0,i.useRef)(null),L=(0,i.useRef)(null);(0,i.useEffect)(()=>{try{if(!k){let e=D.current;L.current=j&&e&&Array.isArray(e.children)?e.children[0]:e,L.current instanceof HTMLElement&&l.A.addObstruction(E,L.current)}}catch(e){window.console.error(e),window.console.error('Can only register impression obstructions for type "HTMLElement"')}return()=>{!k&&L.current instanceof HTMLElement&&l.A.removeObstruction(E,L.current)}},[k,j,E,H]);let O="top"===E?"relative":"fixed",N=x?0:y,B=(h??64)+(n?.overrideTop||0),U=m||M?{transition:T||R?"transform 300ms ease-in-out, opacity 300ms ease-in-out":"transform 200ms linear",...f||_?{transform:`translateY(${"top"===E?-B:B}px)`,opacity:T||R?0:1}:Object.freeze({})}:{},W=2*!("relative"!==O||n?.noGutter),K=W?-W:0,V=H?s.ee:"rgba(255,255,255,.95)";H&&("header"===v?S=-1:P=-1);let $=T?z?void 0:h??64:"100%",Y=n?.isTranslucent&&V||H?V:"var(--sema-color-background-default)",J=n?.isTransparentBackground&&1?"var(--sema-color-background-transparent)":Y,q=(0,i.useMemo)(()=>({height:"footer"===v&&R?`calc(${$} + env(safe-area-inset-bottom))`:$,...R&&"footer"===v?{paddingBottom:`calc(env(safe-area-inset-bottom) + ${4*(N||0)}px)`}:Object.freeze({})}),[R,$,v,N]),G=(0,u.A)({skipExpActivation:!0});return(0,p.jsx)(a.az,{ref:D,bottom:"footer"===v,dangerouslySetInlineStyle:{__style:{top:S,bottomStyle:P,...!w||I?{zIndex:I||1}:Object.freeze({}),...j?{background:"transparent",overflow:"hidden",paddingBottom:100,marginBottom:-100,pointerEvents:"none"}:Object.freeze({}),...n?.hasBorder?{borderBottom:"1px solid #efefef"}:Object.freeze({}),...t?.hasTopShadow?{boxShadow:"0 -2px 4px 1px rgba(0, 0, 0, 0.08)"}:Object.freeze({}),...U}},"data-test-id":v,display:z?"flex":void 0,height:h&&!T?h:void 0,left:!0,marginEnd:T?"auto":K,marginStart:T?"auto":K,onTransitionEnd:()=>{(m||M)&&L.current&&(f||_?l.A.removeObstruction(E,L.current):l.A.addObstruction(E,L.current))},position:O,right:!0,top:"header"===v,width:T||"fixed"!==O?void 0:"100%",zIndex:I?void 0:w,children:(0,p.jsx)(a.az,{alignItems:t?.alignCenter?"center":void 0,dangerouslySetInlineStyle:{__style:{backgroundColor:J,paddingLeft:F||!G||A?void 0:"8px",paddingRight:F&&G&&!A?"8px":void 0,...q,boxShadow:R&&"footer"===v?`0 10px 0 0 ${J}, ${d}`:T?d:void 0,marginBottom:T&&!M?.docked?16:void 0,...j?{pointerEvents:"auto"}:Object.freeze({}),...n?.useRoundedCorners?{zIndex:5,borderTopRightRadius:17,borderTopLeftRadius:17,borderBottomRightRadius:0,borderBottomLeftRadius:0}:Object.freeze({})}},display:T||t?.alignCenter?"flex":void 0,marginEnd:T?"auto":void 0,marginStart:T?"auto":void 0,paddingX:b||4*("footer"===v&&!x)+W,paddingY:N,position:"relative",rounding:T&&!M?.docked?"pill":void 0,width:M?M.footerWidth:z?void 0:"100%",children:"function"==typeof e?e({updateHiddenState:g}):e})})}},97816(e,t,n){n.r(t),n.d(t,{default:()=>d});var r=n(335831),i=n(859471),a=n(836737),o=n(33396),s=n(447341),l=n(562615);function d({hasBorder:e,headerLimitedOverflow:t,ignoreObstructions:n,isTranslucent:d,isTransparentBackground:c,noGutter:u,overrideTop:p,useRoundedCorners:h,zIndexForGestaltBug:m,isStoryPin:f,...g}){(0,i.useEffect)(()=>{(0,r.A)("FixedHeader","/app/packages/layout/FixedHeader.tsx")},[]);let{noPadding:_,paddingY:x=3,zIndex:b}=g;return(0,l.jsx)(a.ib,{height:t?44+2*(_?0:x)*4:void 0,top:p||0,zIndex:b||void 0,children:(0,l.jsx)(s.A,{hideOnScroll:g.hideOnScroll,children:r=>(0,l.jsx)(o.A,{...g,headerConfig:{isTranslucent:d,isTransparentBackground:c,headerLimitedOverflow:t,hasBorder:e,ignoreObstructions:n,noGutter:u,overrideTop:p,zIndexForGestaltBug:m,useRoundedCorners:h},hideOnScrollState:r,isStoryPin:f,type:"header"})})})}},447341(e,t,n){n.d(t,{A:()=>o});var r=n(859471),i=n(835122);function a(e,t,n){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:r+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class o extends r.Component{constructor(...e){super(...e),a(this,"state",{isHidden:!!this.props.appUpsellFooterConfig||!!this.props.navFooterConfig?.isDockedNavOnPlp}),a(this,"lastScrollPos",0),a(this,"updateHiddenState",e=>{this.reqAnimationId=window.requestAnimationFrame(()=>{this.setState({isHidden:e})})}),a(this,"handleScroll",(0,i.A)(()=>{let{appUpsellFooterConfig:e,navFooterConfig:t}=this.props,{isHidden:n}=this.state,r=window.scrollY,i=r-this.lastScrollPos,a="none",{scrollHeight:o,clientHeight:s}=document.documentElement||{};Number.isNaN(o)||Number.isNaN(s)||(a=i<0?r<=Math.abs((window.scrollMinY||0)+Math.max(i,20))?"start":"none":r>=(window.scrollMaxY||o-s)-Math.max(i,20)?"end":"none");let l=55*!t?.isModal;e?i>20&&n&&r>=500?e.shouldShowAfterScroll()&&(this.updateHiddenState(!1),t?.onScroll(!1)):(i<-20&&!n||r<=l)&&(this.updateHiddenState(!0),t?.onScroll(!0)):this.props.navFooterConfig?.isDockedNavOnPlp?"start"===a&&!n||r<=l?(this.updateHiddenState(!0),t?.onScroll(!0)):(r>l||"end"===a)&&n&&(this.updateHiddenState(!1),t?.onScroll(!1)):(i<-20||"start"===a)&&n||r<=l?(this.updateHiddenState(!1),t?.onScroll(!1)):(i>20||"end"===a)&&!n&&(this.updateHiddenState(!0),t?.onScroll(!0)),this.lastScrollPos=r},30))}componentDidMount(){try{(this.props.hideOnScroll||this.props.navFooterConfig?.isDockedNavOnPlp)&&window.addEventListener("scroll",this.handleScroll)}catch(e){window.console.error(e),window.console.error('Can only register impression obstructions for type "HTMLElement"')}}componentWillUnmount(){(this.props.hideOnScroll||this.props.navFooterConfig?.isDockedNavOnPlp)&&window.removeEventListener("scroll",this.handleScroll),this.reqAnimationId&&(window.cancelAnimationFrame(this.reqAnimationId),this.reqAnimationId=null)}componentDidUpdate(e){!e.hideOnScroll&&this.props.hideOnScroll||!e.navFooterConfig?.isDockedNavOnPlp&&this.props.navFooterConfig?.isDockedNavOnPlp?(this.updateHiddenState(!0),window.addEventListener("scroll",this.handleScroll)):(e.hideOnScroll&&!this.props.hideOnScroll||e.navFooterConfig?.isDockedNavOnPlp&&!this.props.navFooterConfig?.isDockedNavOnPlp)&&(this.updateHiddenState(!1),window.removeEventListener("scroll",this.handleScroll))}render(){let{children:e,navFooterConfig:t}=this.props,{isHidden:n}=this.state;return e({isHidden:!t?.forceShow&&n,updateHiddenState:this.updateHiddenState})}}},299437(e,t,n){n.d(t,{A:()=>r});function r(e,t){return t in e}},645176(e,t,n){n.d(t,{A:()=>d});var r=n(859471),i=n(106386),a=n(810972),o=n(477040),s=n(247909);let l=(e,t,n)=>e.resources[t]?.[n];function d(e){let{name:t,optionsKey:n}=e??{name:"",optionsKey:""},d=t===o.W,c=(0,s.uN)(),u=c?.get(t,n);if(u)throw u;let p=(0,a.createSelector)(e=>l(e,t,n),e=>e?.data),h=(0,a.createSelector)(e=>l(e,t,n),e=>e?.auxData),m=(0,a.createSelector)(e=>l(e,t,n),e=>e?.error),f=(0,a.createSelector)(e=>l(e,t,n),e=>e?.nextBookmark),g=(0,i.d4)(f),_=(0,i.d4)(p),x=(0,i.d4)(h),b=(0,i.d4)(m),y=(0,r.useRef)({auxData:void 0,data:void 0,error:void 0,isAtEnd:!1,nextBookmark:void 0});if(d)return y.current;let v={auxData:x,data:_,error:b,isAtEnd:"-end-"===g,nextBookmark:g};return(v.auxData!==y.current.auxData||v.data!==y.current.data||v.error!==y.current.error||v.isAtEnd!==y.current.isAtEnd||v.nextBookmark!==y.current.nextBookmark)&&(y.current=v),y.current}},588275(e,t,n){n.d(t,{A:()=>a});var r=n(14143),i=n(798923);function a(){let e=navigator.serviceWorker;return e&&e.getRegistration?((0,i.PM)("mweb_service_worker.unregister_attempt"),e.getRegistration().then(e=>{if(e)return e.unregister().then(()=>((0,i.PM)("mweb_service_worker.unregister_success"),navigator.serviceWorker&&window.caches?window.caches.keys().then(e=>{let t=e.find(e=>e.startsWith("workbox-precaching"));return t?window.caches.delete(t):null}).then(()=>(0,i.PM)("mweb_service_worker.clear_app_shell")):Promise.resolve())).catch(e=>{(0,i.fu)("mweb_service_worker.unregister_fail",{error:(0,r.A)(e,"message")})})})):Promise.resolve()}},994308(e,t,n){n.d(t,{A:()=>r});function r(e){switch(e){case -1:return null;case 0:return"shopping-bag";case 1:return"tag";case 9:return"clock-history";default:return"magnifying-glass"}}},20273(e,t,n){n.d(t,{A:()=>r});function r({top:e,right:t,bottom:n,left:r,windowHeight:i,windowWidth:a,threshold:o=0}){return e>=0+o&&r>=0+o&&n<=i-o&&t<=a-o}},352469(e,t,n){n.d(t,{P:()=>r,y:()=>i});let{Provider:r,getMaybe:i}=(0,n(767216).A)("PinCreateDeleteContext")},26554(e,t,n){n.d(t,{A:()=>eq});var r=n(335831),i=n(859471),a=n(106386),o=n(979638),s=n(836737),l=n(221718),d=n(603909),c=n(731634),u=n(746743),p=n(135455),h=n(129625),m=n(93048),f=n(757507),g=n(183994),_=n(921831),x=n(625277);let b={borderRadius:"32px 32px 0px 0px",bottom:0,left:0,overflow:"hidden",touchAction:"none",boxShadow:"0px 0px 8px rgba(0, 0, 0, 0.1)",zIndex:1,width:"100vw",maxHeight:"100vw",minHeight:"30vh"},y={full:"100vh",default:"50vh",auto:""},v=({size:e,isDarkMode:t})=>(b.height=y[e],b.maxHeight="auto"===e?"90vh":"100vw",b.backgroundColor=t?x.be:"#FFFFFF",b);var w=n(306869),A=n(396901),S=n(498395),P=n(257470),j=n(562615);let k=({content:e,footer:t,header:n})=>{let[r,a]=(0,i.useState)(!1),o=(0,i.useRef)(null),l=(0,i.useCallback)(()=>{let e=o.current;e&&a(e?.clientHeight<e?.scrollHeight&&e.offsetHeight+e.scrollTop<e.scrollHeight)},[]);return(0,i.useEffect)(()=>{l()},[l]),(0,i.useEffect)(()=>(window?.addEventListener("resize",l),()=>{window?.removeEventListener("resize",l)}),[l]),(0,j.jsxs)(i.Fragment,{children:[(0,j.jsxs)(s.az,{ref:o,fit:!0,onScroll:l,overflow:"scroll",padding:0,children:[n,(0,j.jsx)(s.az,{flex:"grow",overflow:"auto",children:e})]}),!!t&&(0,j.jsx)(s.az,{dangerouslySetInlineStyle:r?{__style:{boxShadow:"var(--sema-space-0) var(--sema-space-negative-50) var(--sema-space-200) var(--sema-space-0) rgb(0 0 0 / 0.12)"}}:void 0,fit:!0,position:"relative",children:t})]})};function I({accessibilityModalLabel:e,allowClickAndDrag:t,allowBackgroundScroll:n=!1,children:a,closeOnOutsideClick:o=!0,footer:l,header:d,isOpen:c,mobileIsSlideUp:u,onDismiss:p,zIndex:h,size:m="auto"}){(0,i.useEffect)(()=>{(0,r.A)("SheetMobileWithMediaHeader","/app/packages/experiences/gestalt/SheetMobile/SheetMobileWithMediaHeader.tsx")},[]);let f=(0,A.A)(),g=(0,i.useRef)(null),{setAppFocusState:b}=(0,P.Y)(),[I,C]=(0,i.useState)(!1),{isDarkMode:T}=(0,x.D2)();if((0,i.useEffect)(()=>(c?b(!1):b(!0),()=>{c&&b(!0)}),[b,c]),(0,i.useEffect)(()=>(g.current=(0,_.A)(()=>{g.current&&C(!0)}),()=>{"u">typeof window&&Object.prototype.hasOwnProperty.call(window,"cancelAnimationFrame")&&g.current&&(window.cancelAnimationFrame(g.current),g.current=null)}),[]),(0,i.useEffect)(()=>{let e=c&&!n;return e&&(()=>{if(document.body){let{body:{style:e}}=document;e.overflow="hidden",e.touchAction="none"}})(),()=>{e&&(()=>{if(document.body){let{body:{style:e}}=document;e.overflow="visible",e.touchAction="auto"}})()}},[c,n]),!c)return null;let M=(({isDarkMode:e,size:t})=>{let n=e?x.be:"#FFFFFF";return{__style:{...v({size:t,isDarkMode:e}),backgroundColor:n,transitionProperty:"transform, opacity",transitionTimingFunction:"ease-out"}}})({isDarkMode:T,size:m});M.__style.transform=(()=>{if(u||!(()=>{if("u"<typeof window)return!1;let e=Math.max(window.visualViewport?.width||0,window.innerWidth,document.documentElement.clientWidth),t=Math.max(window.visualViewport?.height||0,window.innerHeight,document.documentElement.clientHeight);return e<=380||t<=760})())return"";let e=Math.min(1,(Math.max(window.visualViewport?.width||0,window.innerWidth,document.documentElement.clientWidth)-12)/380,(Math.max(window.visualViewport?.height||0,window.innerHeight,document.documentElement.clientHeight)-12)/600);return e=Math.max(.8,e),` scale(${e})`})();let z=(({size:e,isShowing:t,isDarkMode:n})=>{let r=v({size:e,isDarkMode:n});return r.transition="all 225ms cubic-bezier(0.0,0.0,0.2,1) 500ms",r.transform=t?"translateY(0)":`translateY(${y[e]||"100vh"})`,{__style:r}})({size:m,isShowing:I,isDarkMode:T});return(0,j.jsx)(S.A,{allowClickAndDrag:t,children:(0,j.jsx)(s.Wd,{children:(0,j.jsxs)(s.az,{"aria-label":e,display:"inlineBlock",height:"100%",position:"relative",role:"dialog",zIndex:h||w.QN,children:[(0,j.jsx)(s.Rp,{accessibilityLabel:f._('Mobile Sheet Mask', 'mweb.sheet_mobile.mask', 'The accessibility label for the mask of mobile sheet'),onTap:()=>{o&&p()},tapStyle:"none",children:(0,j.jsx)(s.az,{dangerouslySetInlineStyle:{__style:{backgroundColor:"rgba(0, 0, 0, .5)",touchAction:"none",transitionProperty:"opacity",transitionTimingFunction:"ease-out"}},height:"100%",left:!0,position:"fixed",top:!0,width:"100%",zIndex:new s.rk(1)})}),(0,j.jsx)(s.az,{color:"default",dangerouslySetInlineStyle:u?z:M,position:"fixed",children:(0,j.jsx)(s.az,{direction:"column",display:"flex",justifyContent:"between",maxHeight:z.__style?.maxHeight||"100vh",position:"relative",width:"100%",children:(0,j.jsx)(k,{content:a,footer:l,header:d})})})]})})})}var C=n(892804);let T=({display_data:e,complete:t,dismiss:n,context_aux_data:r})=>{let a=(0,A.A)(),{logContextEvent:o}=(0,h.o)(),[l,d]=(0,i.useState)(!0),[c,u]=(0,i.useState)(0),p=()=>{d(!1),n()},_=(0,i.useCallback)((e,t)=>{o({event_type:e,component:15489,element:t,aux_data:{experience_id:r.experience_id,placement_id:r.placement_id,step_number:c+1,step_index:c}})},[r.experience_id,r.placement_id,c,o]);if((0,i.useEffect)(()=>{_(13,18257)},[c,_]),!l)return null;if(!(e.steps&&e.steps.length>0&&e.steps.every(e=>e.title&&e.subtitle&&e.primary_button&&e.image)))return(0,C.GV)(m.pv,{sampleRate:1,tags:{experience_id:r.experience_id,placement_id:r.placement_id,reason:"Required display data not present",platform:4}}),null;let x=e.steps[c];if(!x)return(0,C.GV)(m.pv,{sampleRate:1,tags:{experience_id:r.experience_id,placement_id:r.placement_id,reason:`No step for index ${c}`,platform:4}}),null;let b=window?.innerWidth||375,y=(0,j.jsxs)(i.Fragment,{children:[(0,j.jsx)(s.ib,{top:0,children:(0,j.jsx)(s.az,{padding:3,position:"absolute",width:"100%",children:(0,j.jsx)(s.K0,{accessibilityLabel:a._('Dismiss', 'experiences.ExperienceModalWindow.modalDismissIconButton', 'Accessibility label for the X icon button to dismiss the modal window'),bgColor:"washLight",icon:"close",iconColor:"default",onClick:()=>{_(123,75),p()},size:"lg"})})}),(0,j.jsx)(s.iX,{contentAspectRatio:.8,height:1.25*b,width:b,children:(0,j.jsx)(s._V,{alt:x.image.image_alt,color:x.image.dominant_color||void 0,fit:"cover",naturalHeight:x.image.height,naturalWidth:x.image.width,src:x.image.url})})]}),v=(0,j.jsxs)(s.az,{alignItems:"center",display:"flex",flex:"grow",justifyContent:"center",paddingX:2,paddingY:3,children:[x.secondary_button&&(0,j.jsx)(f.A,{buttonType:"secondary",data:(0,g.q)(x.secondary_button,()=>{_(102,13005),p()}),experienceSchema:2}),(0,j.jsx)(f.A,{buttonType:"primary",data:(0,g.q)(x.primary_button,()=>{c<e.steps.length-1?(_(102,13004),u(c+1)):t()}),experienceSchema:2})]});return(0,j.jsx)(I,{accessibilityModalLabel:a._('Multi Step Modal', 'experiences.ExperienceMultiStepModal.accessibilityModalLabel', 'Accessibility label for the multi step modal'),allowClickAndDrag:!1,footer:v,header:y,isOpen:l,mobileIsSlideUp:!0,onDismiss:()=>{_(123,16412),p()},size:"auto",children:(0,j.jsxs)(s.az,{padding:3,children:[(0,j.jsx)(s.az,{marginBottom:3,children:(0,j.jsx)(s._Y,{size:"500",children:x.title})}),(0,j.jsx)(s.KJ,{children:x.subtitle})]})})};function M({experience:e}){return(0,i.useEffect)(()=>{(0,r.A)("ExperienceMultiStepModal","/app/packages/experiences/Experiences/ExperienceMultiStepModal/ExperienceMultiStepModal.tsx")},[]),(0,j.jsx)(u.Je,{eligibleSchemas:[2],eligibleTypes:[26],experience:e,children:({complete:t,dismiss:n,experience:{display_data:r}})=>(0,j.jsx)(T,{complete:t,context_aux_data:{experience_id:e?.experience_id,placement_id:e?.placement_id},dismiss:n,display_data:r})})}var z=n(620044),E=n(367943),H=n(388364),F=n(47998),R=n(97816),D=n(128353),L=n(742746),O=n(528989),N=n(376195),B=n(508765),U=n(220527),W=n(758778),K=n(424120),V=n(699415),$=n(906494),Y=n(218781),J=n(491149),q=n(911499),G=n(383218),X=n(308327),Q=n(612264),Z=n(239e3);n(273556);var ee=n(321173),et=n(233944),en=n(835122),er=n(119795),ei=n(20273),ea=n(131661);let eo={__style:{textOverflow:"ellipsis",whiteSpace:"nowrap"}};function es({currentTabIndex:e,tabBoards:t}){(0,i.useEffect)(()=>{(0,r.A)("MoreIdeasTabs","/app/www/Homefeed/MoreIdeasTabs.tsx")},[]);let n=(0,i.useRef)(null),l=(0,i.useRef)(!1),{width:d,height:c}=(0,ee.A)()||{width:0,height:0},u=(0,i.useRef)([]),p=(0,o.Zp)(),h=(0,A.A)(),m=(0,et.A)(),f=(0,a.wA)(),g=t.length?[{href:"/",text:(0,j.jsx)(s.az,{children:h._('All', 'homefeed.moreIdeasTab.homefeedTab', 'Homefeed tab')}),tabType:1},...t.filter(e=>e).map(({id:e,name:t},n)=>({href:`/?boardId=${String(e)}`,text:(0,j.jsx)(s.az,{dangerouslySetInlineStyle:eo,maxWidth:100,overflow:"hidden",children:t}),boardId:e,tabType:2,ref:u.current[n]}))]:null,_=e=>1===e?11081:11082,x=(0,i.useRef)([]),b=(0,i.useCallback)(()=>{u&&u.current&&u.current.length&&u.current.forEach((e,n)=>{if(!e?.current)return;let{id:r,name:i}=t[n]||{},a=e.current.getBoundingClientRect();(0,ei.A)({left:a.left,right:a.right,top:a.top,bottom:a.bottom,windowHeight:c,windowWidth:d})&&r&&!x.current.includes(r)&&(m({event_type:13,view_type:1,view_parameter:92,component:13184,element:_(2),object_id_str:r,aux_data:{board_id:r,tab_title:i,referrer:19}}),x.current.push(r))})},[u,m,t,c,d]),y=(0,en.A)(()=>{b()},50);if((0,er.A)(()=>{u.current=Array(t.length).fill(void 0).map((e,t)=>u.current[t]||(0,i.createRef)())}),(0,i.useEffect)(()=>{b();let e=n.current;return e&&e.addEventListener("scroll",y),()=>{e?.removeEventListener("scroll",y)}},[b,y]),(0,i.useEffect)(()=>()=>{l.current&&(window.cancelAnimationFrame(l.current),l.current=null)}),!g)return null;let v=g.map(e=>({href:e.href,text:e.text,ref:e.ref}));return(0,j.jsx)(s.az,{ref:n,"data-test-id":"more-ideas-tabs",fit:!0,marginBottom:1,marginTop:1,overflow:"scrollX",children:(0,j.jsx)(s.tU,{activeTabIndex:e,onChange:({activeTabIndex:e})=>{let t=g?.[e];if(t){let n;n=t.boardId,f((0,ea.Y)(n,e)),m({event_type:101,view_type:1,view_parameter:92,component:13184,element:_(t.tabType),aux_data:{index:e.toString(),board_id:t.boardId,referrer:19},object_id_str:t.boardId})}let{pathname:n,state:r}=g?{pathname:(g[e]||g[0]).href,state:(g[e]||g[0]).locationState||void 0}:{};p(n,{state:r})},tabs:v})})}var el=n(603958),ed=n(309555),ec=n(236621),eu=n(809796),ep=n(614590),eh=n(616275),em=n(711085),ef=n(428576),eg=n(863153);let e_=new s.rk(100);function ex({pinUrl:e,inviter:t}){(0,i.useEffect)(()=>{(0,r.A)("NuxSharedPinBanner","/app/www/pages/duplo/NuxSharedPinBanner.tsx")},[]);let n=(0,A.A)(),a=(0,eg.HR)(),[o,l]=(0,i.useState)(!0),d=(0,em.A)(e),{data:c}=(0,B.A)({name:"PinResource",options:{id:d,field_set_key:"detailed",is_mobile_fork:!0}}),u=d?a(d):null,p=c??u,h=p?.image_medium_url??p?.image_large_url,m=t.first_name??t.full_name??t.username??"",f=(0,eh.A)(n._('Tell {{ name }} what you think', 'HomePage.SharedPinBannerTitle', 'Shared pin banner title. name: inviter\'s display name'),{name:m}),{navFooterHeight:g}=(0,ef.o)();return d&&p&&m&&h&&o?(0,j.jsx)(s.az,{marginBottom:2,marginTop:2,paddingX:2,children:(0,j.jsx)(s.vF,{message:n._('See what inspired them and reply with your thoughts', 'HomePage.SharedPinBanner.Subtext', 'Subtext for shared pin banner'),offset:{bottom:g+8,top:0},onDismiss:()=>l(!1),primaryAction:{href:e+"&hide_app_upsell=true",label:n._('See Pin', 'HomePage.SharedPinToastAction', 'CTA to view shared pin'),accessibilityLabel:n._('See shared Pin', 'HomePage.SharedPinToastAction.accessibilityLabel', 'Accessibility label for CTA to view shared pin'),role:"link"},secondaryAction:{accessibilityLabel:n._('Later', 'HomePage.SharedPinBannerSecondary.accessibilityLabel', 'Dismiss shared pin banner'),label:n._('Later', 'HomePage.SharedPinBannerSecondary', 'Secondary action to dismiss shared pin banner'),onClick:()=>l(!1),role:"button"},thumbnail:{image:(0,j.jsx)(s._V,{alt:"Shared Pin",color:"transparent",fit:"cover",naturalHeight:40,naturalWidth:40,src:h})},title:f,zIndex:e_})}):null}function eb(){(0,i.useEffect)(()=>{(0,r.A)("PreferencesUpdatedBanner","/app/www/pages/duplo/PreferencesUpdatedBanner.tsx")},[]);let{shouldRefreshHomefeed:e,clearRefreshFlag:t}=(0,eu.d)(),{showToast:n}=(0,$.CG)(),a=(0,A.A)(),o=(0,i.useRef)(!1);return(0,i.useEffect)(()=>{if(e&&!o.current){o.current=!0;let e=a._('Preferences updated! We\'re refreshing your feed now.', 'PreferencesUpdatedBanner.message', 'Message shown when user returns to homefeed after updating preferences');n(({hideToast:n})=>(0,j.jsx)(H.A,{duration:3e3,onHide:()=>{n(),t(),o.current=!1},text:e}))}else e||(o.current=!1)},[e,t,n,a]),null}var ey=n(211735),ev=n(795822);function ew(e,t,n){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:r+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let eA=(0,ev.A)(()=>n.e("82269").then(n.bind(n,7841)),void 0,e=>7841,"app-www-pages-duplo-CoreActionsHeader",e=>["82269"]),eS=(0,ev.A)(()=>n.e("65469").then(n.bind(n,311398)),void 0,e=>311398,"app-www-stories-FullWidthPinStory",e=>["65469"]),eP=(0,ev.A)(()=>n.e("30369").then(n.bind(n,92120)),{ssr:!1},e=>92120,void 0,void 0),ej=(0,ev.A)(()=>n.e("30764").then(n.bind(n,535248)),void 0,e=>535248,"app-www-Homefeed-HomefeedMoreIdeasTabContent",e=>["30764"]),ek=(0,ev.A)(()=>n.e("45231").then(n.bind(n,528211)),void 0,e=>528211,"app-www-stories-LandingPageStory-LandingPageStory",e=>["45231"]),eI=(0,ev.A)(()=>Promise.all([n.e("18324"),n.e("37082"),n.e("3092")]).then(n.bind(n,892033)),{ssr:!1},e=>892033,void 0,void 0),eC=(0,ev.A)(()=>Promise.all([n.e("43744"),n.e("65693")]).then(n.bind(n,612044)),{ssr:!1},e=>612044,void 0,void 0),eT=(0,ev.A)(()=>n.e("6468").then(n.bind(n,640367)),{ssr:!1},e=>640367,void 0,void 0),eM=(0,ev.A)(()=>Promise.all([n.e("91796"),n.e("76557")]).then(n.bind(n,985724)),{ssr:!1},e=>985724,void 0,void 0),ez=(0,i.lazy)(()=>n.e("48177").then(n.bind(n,740264))),eE=(0,i.lazy)(()=>n.e("61570").then(n.bind(n,584857))),eH=(0,i.lazy)(()=>n.e("19558").then(n.bind(n,183749))),eF=(0,i.lazy)(()=>n.e("78682").then(n.bind(n,698593))),eR=(0,i.lazy)(()=>n.e("79566").then(n.bind(n,691613))),eD=(0,i.lazy)(()=>n.e("4666").then(n.bind(n,152225))),eL={feedKey:ep.bg,trafficSource:ep.mA,resourceName:ep.jC,feedItemProps:e=>({viewParameter:92,viewType:1,onFeedItemClick:()=>{e.onFeedItemClick&&e.onFeedItemClick()}}),pullToRefresh:!0},eO={first_page_size:"25",page_size:"10"},eN=({webMobileHomeFeedTakoverExperience:e})=>{let{feedKey:t,feedItemProps:n,pullToRefresh:r}=eL,i=(0,o.zy)(),d=(0,o.Zp)(),c=(0,a.d4)(({session:e})=>e.firstHomeFeedRequestAfterNux),u={webMobileHomeFeedTakoverExperience:e,location:i,navigate:d},p=(0,a.d4)(({feeds:e})=>e[t]??[]),{selectedUseCases:h,selectedPins:m}=(0,ec.p)(),f=(0,el.xx)(h,m),g=!c,_=f.length>0?{in_nux:c,nux_signals_map:f}:{in_nux:c},x={...ep.Vf,...g?{...eO}:{..._},in_local_navigation:!0,static_feed:!!(i&&(i.pathname.includes("pwt_performance_testing")||void 0!==(0,Y.A)(i.search).pwt_performance_testing))},b=(0,B.A)({name:ep.jC,options:x}),{isAtEnd:y,isFetching:v,fetchMore:w,data:A,refresh:S}=b,P={includeBackgroundImages:!0,includeVideos:!0,pins:Object.values((0,eg.zy)())};c&&(0,C.GV)("home_product.homefeed.has_in_nux_flag",{sampleRate:.1,tags:{appType:"mweb"}});let k=(()=>{let{isGraphQLEnabledInGeneral:e}=(0,G.aR)(),{locale:t}=(0,N._8)(),n=(0,eg.zy)();return({feedItems:r,prevFeedItems:i,finishedRefresh:a,unauthLandingPinStateForAuthHomefeed:{pinId:o,feedItem:s}})=>{if(!r.length)return null;if(a&&i.length>0){let e=(e,t)=>e.slice(0,t).map(e=>e.id),n=e(i,5),a=e(r,5),o={appType:"mweb",language:t&&t.slice(0,2)||"unknown",locale:t||"unknown"};(0,C.GV)("home_product.homefeed.refresh",{sampleRate:1,tags:o}),JSON.stringify(n)===JSON.stringify(a)&&(0,C.GV)("home_product.homefeed.refresh.no_change",{sampleRate:1,tags:o})}if(o&&!e){if(i.length>0&&i[0]!==r[0])return(0,K.y1)().removeItem(l.sH),{feedItem:null,pinId:null};else if((0===i.length||i[0]===r[0]&&i.length!==r.length||!s)&&n[o]&&!r.slice(0,5).some(({id:e})=>e===o))return{feedItem:{id:o,type:"pin",trackingParams:r[0].trackingParams},pinId:o}}return null}})(),I=A?.length?A[0]:null;if(e&&e.display_data?.in_checklist_education&&e.display_data?.num_columns_requested===2){let e={type:"fullWidthBreakIn",value:{index:0,content:I?.id&&(0,j.jsx)(ey.A,{storyId:I.id,children:e=>(0,j.jsx)(eS,{slotIndex:0,story:e,viewParameter:3833,viewType:604})})}},i=p.slice(1);return(0,j.jsx)(s.az,{"data-test-id":"homefeed",children:(0,j.jsx)(X.RM,{authHomefeedComponentDidUpdate:k,feedItemProps:n&&n(u),feedItems:i,feedItemsAdjustment:e,feedKey:t,pagination:{hasNext:!y,isLoadingNext:v,loadNext:()=>w(),refetch:()=>S()},pullToRefresh:r,trafficSource:ep.mA,visuallyCompleteProfilerOptions:P})})}return g&&!e?.display_data?(0,j.jsx)(s.az,{"data-test-id":"homefeed-ssr",children:(0,j.jsx)(X.Ir,{authHomefeedComponentDidUpdate:k,feedItemProps:n&&n(u),feedKey:ep.bg,pullToRefresh:r,resource:b,serverRender:!0,trafficSource:ep.mA,visuallyCompleteProfilerOptions:P})}):(0,j.jsx)(s.az,{"data-test-id":"homefeed",children:(0,j.jsx)(X.Ir,{authHomefeedComponentDidUpdate:k,feedItemProps:n&&n(u),feedKey:t,pullToRefresh:r,resource:b,trafficSource:ep.mA,visuallyCompleteProfilerOptions:P})})},eB=(0,ev.A)(()=>n.e("91928").then(n.bind(n,293899)),{ssr:!1},e=>293899,void 0,void 0),eU=(0,ev.A)(()=>n.e("66318").then(n.bind(n,674269)),{ssr:!1},e=>674269,void 0,void 0),eW=(0,ev.A)(()=>n.e("25312").then(n.bind(n,421507)),{ssr:!1},e=>421507,void 0,void 0),eK=(0,ev.A)(()=>n.e("24701").then(n.bind(n,504716)),{ssr:!1},e=>504716,void 0,void 0),eV=(0,ev.A)(()=>n.e("34311").then(n.bind(n,342330)),{ssr:!1},e=>342330,void 0,void 0),e$=(0,ev.A)(()=>n.e("79676").then(n.bind(n,403351)),{ssr:!1},e=>403351,void 0,void 0);class eY extends i.PureComponent{constructor(...e){super(...e),ew(this,"state",{...(0,el.of)(),currentTabIndex:"number"==typeof this.props.selectedTabIndex?this.props.selectedTabIndex:0,showUnlinkTokenExpiredModal:!1,showDeleteAccountSurveyModal:!1,showYipModal:!1,shouldDismissCoreActionsHeader:!1,showQRAppErrorBanner:!1}),ew(this,"renderOptInInterestPicker",()=>{let{everythingFeedExperience:e,isLimitedLogin:t}=this.props,{extraPlpImages:n,extraBlpImages:r}=this.state,i=!t&&e&&504192===e.experience_id,a=i&&e&&e.display_data&&e.display_data.full_screen_modal;return e&&i?(0,j.jsx)(c.A,{name:"SafeSuspense_HomePage_OptInInterestPicker",children:a?(0,j.jsx)(e$,{experience:e,extraImageInfo:n.length>0?n:r,viewParameter:92,viewType:1}):(0,j.jsx)(eK,{experience:e,viewParameter:92,viewType:1})}):null})}static getDerivedStateFromProps(e){let{selectedTabIndex:t,navigate:n,location:r}=e;return(0,Y.A)(r.search).show_qr_app_error?(n("/",{replace:!0}),{showQRAppErrorBanner:!0}):"number"==typeof t?{currentTabIndex:t}:null}componentDidMount(){let{dispatchViewedSharedPins:e,location:t,i18n:n,showToast:r,navigate:i}=this.props,{sharedPinData:a}=this.state;(0,ed.h)(!1),(0,d.A)(),a&&Object.keys(a).length>0&&e(a),t.state?.unlinkTokenInvalid&&this.setState({showUnlinkTokenExpiredModal:!0}),t.state?.isCloseAccountReasonOpen&&this.setState({showDeleteAccountSurveyModal:!0}),t.state?.showError&&r(({hideToast:e})=>(0,j.jsx)(H.A,{duration:5e3,onHide:e,text:n._('We can\u2019t find that idea! Try searching for one just like it.', ' - ', ' -- '),type:"error"})),(0,Y.A)(t.search).show_yip_modal&&(i("/",{replace:!0}),this.setState({showYipModal:!0})),this.props.shouldRefreshHomefeed&&(0,Q.Y9)("homefeed")}render(){let{checkExperiment:e,currentUserId:t,currentUsername:n,everythingFeedExperience:r,navigate:a,i18n:o,isAuthenticated:l,isEligibleForCoreActionsHeader:d,isPartner:h,location:m,moreIdeasStory:f,newUserWelcomeStoryExperience:g,webMobileHomeFeedTakoverExperience:_,selectedTabBoardId:x,tabBoards:b,shouldRefreshHomefeed:y}=this.props,{currentTabIndex:v,showUnlinkTokenExpiredModal:w,showDeleteAccountSurveyModal:A,showYipModal:S,shouldDismissCoreActionsHeader:P,showQRAppErrorBanner:k}=this.state,I=(0,Y.A)(m.search),C=I&&I.boardId||x;if(r&&!k)switch(r.experience_id){case 40002:case 10105:return(0,j.jsx)(c.A,{name:"SafeSuspense_HomePage_Nux",children:(0,j.jsx)(U.A,{fallback:(0,j.jsx)(W.A,{accessibilityLabel:this.props.i18n._('Loading new user education', 'Loading spinner', 'Loading spinner')}),children:h?(0,j.jsx)(eW,{experience:r}):(0,j.jsx)(eU,{experience:r})})});case 500681:return(0,j.jsx)(c.A,{name:"SafeSuspense_HomePage_ContactUpdate",children:(0,j.jsx)(eB,{fallback:(0,j.jsx)(W.A,{accessibilityLabel:this.props.i18n._('Loading experience', 'loading experience spinner', 'loading experience spinner')})})})}let T=l&&e("mweb_hf_core_actions_header").anyEnabled&&d,H=()=>{this.setState({shouldDismissCoreActionsHeader:!0})};return(0,j.jsx)(q.A,{viewParameter:92,viewType:1,children:(0,j.jsx)(V.A,{view:1,viewParameter:92,children:(0,j.jsxs)(D.default,{dataLayoutShiftBoundaryId:"AuthHomePageContainer",hasFixedHeader:!0,children:[k&&(0,j.jsx)(s.az,{marginTop:4,children:(0,j.jsx)(eD,{})}),this.props.checkExperiment("ce_mweb_nux_shared_pin_banner").anyEnabled&&this.props.sessionSharedPinLandingInfo?.url&&this.props.sessionSharedPinLandingInfo?.inviter?(0,j.jsx)(ex,{inviter:this.props.sessionSharedPinLandingInfo.inviter,pinUrl:this.props.sessionSharedPinLandingInfo.url}):null,(0,j.jsx)(Z.A,{text:o._('Home', 'HomePage.HiddenAccessibilityHeader', 'Accessibility h1 at home page')}),!!b?.length&&(0,j.jsx)(R.default,{hideOnScroll:l,noPadding:!0,overrideTop:0,children:(0,j.jsx)(s.az,{paddingY:1,children:(0,j.jsx)(es,{currentTabIndex:v,tabBoards:b||[]})})}),f&&(0,j.jsx)(s.az,{marginEnd:-4,marginStart:-4,paddingY:2,children:(0,j.jsx)(ey.A,{storyId:f.id||"",children:e=>(0,j.jsx)(eS,{slotIndex:0,story:e,viewParameter:92,viewType:1},f.id)})}),0!==v&&C&&v<=(b?.length??0)&&(0,j.jsx)(ej,{boardId:C})||(0,j.jsxs)(i.Fragment,{children:[(0,j.jsx)(M,{experience:r}),(0,j.jsx)(u.Vj,{experience:r,placementId:40001}),(0,j.jsx)(u.nU,{placementId:40001}),(0,j.jsx)(u.aR,{experience:r,placementId:40001}),(0,j.jsx)(p.A,{placementId:r?.placement_id}),(0,j.jsx)(E.A,{placementId:1000544}),(0,j.jsx)(z.A,{placementId:1000558}),(0,j.jsx)(u.Je,{eligibleIds:[500726,500866,500735,500833,501182,501275,501385,501358,501908,501909,503291],experience:r,children:(0,j.jsx)(U.A,{children:(0,j.jsx)(eE,{experience:r})})}),r&&(0,j.jsx)(u.Je,{eligibleIds:[507483],experience:r,children:({dismiss:e,experience:{display_data:t}})=>{let n=!("is_blocking"in t)||t.is_blocking;return(0,j.jsx)(eI,{container:"HomePage",dismiss:e,isBlockingModal:n})}}),r&&(0,j.jsx)(u.Je,{eligibleIds:[507661],experience:r,children:({dismiss:e,experience:{display_data:t}})=>(0,j.jsx)(eC,{container:"HomePage",displayData:t,onDismiss:e})}),r&&(0,j.jsx)(u.Je,{eligibleIds:[507924],experience:r,children:({complete:e,dismiss:t})=>(0,j.jsx)(eT,{onComplete:e,onDismiss:t})}),r&&(0,j.jsx)(u.Je,{eligibleIds:[508387],experience:r,placementId:40001,children:({complete:e,dismiss:t,experience:n})=>(0,j.jsx)(eM,{complete:e,dismiss:t,experience:n})}),r&&(0,j.jsx)(u.Je,{eligibleIds:[505326],experience:r,children:({complete:e,dismiss:t})=>(0,j.jsx)(i.Suspense,{children:(0,j.jsx)(eR,{complete:e,dismiss:t})})}),r&&(0,j.jsx)(u.Je,{eligibleIds:[505801],experience:r,children:({complete:e})=>(0,j.jsx)(i.Suspense,{children:(0,j.jsx)(eF,{complete:e})})}),g?.display_data?.story&&g.display_data.showUpdatedLandingPageStory&&(0,j.jsx)(ek,{isMoreIdeasTabsVisible:!!b?.length,newUserWelcomeStoryExperience:g}),(0,j.jsxs)(s.az,{marginTop:2*(!b?.length&&!f),children:[!P&&T&&(0,j.jsx)(eA,{onDismiss:H,username:n||""}),(0,j.jsx)(eN,{webMobileHomeFeedTakoverExperience:_})]})]}),w&&(0,j.jsx)(U.A,{children:(0,j.jsx)(s.az,{"data-test-id":"unlink-expired-token",children:(0,j.jsx)(eH,{onDismiss:()=>{a("/",{replace:!0}),this.setState({showUnlinkTokenExpiredModal:!1})}})})}),A&&(0,j.jsx)(U.A,{children:(0,j.jsx)(ez,{isPartner:h,onDismiss:()=>{a("/",{replace:!0}),this.setState({showDeleteAccountSurveyModal:!1})},userId:t,username:n})}),S&&(0,j.jsx)(c.A,{name:"YearInPreviewConfirmPublishModal",children:(0,j.jsx)(eV,{onModalDismiss:()=>{this.setState({showYipModal:!1})}})}),this.renderOptInInterestPicker(),0===v&&r&&(0,j.jsx)(u.Je,{eligibleIds:[508418],experience:r,children:()=>y?(0,j.jsx)(eb,{}):(0,j.jsx)(eP,{hasTabBoards:(b?.length??0)>0})})]})})})}}let eJ=[];function eq(){(0,i.useEffect)(()=>{(0,r.A)("HomePage","/app/www/pages/duplo/HomePage.tsx")},[]);let e=(0,A.A)(),t=(0,a.wA)(),n=(0,F.A)(),{showToast:s}=(0,$.CG)(),l=(0,o.Zp)(),d=(0,o.zy)(),{checkExperiment:c}=(0,O.A)(),{shouldRefreshHomefeed:p,clearRefreshFlag:h}=(0,eu.d)(),{experience:m}=(0,u.Rf)(40001),{experience:f}=(0,u.Rf)(1000115),{experience:g}=(0,u.Rf)(1000411),_=(0,a.d4)(({feeds:e})=>e.homefeed),x=(0,a.d4)(({homefeedTabUI:e})=>e.activeTabBoardId),b=(0,a.d4)(({homefeedTabUI:e})=>e.activeTabIndex),{isAuth:y,isLimitedLogin:v}=n,w=(0,a.d4)(({session:e})=>e.firstHomeFeedRequestAfterNux),S=(0,a.d4)(({session:e})=>e.sharedPinLandingInfo??null),P=n.isAuth?n.id:void 0,k=n.isAuth?n.username:void 0,I=!!n.isAuth&&n.isPartner,C=(0,J.qJ)(),T=Array.isArray(_)?_:[],M=!C&&T[0]&&"story"===T[0].type?T[0]:null,z=(0,a.d4)(({stories:e})=>M?e[M.id]:null),E=z&&z.story_type&&z.story_type.startsWith("boards_more_ideas_feed_upsell")?z:null,H=T.find(({type:e})=>"home_feed_tabs"===e)?.tabs,{data:R}=(0,B.A)(y&&c("mweb_hf_core_actions_header",{dangerouslySkipActivation:!0}).anyEnabled?{name:"UserResource",options:{user_id:n.id,field_set_key:"core_actions_header"}}:null),D=(0,J.M)();(0,L.A)(d,s,e);let N={checkExperiment:c,currentUserId:P,currentUsername:k,dispatchViewedSharedPins:e=>t({type:"SET_VIEWED_SHARED_PINS",payload:{pins:e}}),everythingFeedExperience:m,navigate:l,i18n:e,isAuthenticated:y,isEligibleForCoreActionsHeader:R?.is_eligible_for_core_actions_header,isLimitedLogin:v,isMobile:D,isPartner:I,location:d,moreIdeasStory:E,newUserWelcomeStoryExperience:g,selectedTabBoardId:x,selectedTabIndex:b,showToast:s,tabBoards:H??eJ,webMobileHomeFeedTakoverExperience:f,shouldRefreshHomefeed:p,clearRefreshFlag:h,inNux:w,sessionSharedPinLandingInfo:S};return(0,j.jsx)(eY,{...N})}},614590(e,t,n){n.d(t,{Vf:()=>s,bg:()=>i,jC:()=>o,ks:()=>l,mA:()=>a});var r=n(405840);let i="homefeed",a="feed_home",o="UserHomefeedResource",s={field_set_key:"mobile_grid_item",prepend:!1},l=(0,r.A)(s)},131661(e,t,n){n.d(t,{Y:()=>r});let r=(e,t)=>({type:"SET_ACTIVE_HOMEFEED_TAB",payload:{boardId:e,index:t}})},792041(e,t,n){n.d(t,{AD:()=>p,X2:()=>d,e6:()=>s,sN:()=>l,x2:()=>c});var r=n(321571),i=n(301704),a=n(890850);function o(e,t,n,i){return r.A.create("UserFollowResource",{user_id:e,invite_code:i||void 0,aux_data:t?{pin_id:t}:void 0,client_tracking_params:n})}function s(e,t=null,n,r){return i=>{o(e,t,n,r).callCreate().catch(()=>i((0,a.pV)(e,!1))),i((0,a.pV)(e,!0))}}function l(e,t=null,n,r){return async i=>{i((0,a.pV)(e,!0)),await o(e,t,n,r).callCreate().catch(t=>{throw i((0,a.pV)(e,!1)),t})}}function d(e,t=null,n){return r=>{o(e,t,n).callDelete().catch(()=>r((0,a.pV)(e,!0))),r((0,a.pV)(e,!1))}}function c(e,t=null,n){return async r=>{r((0,a.pV)(e,!1)),await o(e,t,n).callDelete().catch(t=>{throw r((0,a.pV)(e,!0)),t})}}let u=(e,t)=>({type:"USER_BULK_FOLLOW",payload:{ids:e,value:t}}),p=e=>t=>{e.length>0&&((0,i.A)({url:"/v3/users/follow/",method:"PUT",data:{followee_ids:e}}).catch(()=>t(u(e,!1))),t(u(e,!0)))}},890850(e,t,n){n.d(t,{Bt:()=>c,Fq:()=>p,LR:()=>a,Wi:()=>h,oH:()=>u,om:()=>d,pV:()=>o,yX:()=>s});var r=n(301704),i=n(588275);function a(e){return{type:"UPDATE_USER_PIN_COUNT",payload:e}}let o=(e,t)=>({type:"USER_FOLLOW",payload:{id:e,value:t}}),s=(e,t)=>({type:"USER_FOLLOWING_COUNT",payload:{id:e,following:t}}),l=(e,t)=>({type:"USER_BLOCK",payload:{id:e,value:t}}),d=({id:e,orbacSubjectId:t,blockSource:n,blockContext:i,logContextEvent:a})=>async o=>{o(l(e,!0));let s=await (0,r.A)({url:"/v3/users/{blocked_user}/block/",urlParams:{blocked_user:e},method:"PUT",data:{orbac_subject_id:t,block_source:n,block_context:i}}).catch(()=>o(l(e,!1)));return a({event_type:54,object_id_str:e}),s},c=(e,t)=>async n=>{n(l(e,!1));let i=await (0,r.A)({url:"/v3/users/{blocked_user}/block/",urlParams:{blocked_user:e},method:"DELETE"}).catch(()=>n(l(e,!0)));return t({event_type:55,object_id_str:e}),i};function u(e){return{type:"UPDATE_USER_SCHEDULED_PIN_COUNT",payload:e}}let p=(e,t)=>()=>(0,r.A)({url:"/v3/users/state/{state}/",urlParams:{state:e},method:"PUT",data:{value:t}}),h=(e,t,n)=>(a,o)=>{(0,r.A)({url:"/v3/users/me/",method:"POST"}).then(()=>{n({event_type:48,object_id_str:o().session.userId}),e(),(0,i.A)()},t)}},211735(e,t,n){n.d(t,{A:()=>i});var r=n(106386);function i({children:e,storyId:t}){let n=(0,r.d4)(({stories:e})=>e[t]);return n&&e(n)}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/15029-9e2629da344edb4b.mjs.map